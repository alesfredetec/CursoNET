<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CursoNET - Portal de Ejercicios Prácticos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        dark: '#0a0a0a',
                        darker: '#1a1a2e',
                        accent: '#16213e'
                    }
                }
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-link {
            color: #a8a8b3;
            text-decoration: none;
            transition: color 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            color: #667eea;
        }

        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        .page-title {
            text-align: center;
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }

        .page-subtitle {
            text-align: center;
            font-size: 1.3em;
            color: #a8a8b3;
            margin-bottom: 60px;
        }

        .exercises-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 80px;
        }

        .exercise-folder {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .exercise-folder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .exercise-folder:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .folder-icon {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
        }

        .folder-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 15px;
        }

        .folder-description {
            color: #e0e0e0;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .folder-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #a8a8b3;
            font-size: 0.9em;
        }

        .folder-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .tag {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .folder-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Modal para visor de código */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 5%;
            left: 5%;
            width: 90%;
            height: 90%;
            max-width: none;
            background: #1a1a2e;
            border-radius: 16px;
            border: 1px solid rgba(102, 126, 234, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #667eea;
        }

        .close-btn {
            background: none;
            border: none;
            color: #a8a8b3;
            font-size: 1.5em;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #ff6b6b;
        }

        .modal-body {
            flex: 1;
            padding: 0;
            display: flex;
        }

        .file-explorer {
            width: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            overflow-y: auto;
            position: relative;
        }

        .tips-section {
            margin-top: 20px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .tips-title {
            color: #667eea;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tip-item {
            color: #a8a8b3;
            font-size: 0.8em;
            margin-bottom: 8px;
            line-height: 1.4;
            padding-left: 15px;
            position: relative;
        }

        .tip-item::before {
            content: '💡';
            position: absolute;
            left: 0;
            top: 0;
        }

        .file-item {
            padding: 8px 12px;
            margin: 2px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-item:hover {
            background: rgba(102, 126, 234, 0.2);
        }

        .file-item.active {
            background: rgba(102, 126, 234, 0.3);
            color: #667eea;
        }

        .file-icon {
            font-size: 1.1em;
        }

        .code-viewer {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .code-header {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-info {
            color: #a8a8b3;
            font-size: 0.9em;
        }

        .copy-btn {
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.3);
            color: #667eea;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: rgba(102, 126, 234, 0.3);
        }

        .code-content {
            flex: 1;
            overflow: auto;
            background: #0d1117;
            max-height: calc(90vh - 120px);
        }

        .code-block {
            padding: 20px;
            font-family: 'JetBrains Mono', 'Monaco', 'Menlo', monospace;
            font-size: 0.85em;
            line-height: 1.5;
            color: #f8f8f2;
            white-space: pre;
            overflow-x: auto;
            overflow-y: auto;
            max-width: 100%;
            word-break: break-all;
            min-height: 100%;
        }

        .line-numbers {
            color: #6e7681;
            user-select: none;
            margin-right: 20px;
            display: inline-block;
            text-align: right;
            min-width: 40px;
        }

        /* Syntax highlighting */
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; font-style: italic; }
        .type { color: #4ec9b0; }
        .method { color: #dcdcaa; }
        .number { color: #b5cea8; }

        .progress-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 40px 20px;
            margin: 60px 0;
            border-radius: 16px;
        }

        .progress-title {
            text-align: center;
            font-size: 2em;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 30px;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .progress-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .progress-number {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .progress-label {
            color: #a8a8b3;
        }

        @media (max-width: 768px) {
            .exercises-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .modal-content {
                top: 2%;
                left: 2%;
                width: 96%;
                height: 96%;
            }
            
            .modal-body {
                flex-direction: column;
            }
            
            .file-explorer {
                width: 100%;
                max-height: 150px;
                border-right: none;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .code-content {
                max-height: calc(96vh - 200px);
            }
            
            .code-block {
                font-size: 0.75em;
                padding: 15px;
                line-height: 1.4;
            }
            
            .folder-stats {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .modal-content {
                top: 1%;
                left: 1%;
                width: 98%;
                height: 98%;
                border-radius: 8px;
            }
            
            .modal-header {
                padding: 15px 20px;
            }
            
            .file-explorer {
                max-height: 120px;
                padding: 15px;
            }
            
            .code-block {
                font-size: 0.7em;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">CursoNET</div>
            <nav class="nav-links">
                <a href="../index.html" class="nav-link">🏠 Inicio</a>
                <a href="../mapa-mental.html" class="nav-link">🧠 Mapa Mental</a>
                <a href="../preguntas-y-respuestas.html" class="nav-link">❓ Preguntas y Respuestas</a>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <h1 class="page-title">Portal de Ejercicios</h1>
        <p class="page-subtitle">Código práctico y ejercicios paso a paso para cada clase del curso</p>

        <div class="exercises-grid">
            <!-- Clase 1: Análisis Código Estático -->
            <div class="exercise-folder" onclick="openFolder('clase1-analisis-codigo-estatico')">
                <span class="folder-icon">🔍</span>
                <h3 class="folder-title">Clase 1: Análisis Código Estático</h3>
                <p class="folder-description">
                    Ejemplos prácticos con SonarLint, complejidad ciclomática y técnicas de refactoring.
                    Incluye casos "antes/después" con métricas reales.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>3 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>2-3 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Básico-Intermedio</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">SonarLint</span>
                    <span class="tag">Refactoring</span>
                    <span class="tag">Complejidad</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase1-analisis-codigo-estatico')">
                        Ver Código
                    </button>
                    <a href="clase1-analisis-codigo-estatico/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 2: Análisis de Requisitos -->
            <div class="exercise-folder" onclick="openFolder('clase2-analisis-requisitos')">
                <span class="folder-icon">📋</span>
                <h3 class="folder-title">Clase 2: Análisis de Requisitos</h3>
                <p class="folder-description">
                    Clasificación de requisitos funcionales vs no funcionales. Matriz de trazabilidad,
                    casos de uso y análisis de dependencias.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>3 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>2-3 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Intermedio</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">Requisitos</span>
                    <span class="tag">Funcionales</span>
                    <span class="tag">No Funcionales</span>
                    <span class="tag">Casos de Uso</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase2-analisis-requisitos')">
                        Ver Docs
                    </button>
                    <a href="clase2-analisis-requisitos/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 3: Técnicas No-If -->
            <div class="exercise-folder" onclick="openFolder('clase3-tecnicas-noif')">
                <span class="folder-icon">🚫</span>
                <h3 class="folder-title">Clase 3: Técnicas "No If"</h3>
                <p class="folder-description">
                    Dictionary patterns, Strategy pattern, State pattern y Polimorfismo.
                    Elimina condicionales complejas con patrones elegantes.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>7 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>3-4 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Intermedio-Avanzado</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">Dictionary Pattern</span>
                    <span class="tag">Strategy</span>
                    <span class="tag">State Pattern</span>
                    <span class="tag">Polimorfismo</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase3-tecnicas-noif')">
                        Ver Código
                    </button>
                    <a href="clase3-tecnicas-noif/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 4: Refactoring Avanzado -->
            <div class="exercise-folder" onclick="openFolder('clase4-refactoring-avanzado')">
                <span class="folder-icon">🔧</span>
                <h3 class="folder-title">Clase 4: Refactoring Avanzado</h3>
                <p class="folder-description">
                    Técnicas avanzadas de refactoring, Design Patterns (Factory, Builder, Observer, Command),
                    principios SOLID y modernización de legacy code con ejemplos completos.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>6 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>4-5 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Avanzado</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">SOLID</span>
                    <span class="tag">Design Patterns</span>
                    <span class="tag">Builder</span>
                    <span class="tag">Factory</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase4-refactoring-avanzado')">
                        Ver Código
                    </button>
                    <a href="clase4-refactoring-avanzado/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 5: Garbage Collection -->
            <div class="exercise-folder" onclick="openFolder('clase5-garbage-collection')">
                <span class="folder-icon">🗑️</span>
                <h3 class="folder-title">Clase 5: Garbage Collection</h3>
                <p class="folder-description">
                    Manejo de memoria, generaciones GC, IDisposable pattern, ArrayPool, Memory&lt;T&gt;
                    y optimización avanzada con métricas de performance reales.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>4 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>3-4 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Intermedio-Avanzado</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">GC Optimization</span>
                    <span class="tag">IDisposable</span>
                    <span class="tag">ArrayPool</span>
                    <span class="tag">Memory&lt;T&gt;</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase5-garbage-collection')">
                        Ver Código
                    </button>
                    <a href="clase5-garbage-collection/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 6: Indexación SQL -->
            <div class="exercise-folder" onclick="openFolder('clase6-indexacion-sql')">
                <span class="folder-icon">⚡</span>
                <h3 class="folder-title">Clase 6: Indexación SQL</h3>
                <p class="folder-description">
                    Scripts SQL para índices clustered/non-clustered, covering indexes, filtered indexes
                    y optimización dramática de queries con mejoras del 95-99% en performance.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>4 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>3-4 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Avanzado</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">SQL Optimization</span>
                    <span class="tag">Covering Indexes</span>
                    <span class="tag">Performance</span>
                    <span class="tag">Query Tuning</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase6-indexacion-sql')">
                        Ver Scripts
                    </button>
                    <a href="clase6-indexacion-sql/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>

            <!-- Clase 7: Diseño BD con Metadatos -->
            <div class="exercise-folder" onclick="openFolder('clase7-diseno-bd-metadatos')">
                <span class="folder-icon">🏗️</span>
                <h3 class="folder-title">Clase 7: Diseño BD Metadatos</h3>
                <p class="folder-description">
                    Arquitectura evolutiva con EAV patterns, modelos híbridos JSON, meta-modelos
                    y sistemas configurables con schema dinámico y procedimientos completos.
                </p>
                <div class="folder-stats">
                    <div class="stat-item">
                        <span>📄</span>
                        <span>3 archivos</span>
                    </div>
                    <div class="stat-item">
                        <span>⏱️</span>
                        <span>4-5 horas</span>
                    </div>
                    <div class="stat-item">
                        <span>📊</span>
                        <span>Avanzado</span>
                    </div>
                </div>
                <div class="folder-tags">
                    <span class="tag">EAV Pattern</span>
                    <span class="tag">JSON Columns</span>
                    <span class="tag">Metadatos</span>
                    <span class="tag">Dynamic Schema</span>
                </div>
                <div class="folder-actions">
                    <button class="action-btn btn-primary" onclick="event.stopPropagation(); viewCode('clase7-diseno-bd-metadatos')">
                        Ver Scripts
                    </button>
                    <a href="clase7-diseno-bd-metadatos/" class="action-btn btn-secondary" onclick="event.stopPropagation()">
                        Abrir Carpeta
                    </a>
                </div>
            </div>
        </div>

        <div class="progress-section">
            <h2 class="progress-title">Estadísticas del Portal</h2>
            <div class="progress-grid">
                <div class="progress-item">
                    <div class="progress-number">29</div>
                    <div class="progress-label">Archivos de Código</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">25+</div>
                    <div class="progress-label">Horas de Contenido</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">7</div>
                    <div class="progress-label">Clases Completas</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">100%</div>
                    <div class="progress-label">Funcional</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal para visor de código -->
    <div class="modal" id="codeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Visor de Código</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-explorer" id="fileExplorer">
                    <!-- Files will be loaded here -->
                </div>
                <div class="code-viewer">
                    <div class="code-header">
                        <div class="file-info" id="fileInfo">Selecciona un archivo</div>
                        <button class="copy-btn" onclick="copyCode()">📋 Copiar</button>
                    </div>
                    <div class="code-content">
                        <div class="code-block" id="codeBlock">
                            Selecciona un archivo del explorador para ver su contenido
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos de archivos por carpeta (simulated - en producción vendría de API)
        const folderContents = {
            'clase1-analisis-estatico': [
                { name: 'README.md', icon: '📝', type: 'markdown' },
                { name: '01-BadCodeExample.cs', icon: '🔴', type: 'csharp' },
                { name: '01-BadCodeExample-Fixed.cs', icon: '✅', type: 'csharp' },
                { name: '02-UserProfile-Before.cs', icon: '🔴', type: 'csharp' },
                { name: '02-UserProfile-After.cs', icon: '✅', type: 'csharp' },
                { name: '03-SonarLint-Setup.md', icon: '⚙️', type: 'markdown' }
            ],
            'clase2-tecnicas-noif': [
                { name: 'README.md', icon: '📝', type: 'markdown' },
                { name: '01-DictionaryPattern-Before.cs', icon: '🔴', type: 'csharp' },
                { name: '01-DictionaryPattern-After.cs', icon: '✅', type: 'csharp' },
                { name: '02-StrategyPattern-Before.cs', icon: '🔴', type: 'csharp' },
                { name: '02-StrategyPattern-After.cs', icon: '✅', type: 'csharp' },
                { name: '03-StatePattern-Before.cs', icon: '🔴', type: 'csharp' },
                { name: '03-StatePattern-After.cs', icon: '✅', type: 'csharp' },
                { name: '04-Polimorfismo-Enterprise.cs', icon: '🏢', type: 'csharp' }
            ],
            'clase3-garbage-collection': [
                { name: 'README.md', icon: '📝', type: 'markdown' },
                { name: '01-GC-Fundamentals.cs', icon: '🗑️', type: 'csharp' },
                { name: '02-IDisposable-Pattern.cs', icon: '♻️', type: 'csharp' },
                { name: '03-Memory-Leaks-Demo.cs', icon: '🔴', type: 'csharp' },
                { name: '04-OutOfMemory-Scenarios.cs', icon: '⚠️', type: 'csharp' },
                { name: '05-Performance-Profiling.cs', icon: '📊', type: 'csharp' }
            ],
            'clase4-indexacion-sql': [
                { name: 'README.md', icon: '📝', type: 'markdown' },
                { name: '01-Clustered-Indexes.sql', icon: '🗂️', type: 'sql' },
                { name: '02-NonClustered-Indexes.sql', icon: '📚', type: 'sql' },
                { name: '03-Covering-Indexes.sql', icon: '🎯', type: 'sql' },
                { name: '04-EF-Core-Configuration.cs', icon: '⚙️', type: 'csharp' },
                { name: '05-Performance-Analysis.sql', icon: '📊', type: 'sql' }
            ],
            'clase5-diseno-bd-metadatos': [
                { name: 'README.md', icon: '📝', type: 'markdown' },
                { name: '01-EAV-Pattern.sql', icon: '🏗️', type: 'sql' },
                { name: '02-JSON-Hybrid-Model.sql', icon: '🔄', type: 'sql' },
                { name: '03-Meta-Model-Schema.sql', icon: '🧠', type: 'sql' },
                { name: '04-Dynamic-UI-Generator.cs', icon: '🎨', type: 'csharp' },
                { name: '05-Enterprise-Example.cs', icon: '🏢', type: 'csharp' }
            ]
        };

        let currentFolder = '';
        let currentFileContent = '';

        function openFolder(folderName) {
            // Simular navegación a carpeta
            console.log(`Abriendo carpeta: ${folderName}`);
        }

        // Exercise summaries for each class
        const exerciseSummaries = {
            'clase1-analisis-codigo-estatico': {
                title: '📊 Análisis de Código Estático',
                description: 'Técnicas avanzadas para identificar problemas de código usando herramientas automatizadas',
                exercises: [
                    {
                        name: '01-BadCodeExample-Before.cs',
                        type: '❌ Problemático',
                        summary: 'Código con múltiples violaciones: métodos largos (200+ líneas), complejidad ciclomática alta (15+), duplicación de código y poor naming conventions.',
                        metrics: 'Complejidad: 15+ | Issues: 25+ | Mantenibilidad: Muy Baja'
                    },
                    {
                        name: '01-BadCodeExample-After.cs',
                        type: '✅ Optimizado',
                        summary: 'Refactoring completo aplicando principios de clean code: métodos pequeños, responsabilidades claras, eliminación de duplicación.',
                        metrics: 'Complejidad: 2-3 | Issues: 0 | Mejora: 90%+'
                    }
                ]
            },
            'clase2-analisis-requisitos': {
                title: '📋 Análisis de Requisitos',
                description: 'Técnicas profesionales para capturar, clasificar y gestionar requisitos',
                exercises: [
                    {
                        name: '01-Requirements-Analysis-Before.md',
                        type: '❌ Mal Definidos',
                        summary: 'Requisitos ambiguos e incompletos que causan problemas en desarrollo: falta de priorización, dependencias no identificadas, criterios de aceptación ausentes.',
                        metrics: 'Ambigüedades: 15+ | Dependencias: No identificadas | Trazabilidad: 0%'
                    },
                    {
                        name: '01-Requirements-Analysis-After.md',
                        type: '✅ Especificación Completa',
                        summary: 'Transformación completa con matriz de trazabilidad, clasificación funcional/no-funcional, casos de uso detallados y análisis de dependencias.',
                        metrics: 'Requisitos: 35+ | Trazabilidad: 100% | Cobertura: Completa'
                    }
                ]
            },
            'clase3-tecnicas-noif': {
                title: '🚫 Técnicas NoIf',
                description: 'Patrones avanzados para eliminar IFs complejos y reducir complejidad ciclomática',
                exercises: [
                    {
                        name: '01-DictionaryPattern-Before/After.cs',
                        type: '📚 Dictionary Pattern',
                        summary: 'Transformación de switch gigante en lookup table elegante con validación y fallbacks. Elimina complejidad ciclomática masiva.',
                        metrics: 'Complejidad: 12→2 | Branches: 15→0 | Extensibilidad: +90%'
                    },
                    {
                        name: '02-StrategyPattern-Before/After.cs',
                        type: '⚡ Strategy Pattern',
                        summary: 'Sistema de pricing complejo convertido en strategies intercambiables con dependency injection. Open/Closed principle aplicado.',
                        metrics: 'Complejidad: 15+→1-2 | Strategies: 5+ | Testing: Individual'
                    },
                    {
                        name: '03-StatePattern-Before/After.cs',
                        type: '🔄 State Pattern',
                        summary: 'Máquina de estado de orden de compra sin IFs usando State Pattern. Gestión de transiciones complejas simplificada.',
                        metrics: 'Estados: 8 diferentes | Transiciones: Automáticas | Mantenibilidad: +80%'
                    },
                    {
                        name: '05-ExtensionMethods-After.cs',
                        type: '🔧 Extension Methods',
                        summary: 'APIs fluidas para validación y processing condicional sin IFs explícitos. Chaining de operaciones elegante.',
                        metrics: 'Methods: 15+ extensions | Fluency: 100% | IFs: Eliminados'
                    }
                ]
            },
            'clase4-refactoring-avanzado': {
                title: '🔧 Refactoring Avanzado',
                description: 'Técnicas profesionales para modernizar legacy code y aplicar principios SOLID',
                exercises: [
                    {
                        name: '01-LegacyCode-Before/After.cs',
                        type: '🏚️ Legacy Modernization',
                        summary: 'Transformación completa de código legacy: separación de concerns, dependency injection, testing coverage y arquitectura limpia.',
                        metrics: 'Complejidad: 20+→3-5 | SOLID: 100% | Testing: Habilitado'
                    },
                    {
                        name: '02-DesignPatterns-Before/After.cs',
                        type: '🎨 Design Patterns',
                        summary: 'Implementación de múltiples design patterns: Factory, Observer, Strategy, Command. Arquitectura extensible y mantenible.',
                        metrics: 'Patterns: 8+ aplicados | Coupling: Bajo | Cohesion: Alta'
                    },
                    {
                        name: '03-SOLID-Violations-Before.cs',
                        type: '⚠️ SOLID Violations',
                        summary: 'Ejemplo educativo completo mostrando todas las violaciones SOLID en un sistema real de e-commerce. Anti-patterns identificados.',
                        metrics: 'Violations: 15+ identificadas | Responsabilidades: Mezcladas | Testing: Imposible'
                    },
                    {
                        name: '04-Builder-Advanced.cs',
                        type: '🏗️ Builder Pattern',
                        summary: 'Builder pattern avanzado con fluent interfaces, validation incremental y step-by-step construction para objetos complejos.',
                        metrics: 'Features: Nested builders | Validation: Incremental | Usabilidad: +95%'
                    }
                ]
            },
            'clase5-garbage-collection': {
                title: '🗑️ Garbage Collection',
                description: 'Optimización de memoria y prevención de memory leaks en aplicaciones .NET',
                exercises: [
                    {
                        name: '01-MemoryLeaks-Before/After.cs',
                        type: '💧 Memory Leak Fixes',
                        summary: 'Identificación y corrección de memory leaks comunes: events, timers, HttpClient, tasks y caches. Patrones de disposal correctos.',
                        metrics: 'Leaks: 8+ tipos corregidos | Memory: 70-90% reducción | Stability: +95%'
                    },
                    {
                        name: '02-IDisposable-After.cs',
                        type: '🔄 IDisposable Pattern',
                        summary: 'Implementación completa del patrón IDisposable con finalizers, using statements y gestión correcta de recursos no administrados.',
                        metrics: 'Resources: Files, HTTP, DB | Patterns: Dispose completo | Leaks: 0'
                    },
                    {
                        name: '03-GC-Optimization.cs',
                        type: '⚡ GC Optimization',
                        summary: 'Técnicas avanzadas: ArrayPool, Memory<T>, Span<T>, object pooling y tuning GC para aplicaciones high-performance.',
                        metrics: 'Techniques: 10+ patterns | Performance: 50-80% mejor | Allocations: Minimizadas'
                    }
                ]
            },
            'clase6-indexacion-sql': {
                title: '🚀 Indexación SQL',
                description: 'Optimización extrema de performance con índices estratégicos',
                exercises: [
                    {
                        name: '01-SlowQueries-Before.sql',
                        type: '🐌 Queries Problemáticos',
                        summary: 'Sistema e-commerce con 8 queries extremadamente lentos: table scans masivos, missing FK indexes, sorts costosos.',
                        metrics: 'Performance: 500ms-15000ms | Reads: 10,000+ pages | CPU: 90%+'
                    },
                    {
                        name: '01-SlowQueries-After.sql',
                        type: '⚡ Optimización Completa',
                        summary: 'Transformación dramática con índices estratégicos: covering indexes, filtered indexes, composite indexes y técnicas avanzadas.',
                        metrics: 'Performance: 2ms-200ms | Mejora: 95-99% | Techniques: 15+ aplicadas'
                    }
                ]
            },
            'clase7-diseno-bd-metadatos': {
                title: '🏗️ Diseño BD Metadatos',
                description: 'Arquitecturas avanzadas con sistemas metadata-driven y patrones EAV',
                exercises: [
                    {
                        name: '01-EAV-Pattern.sql',
                        type: '🏗️ EAV Sistema Completo',
                        summary: 'Sistema EAV completo con optimizaciones: typed columns, indexes estratégicos, vistas materializadas, auditoría automática y helpers.',
                        metrics: 'Flexibilidad: 100% | Performance: Optimizado | Features: Entity types, attributes, values'
                    }
                ]
            }
        };

        const funFacts = [
            "💡 Compara el archivo 'Before' con el 'After' para ver la magia del refactoring.",
            "🚀 Cada línea de código aquí está pensada para llevarte al siguiente nivel.",
            "🧠 ¿Sabías que entender el 'porqué' del código es más importante que memorizarlo?",
            "✅ Un buen código no solo funciona, también es fácil de leer y mantener por otros.",
            "🎯 El 90% de los bugs se resuelven hablando con un patito de goma. El otro 10% está en este código.",
            "✨ 'Cualquier tonto puede escribir código que una computadora entienda. Los buenos programadores escriben código que los humanos entienden.' - Martin Fowler",
            "💻 El código limpio siempre parece que fue escrito por alguien a quien le importaba.",
            "🔥 Analiza la complejidad ciclomática en los 'Before' y sorpréndete con los 'After'."
        ];

        function viewCode(folderName) {
            currentFolder = folderName;
            const modal = document.getElementById('codeModal');
            const modalTitle = document.getElementById('modalTitle');
            const fileExplorer = document.getElementById('fileExplorer');
            
            modalTitle.textContent = `Código - ${folderName.replace(/-/g, ' ')}`;
            
            // Show exercise summary first
            const summary = exerciseSummaries[folderName];
            if (summary) {
                showExerciseSummary(summary);
            }
            
            // Cargar lista de archivos
            fileExplorer.innerHTML = '';
            const files = folderContents[folderName] || [];
            
            files.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span class="file-icon">${file.icon}</span>
                    <span>${file.name}</span>
                `;
                fileItem.onclick = () => loadFile(file, fileItem);
                fileExplorer.appendChild(fileItem);
            });

            // Add tips section
            const tipsSection = document.createElement('div');
            tipsSection.className = 'tips-section';
            tipsSection.innerHTML = `
                <div class="tips-title">
                    <span>🎯</span> Tips de Navegación
                </div>
                <div class="tip-item">Haz clic en cualquier archivo para ver el código completo</div>
                <div class="tip-item">Usa Ctrl+F para buscar dentro del código</div>
                <div class="tip-item">El botón "Copiar" copia todo el código al portapapeles</div>
                <div class="tip-item">Los archivos "Before" muestran problemas, los "After" las soluciones</div>
                <div class="tip-item">Compara Before vs After para entender las mejoras aplicadas</div>
            `;
            fileExplorer.appendChild(tipsSection);
            
            modal.style.display = 'block';
        }

        function showExerciseSummary(summary) {
            const codeBlock = document.getElementById('codeBlock');
            const fileInfo = document.getElementById('fileInfo');
            
            fileInfo.textContent = `${summary.title} - Resumen de Ejercicios`;
            
            let summaryHTML = `
                <div style="color: #e0e0e0; font-family: 'Segoe UI', sans-serif; line-height: 1.6; max-width: none;">
                    <div style="text-align: center; margin-bottom: 30px; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">
                        <h2 style="color: #667eea; font-size: 1.8rem; margin-bottom: 10px;">${summary.title}</h2>
                        <p style="color: #a8a8b3; font-size: 1.1rem;">${summary.description}</p>
                    </div>
                    
                    <div style="display: grid; gap: 20px;">
            `;
            
            summary.exercises.forEach(exercise => {
                summaryHTML += `
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: 10px; padding: 20px; border-left: 4px solid #667eea;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                            <h3 style="color: #ffd700; font-size: 1.2rem; margin: 0;">${exercise.type}</h3>
                        </div>
                        <div style="color: #90ee90; font-family: 'Courier New', monospace; font-size: 0.9rem; margin-bottom: 10px; background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 5px;">
                            📄 ${exercise.name}
                        </div>
                        <p style="color: #e0e0e0; margin-bottom: 15px; font-size: 1rem;">
                            ${exercise.summary}
                        </p>
                        <div style="background: rgba(255, 215, 0, 0.1); border-radius: 5px; padding: 10px; border-left: 3px solid #ffd700;">
                            <strong style="color: #ffd700;">📊 Métricas:</strong>
                            <span style="color: #a8a8b3;">${exercise.metrics}</span>
                        </div>
                    </div>
                `;
            });
            
            summaryHTML += `
                    </div>
                    <div style="text-align: center; margin-top: 30px; padding: 15px; background: rgba(40, 167, 69, 0.1); border-radius: 10px;">
                        <p style="color: #28a745; font-weight: 600;">${funFacts[Math.floor(Math.random() * funFacts.length)]}</p>
                    </div>
                </div>
            `;
            
            codeBlock.innerHTML = summaryHTML;
        }

        async function loadFile(file, fileItem) {
            // Remover active de otros archivos
            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('active');
            });
            fileItem.classList.add('active');
            
            const fileInfo = document.getElementById('fileInfo');
            const codeBlock = document.getElementById('codeBlock');
            
            fileInfo.textContent = `${file.name} (${file.type.toUpperCase()})`;
            
            try {
                // En producción, esto sería una llamada a API real
                const response = await fetch(`${currentFolder}/${file.name}`);
                if (response.ok) {
                    const content = await response.text();
                    currentFileContent = content;
                    
                    // Aplicar syntax highlighting básico
                    const highlightedContent = highlightSyntax(content, file.type);
                    codeBlock.innerHTML = addLineNumbers(highlightedContent);
                } else {
                    // Contenido de demostración si no existe el archivo
                    currentFileContent = getDemoContent(file);
                    const highlightedContent = highlightSyntax(currentFileContent, file.type);
                    codeBlock.innerHTML = addLineNumbers(highlightedContent);
                }
            } catch (error) {
                // Fallback a contenido de demostración
                currentFileContent = getDemoContent(file);
                const highlightedContent = highlightSyntax(currentFileContent, file.type);
                codeBlock.innerHTML = addLineNumbers(highlightedContent);
            }
        }

        function getDemoContent(file) {
            if (file.type === 'csharp') {
                return `using System;
using System.Collections.Generic;

namespace CursoNET.Ejercicios
{
    /// <summary>
    /// Ejemplo de código para ${file.name}
    /// 
    /// Este es contenido de demostración que muestra
    /// la estructura típica de los ejercicios del curso.
    /// </summary>
    public class ${file.name.replace(/[^a-zA-Z0-9]/g, '')}
    {
        // TODO: Implementar ejercicio específico
        public void MetodoEjemplo()
        {
            Console.WriteLine("Contenido del ejercicio aquí");
        }
    }
}`;
            } else if (file.type === 'sql') {
                return `-- ${file.name}
-- Ejercicio de SQL para CursoNET

-- Ejemplo de estructura típica
CREATE TABLE EjemploTabla (
    Id INT PRIMARY KEY,
    Nombre NVARCHAR(100) NOT NULL,
    FechaCreacion DATETIME2 DEFAULT GETUTCDATE()
);

-- TODO: Implementar ejercicio específico
SELECT * FROM EjemploTabla;`;
            } else {
                return `# ${file.name}

## Descripción
Este archivo contiene instrucciones y ejemplos para el ejercicio.

## Objetivos
- Aprender conceptos específicos
- Aplicar mejores prácticas
- Resolver problemas reales

## Instrucciones
1. Revisar el código de ejemplo
2. Identificar problemas
3. Aplicar las técnicas enseñadas
4. Verificar las mejoras

Para ver el contenido real, accede directamente a la carpeta del ejercicio.`;
            }
        }

        function highlightSyntax(code, type) {
            if (type === 'csharp') {
                return code
                    .replace(/\b(using|namespace|public|private|protected|internal|static|readonly|const|class|interface|enum|struct|void|int|string|bool|decimal|float|double|var|new|return|if|else|for|foreach|while|do|switch|case|default|try|catch|finally|throw|async|await)\b/g, '<span class="keyword">$1</span>')
                    .replace(/"([^"]*)"/g, '<span class="string">"$1"</span>')
                    .replace(/\/\/.*$/gm, '<span class="comment">$&</span>')
                    .replace(/\/\*[\s\S]*?\*\//g, '<span class="comment">$&</span>');
            } else if (type === 'sql') {
                return code
                    .replace(/\b(SELECT|FROM|WHERE|JOIN|INNER|LEFT|RIGHT|ON|GROUP|ORDER|BY|HAVING|INSERT|UPDATE|DELETE|CREATE|ALTER|DROP|TABLE|INDEX|PRIMARY|KEY|FOREIGN|REFERENCES|NOT|NULL|DEFAULT|CONSTRAINT|DECLARE|SET|IF|ELSE|BEGIN|END|AS)\b/gi, '<span class="keyword">$1</span>')
                    .replace(/'([^']*)'/g, '<span class="string">\'$1\'</span>')
                    .replace(/--.*$/gm, '<span class="comment">$&</span>');
            }
            return code;
        }

        function addLineNumbers(code) {
            const lines = code.split('\n');
            return lines.map((line, index) => {
                const lineNumber = `<span class="line-numbers">${(index + 1).toString().padStart(3)}</span>`;
                return lineNumber + line;
            }).join('\n');
        }

        function copyCode() {
            if (currentFileContent) {
                navigator.clipboard.writeText(currentFileContent).then(() => {
                    const copyBtn = document.querySelector('.copy-btn');
                    const originalText = copyBtn.textContent;
                    copyBtn.textContent = '✅ Copiado';
                    setTimeout(() => {
                        copyBtn.textContent = originalText;
                    }, 2000);
                });
            }
        }

        function closeModal() {
            document.getElementById('codeModal').style.display = 'none';
        }

        // Cerrar modal con Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Cerrar modal clicking fuera
        document.getElementById('codeModal').addEventListener('click', (e) => {
            if (e.target.id === 'codeModal') {
                closeModal();
            }
        });

        // Animaciones al cargar
        document.addEventListener('DOMContentLoaded', function() {
            const folders = document.querySelectorAll('.exercise-folder');
            folders.forEach((folder, index) => {
                folder.style.opacity = '0';
                folder.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    folder.style.transition = 'all 0.6s ease';
                    folder.style.opacity = '1';
                    folder.style.transform = 'translateY(0)';
                }, index * 150);
            });
        });
    </script>
</body>
</html>