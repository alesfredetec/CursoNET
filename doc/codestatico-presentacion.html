<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis de Código Estático y Reducción de Complejidad</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 60px;
            position: relative;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-header {
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.8em;
            color: #764ba2;
            margin: 30px 0 20px;
            font-weight: 500;
        }

        .subtitle {
            font-size: 1.5em;
            color: #a8a8b3;
            font-weight: 300;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.1);
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .three-column {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 25px;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 25px;
            font-family: 'JetBrains Mono', 'Monaco', 'Menlo', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            margin: 20px 0;
            position: relative;
            overflow-y: auto;
            overflow-x: auto;
            max-height: 300px;
            white-space: pre;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .code-block::before {
            content: 'C#';
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(102, 126, 234, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            
        }
        
        .copy-button {
            position: absolute;
            top: 10px;
            right: 60px;
            background: rgba(102, 126, 234, 0.2);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 0.8em;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }
        
        .copy-button:hover {
            opacity: 1;
            background: rgba(102, 126, 234, 0.4);
            color: #667eea;
        }

        .code-block.terminal::before {
            content: 'Terminal';
        }

        .code-block.no-tag::before {
            display: none;
        }

        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; font-style: italic; }
        .operator { color: #d4d4d4; }
        .number { color: #b5cea8; }
        .type { color: #4ec9b0; }
        .method { color: #dcdcaa; }

        .highlight-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 152, 0, 0.1) 100%);
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .success-box {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(25, 135, 84, 0.1) 100%);
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .danger-box {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.1) 0%, rgba(200, 35, 51, 0.1) 100%);
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .slide-counter {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1000;
            color: #a8a8b3;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .instructor-info {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 13px;
            z-index: 1000;
            color: #a8a8b3;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: right;
        }

        .instructor-name {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .instructor-title {
            color: #a8a8b3;
            font-size: 11px;
        }

        /* PowerPoint-style navigation hints */
        .nav-hints {
            position: fixed;
            bottom: 90px;
            right: 30px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 11px;
            z-index: 1000;
            color: #666;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-hints.show {
            opacity: 1;
        }

        ul, ol {
            padding-left: 30px;
            line-height: 1.8;
        }

        li {
            margin-bottom: 10px;
            color: #e0e0e0;
        }

        .complexity-meter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .meter-bar {
            flex: 1;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .meter-fill {
            height: 100%;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .meter-fill.low {
            width: 30%;
            background: linear-gradient(90deg, #28a745, #20c997);
        }

        .meter-fill.medium {
            width: 60%;
            background: linear-gradient(90deg, #ffc107, #fd7e14);
        }

        .meter-fill.high {
            width: 90%;
            background: linear-gradient(90deg, #dc3545, #c82333);
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .tool-card:hover {
            transform: translateY(-3px);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .tool-icon {
            font-size: 2em;
            margin-bottom: 15px;
            display: block;
        }

        .tip-box {
            background: linear-gradient(135deg, rgba(23, 162, 184, 0.1) 0%, rgba(13, 110, 139, 0.1) 100%);
            border-left: 4px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .acronym-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .acronym-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .acronym-term {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .acronym-definition {
            font-size: 0.9em;
            color: #a8a8b3;
        }

        .exercise-box {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border: 2px dashed rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .exercise-title {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .before-after {
            padding: 20px;
            border-radius: 8px;
        }

        .before {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .after {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin: 10px 0;
        }

        .metric-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .pattern-showcase {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        @media (max-width: 768px) {
            .slide {
                padding: 30px;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            h2 {
                font-size: 2em;
            }
            
            .two-column,
            .three-column,
            .comparison-grid,
            .pattern-showcase {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                bottom: 20px;
                right: 20px;
            }
            
            .slide-counter {
                bottom: 20px;
                left: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <!-- Slide 1: Título -->
        <div class="slide active">
            <div class="slide-header">
                <h1>Análisis de Código Estático</h1>
                <p class="subtitle">Escribiendo Código que Otros Puedan Entender y Mantener</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 ¿Por qué mi código de ayer parece escrito por otra persona?</h3>
                    <p>La causa principal: <strong>alta complejidad ciclomática</strong>. Cuando regresamos a código que escribimos hace meses, no recordamos todos los caminos de ejecución posibles.</p>
                </div>
                
                <div class="two-column">
                    <div class="card">
                        <h3>🔍 Objetivos del Curso</h3>
                        <ul>
                            <li>Dominar el análisis estático con SonarLint</li>
                            <li>Entender y calcular la Complejidad Ciclomática</li>
                            <li>Aplicar técnicas de refactoring efectivas</li>
                            <li>Implementar patrones "anti-complejidad"</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🛠️ Herramientas que Dominaremos</h3>
                        <ul>
                            <li><strong>SonarLint:</strong> Análisis en tiempo real</li>
                            <li><strong>Visual Studio Metrics:</strong> Medición de complejidad</li>
                            <li><strong>Refactoring Tools:</strong> Extraer método, Guard Clauses</li>
                            <li><strong>Design Patterns:</strong> Strategy, Polimorfismo</li>
                        </ul>
                    </div>
                </div>

                <div class="highlight-box">
                    <h3>💡 El Principio Fundamental</h3>
                    <p><strong>El análisis estático es como tener un compañero robot increíblemente meticuloso que revisa tu código mientras escribes, buscando problemas antes de que lleguen a producción.</strong></p>
                </div>
            </div>
        </div>

        <!-- Slide 2: ¿Qué es el Análisis Estático? -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 1: El Guardián Silencioso</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🔍 ¿Qué es el Análisis Estático?</h3>
                    <p>Proceso de usar herramientas automáticas para analizar código fuente <strong>sin ejecutarlo</strong>, en busca de errores, vulnerabilidades y "malos olores" de diseño.</p>
                </div>

                <div class="three-column">
                    <div class="tool-card">
                        <span class="tool-icon">🐛</span>
                        <h4>Bugs</h4>
                        <p>Errores lógicos que causarán comportamiento incorrecto</p>
                        <div class="code-block no-tag">
<span class="comment">// Null reference potential</span>
<span class="keyword">string</span> name = GetName();
Console.WriteLine(name.Length);
                        </div>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">🔒</span>
                        <h4>Vulnerabilidades</h4>
                        <p>Fallos de seguridad como SQL injection</p>
                        <div class="code-block no-tag">
<span class="comment">// SQL Injection risk</span>
<span class="keyword">var</span> sql = <span class="string">"SELECT * FROM Users "</span> 
         + <span class="string">"WHERE Id = "</span> + userId;
                        </div>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">💨</span>
                        <h4>Code Smells</h4>
                        <p>Señales de problemas de diseño que dificultan mantenimiento</p>
                        <div class="code-block no-tag">
<span class="comment">// Método demasiado largo</span>
<span class="keyword">public void</span> <span class="method">ProcessOrder</span>()
{
    <span class="comment">// 200 líneas de código...</span>
}
                        </div>
                    </div>
                </div>

                <div class="warning-box">
                    <h3>⚠️ Diferencia Clave</h3>
                    <p><strong>Análisis Estático vs Pruebas Unitarias:</strong></p>
                    <ul>
                        <li><strong>Estático:</strong> Revisa estructura y calidad del código</li>
                        <li><strong>Unitarias:</strong> Verifican comportamiento al ejecutar</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 3: Instalación de SonarLint -->
        <div class="slide">
            <div class="slide-header">
                <h2>Instalando SonarLint en Visual Studio</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🛠️ Pasos de Instalación</h3>
                    <ol>
                        <li><strong>Abre Visual Studio</strong></li>
                        <li><strong>Ve a:</strong> Extensiones → Administrar extensiones</li>
                        <li><strong>Busca:</strong> "SonarLint" en la pestaña "En línea"</li>
                        <li><strong>Descarga e instala</strong> (requiere reinicio)</li>
                    </ol>
                </div>

                <div class="two-column">
                    <div class="card">
                        <h3>📊 ¿Qué verás después?</h3>
                        <ul>
                            <li><strong>Subrayados de colores</strong> en tu código</li>
                            <li><strong>Lista de errores</strong> con problemas detectados</li>
                            <li><strong>Sugerencias de mejora</strong> en tiempo real</li>
                            <li><strong>Acciones rápidas</strong> para resolver problemas</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🎨 Código de Colores</h3>
                        <div class="complexity-meter">
                            <span>🔴 Rojo:</span>
                            <div class="meter-bar">
                                <div class="meter-fill high"></div>
                            </div>
                            <span>Bugs críticos</span>
                        </div>
                        <div class="complexity-meter">
                            <span>🟡 Amarillo:</span>
                            <div class="meter-bar">
                                <div class="meter-fill medium"></div>
                            </div>
                            <span>Code Smells</span>
                        </div>
                        <div class="complexity-meter">
                            <span>🔵 Azul:</span>
                            <div class="meter-bar">
                                <div class="meter-fill low"></div>
                            </div>
                            <span>Sugerencias</span>
                        </div>
                    </div>
                </div>                    <div class="exercise-box">
                    <div class="exercise-title">🏋️ Ejercicio 1: Detectando Problemas</div>
                    <p>Crea un proyecto de consola y copia este código. Observa las advertencias de SonarLint:</p>
                    <div class="code-block">
                    <button class="copy-button">Copiar</button>
<span class="keyword">public class</span> <span class="type">UserProfile</span>
{
    <span class="keyword">public string</span> Name;        <span class="comment">// ⚠️ Campo público - debería ser propiedad</span>
    <span class="keyword">private int</span> age;          <span class="comment">// ⚠️ Variable no utilizada</span>

    <span class="keyword">public</span> <span class="method">UserProfile</span>(<span class="keyword">string</span> name)
    {
        Name = name;
    }

    <span class="keyword">public string</span> <span class="method">GetProfileInfo</span>(<span class="keyword">bool</span> includeAge)
    {
        <span class="keyword">string</span> result = <span class="string">"User: "</span> + <span class="keyword">this</span>.Name;
        <span class="keyword">if</span> (includeAge == <span class="keyword">true</span>) <span class="comment">// ⚠️ Comparación redundante con 'true'</span>
        {
            <span class="comment">// Lógica que nunca se usa - código muerto</span>
        }
        <span class="keyword">return</span> result;
    }
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 4: Complejidad Ciclomática -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 2: La Métrica Reina - Complejidad Ciclomática</h2>
            </div>
            <div class="content">
                <div class="highlight-box">
                    <h3>🧮 ¿Qué es la Complejidad Ciclomática?</h3>
                    <p>Mide el número de <strong>caminos linealmente independientes</strong> a través del código de un método. En términos simples: cuántas decisiones toma tu código.</p>
                </div>

                <div class="card">
                    <h3>📊 Cálculo Simplificado</h3>
                    <div class="metric-card">
                        <div class="metric-number">1</div>
                        <p>Complejidad base (el método en sí)</p>
                    </div>
                    <p><strong>+1 por cada:</strong></p>
                    <ul>
                        <li><code>if</code>, <code>else if</code></li>
                        <li><code>for</code>, <code>foreach</code>, <code>while</code>, <code>do-while</code></li>
                        <li><code>case</code> en un <code>switch</code></li>
                        <li><code>catch</code> en try-catch</li>
                        <li>Operador ternario <code>? :</code></li>
                        <li>Operadores lógicos <code>&&</code> y <code>||</code></li>
                    </ul>
                </div>

                <div class="three-column">
                    <div class="metric-card">
                        <div class="metric-number">1-10</div>
                        <h4 style="color: #28a745;">🟢 Bueno</h4>
                        <p>Simple y fácil de gestionar</p>
                    </div>
                    <div class="metric-card">
                        <div class="metric-number">11-20</div>
                        <h4 style="color: #ffc107;">🟡 Complejo</h4>
                        <p>Necesita refactorización</p>
                    </div>
                    <div class="metric-card">
                        <div class="metric-number">>20</div>
                        <h4 style="color: #dc3545;">🔴 Crítico</h4>
                        <p>Refactorizar es urgente</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 5: Ejemplo de Cálculo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Calculando Complejidad Paso a Paso</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🧮 Ejemplo Práctico</h3>
                    <div class="code-block">
<span class="keyword">public string</span> <span class="method">GetUserStatus</span>(<span class="type">User</span> user)
{
    <span class="comment">// 1 (punto de partida)</span>
    <span class="keyword">if</span> (user == <span class="keyword">null</span>) <span class="comment">// +1</span>
    {
        <span class="keyword">return</span> <span class="string">"Invalid"</span>;
    }

    <span class="keyword">if</span> (user.IsAdmin) <span class="comment">// +1</span>
    {
        <span class="keyword">return</span> <span class="string">"Admin"</span>;
    }

    <span class="keyword">if</span> (user.LoginCount > <span class="number">100</span> && user.LastLogin > DateTime.Now.AddDays(-<span class="number">30</span>)) <span class="comment">// +2</span>
    {
        <span class="keyword">return</span> <span class="string">"Active"</span>;
    }
    
    <span class="keyword">return</span> <span class="string">"Inactive"</span>;
}
                    </div>

                    <div class="success-box">
                        <h3>📊 Resultado del Cálculo</h3>
                        <p><strong>Complejidad = 5</strong></p>
                        <ul>
                            <li>1 (base) + 1 (if null) + 1 (if admin) + 1 (if login) + 1 (&&) = <strong>5</strong></li>
                            <li>✅ Estado: <strong>Bueno</strong> (dentro del rango 1-10)</li>
                            <li>✅ Fácil de entender y probar</li>
                        </ul>
                    </div>
                </div>

                <div class="exercise-box">
                    <div class="exercise-title">🏋️ Ejercicio 2: Tu Turno de Calcular</div>
                    <p>Calcula la complejidad ciclomática del siguiente método:</p>
                    <div class="code-block">
<span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Order</span> order, <span class="type">Customer</span> customer)
{
    <span class="keyword">decimal</span> discount = <span class="number">0</span>;
    <span class="keyword">if</span> (customer.IsVip) <span class="comment">// +?</span>
    {
        discount = <span class="number">0.15m</span>;
    }

    <span class="keyword">foreach</span> (<span class="keyword">var</span> lineItem <span class="keyword">in</span> order.LineItems) <span class="comment">// +?</span>
    {
        <span class="keyword">if</span> (lineItem.Product.IsOnSale || lineItem.Quantity > <span class="number">10</span>) <span class="comment">// +?</span>
        {
            discount += <span class="number">0.05m</span>;
        }
    }

    <span class="keyword">if</span> (order.TotalAmount > <span class="number">1000</span>) <span class="comment">// +?</span>
    {
        <span class="keyword">return</span> discount + <span class="number">0.02m</span>;
    }
    <span class="keyword">else</span>
    {
        <span class="keyword">return</span> discount;
    }
}
                    </div>
                    <p><strong>Respuesta:</strong> 1 + 1 + 1 + 2 + 1 = <strong>6</strong> (Bueno)</p>
                </div>
            </div>
        </div>

        <!-- Slide 6: Herramientas de Medición -->
        <div class="slide">
            <div class="slide-header">
                <h2>Midiendo con Visual Studio</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>📊 Métricas de Código Integradas</h3>
                    <p><strong>Ruta:</strong> Clic derecho en proyecto → Analizar → Calcular métricas de código</p>
                </div>

                <div class="two-column">
                    <div class="card">
                        <h3>🔍 Métricas Disponibles</h3>
                        <ul>
                            <li><strong>Complejidad Ciclomática:</strong> Nuestra métrica principal</li>
                            <li><strong>Profundidad de Herencia:</strong> Niveles de jerarquía</li>
                            <li><strong>Acoplamiento de Clases:</strong> Dependencias entre clases</li>
                            <li><strong>Líneas de Código:</strong> Tamaño del método/clase</li>
                            <li><strong>Índice de Mantenibilidad:</strong> Puntuación 0-100</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🎯 Interpretación de Resultados</h3>
                        <div class="complexity-meter">
                            <span>Mantenibilidad:</span>
                            <div class="meter-bar">
                                <div class="meter-fill low"></div>
                            </div>
                            <span>80-100: Excelente</span>
                        </div>
                        <div class="complexity-meter">
                            <span></span>
                            <div class="meter-bar">
                                <div class="meter-fill medium"></div>
                            </div>
                            <span>50-79: Aceptable</span>
                        </div>
                        <div class="complexity-meter">
                            <span></span>
                            <div class="meter-bar">
                                <div class="meter-fill high"></div>
                            </div>
                            <span>0-49: Problemático</span>
                        </div>
                    </div>
                </div>

                <div class="tip-box">
                    <h3>💡 Tip Pro: Automatización</h3>
                    <p>Configura estas métricas en tu pipeline de CI/CD para detectar regresiones de calidad automáticamente. Herramientas como SonarCloud pueden bloquear pull requests con complejidad demasiado alta.</p>
                </div>

                <div class="warning-box">
                    <h3>⚠️ No Optimices Prematuramente</h3>
                    <p>Una complejidad de 8 en un método crítico de negocio puede ser aceptable si está bien probado y documentado. Focus en los métodos que cambias frecuentemente.</p>
                </div>
            </div>
        </div>

        <!-- Slide 7: Técnicas de Refactoring -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 3: Técnicas de Refactoring</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🔧 Técnicas Fundamentales</h3>
                    <div class="two-column">
                        <div>
                            <h4>1️⃣ Guard Clauses (Cláusulas de Guarda)</h4>
                            <p>Verificar precondiciones y salir temprano</p>
                        </div>
                        <div>
                            <h4>2️⃣ Extract Method (Extraer Método)</h4>
                            <p>Dividir métodos largos en funciones más pequeñas</p>
                        </div>
                    </div>
                </div>

                <div class="comparison-grid">
                    <div class="before">
                        <h4>❌ Antes: Código con "Arrow Pattern"</h4>
                        <div class="code-block">
<span class="keyword">public void</span> <span class="method">ProcessUser</span>(<span class="type">User</span> user)
{
    <span class="keyword">if</span> (user != <span class="keyword">null</span>)
    {
        <span class="keyword">if</span> (user.IsActive)
        {
            <span class="keyword">if</span> (user.HasProfile)
            {
                <span class="comment">// Lógica compleja anidada</span>
                <span class="comment">// Difícil de leer</span>
                <span class="comment">// Alto acoplamiento</span>
            }
            <span class="keyword">else</span> 
            {
                Console.WriteLine(<span class="string">"Sin perfil"</span>);
            }
        }
        <span class="keyword">else</span>
        {
            Console.WriteLine(<span class="string">"Inactivo"</span>);
        }
    }
    <span class="keyword">else</span>
    {
        <span class="keyword">throw new</span> <span class="type">ArgumentNullException</span>();
    }
}
                        </div>
                        <p><strong>Complejidad: ~6-8</strong>
                        "Código con "Arrow Pattern" se refiere a un código con demasiada indentación, 
                        lo que dificulta su lectura y mantenimiento.
                         Visualmente, la indentación excesiva   forma   una flecha."
                        </p>
                    </div>
                    
                    <div class="after">
                        <h4>✅ Después: Con Guard Clauses</h4>
                        <div class="code-block">
<span class="keyword">public void</span> <span class="method">ProcessUser</span>(<span class="type">User</span> user)
{
    <span class="comment">// Guard Clauses</span>
    <span class="keyword">if</span> (user == <span class="keyword">null</span>) 
        <span class="keyword">throw new</span> <span class="type">ArgumentNullException</span>();
    
    <span class="keyword">if</span> (!user.IsActive)
    {
        Console.WriteLine(<span class="string">"Inactivo"</span>);
        <span class="keyword">return</span>;
    }
    
    <span class="keyword">if</span> (!user.HasProfile)
    {
        Console.WriteLine(<span class="string">"Sin perfil"</span>);
        <span class="keyword">return</span>;
    }

    <span class="comment">// Lógica principal sin anidamiento</span>
    <span class="method">ProcessUserProfile</span>(user);
    <span class="method">SendWelcomeEmail</span>(user);
}
                        </div>
                        <p><strong>Complejidad: ~3-4 


                        </strong> 
                    Básicamente, detectas y manejas los casos "anormales" al principio, dejando el código principal más claro y enfocado en el caso "normal"
                    </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: Extract Method -->
        <div class="slide">
            <div class="slide-header">
                <h2>Extract Method: Dividir para Conquistar</h2>
            </div>
            <div class="content">
                <div class="pattern-showcase">
                    <div class="card">
                        <h3>🔴 Problema: Método Monolítico</h3>
                        <div class="code-block">
<span class="keyword">public bool</span> <span class="method">SubmitApplication</span>(<span class="type">ApplicationForm</span> form)
{
    <span class="keyword">if</span> (form != <span class="keyword">null</span>)
    {
        <span class="keyword">if</span> (!<span class="keyword">string</span>.IsNullOrWhiteSpace(form.ApplicantName))
        {
            <span class="keyword">if</span> (form.ApplicantAge >= <span class="number">18</span>)
            {
                <span class="comment">// Validaciones múltiples</span>
                <span class="comment">// Guardar en base de datos</span>
                <span class="comment">// Enviar notificaciones</span>
                <span class="comment">// Logging</span>
                <span class="keyword">return</span> <span class="keyword">true</span>;
            }
            <span class="keyword">else</span> { <span class="comment">/* Error handling */</span> }
        }
        <span class="keyword">else</span> { <span class="comment">/* Error handling */</span> }
    }
    <span class="keyword">return</span> <span class="keyword">false</span>;
}
                        </div>
                        <p><strong>Problemas:</strong></p>
                        <ul>
                            <li>Una sola responsabilidad = múltiples tareas</li>
                            <li>Difícil de probar unitariamente</li>
                            <li>Complejidad alta</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🟢 Solución: Métodos Especializados</h3>
                        <div class="code-block">
<span class="keyword">public bool</span> <span class="method">SubmitApplication</span>(<span class="type">ApplicationForm</span> form)
{
    <span class="keyword">if</span> (!<span class="method">IsValidApplication</span>(form))
        <span class="keyword">return</span> <span class="keyword">false</span>;

    <span class="keyword">var</span> applicationId = <span class="method">SaveApplication</span>(form);
    <span class="method">SendNotifications</span>(form, applicationId);
    
    <span class="keyword">return</span> <span class="keyword">true</span>;
}

<span class="keyword">private bool</span> <span class="method">IsValidApplication</span>(<span class="type">ApplicationForm</span> form)
{
    <span class="keyword">return</span> form != <span class="keyword">null</span> 
        && !<span class="keyword">string</span>.IsNullOrWhiteSpace(form.ApplicantName)
        && form.ApplicantAge >= <span class="number">18</span>;
}

<span class="keyword">private int</span> <span class="method">SaveApplication</span>(<span class="type">ApplicationForm</span> form)
{
    <span class="comment">// Lógica de persistencia</span>
    <span class="keyword">return</span> <span class="number">123</span>;
}

<span class="keyword">private void</span> <span class="method">SendNotifications</span>(<span class="type">ApplicationForm</span> form, <span class="keyword">int</span> id)
{
    <span class="comment">// Lógica de notificaciones</span>
}
                        </div>
                        <p><strong>Beneficios:</strong></p>
                        <ul>
                            <li>Cada método tiene una responsabilidad</li>
                            <li>Fácil de probar individualmente</li>
                            <li>Complejidad distribuida</li>
                        </ul>
                    </div>
                </div>

                <div class="success-box">
                    <h3>🎯 Resultado Final</h3>
                    <p>Complejidad del método principal: <strong>2-3</strong> (vs 8-10 original)<br>
                    Métodos auxiliares: <strong>1-2</strong> cada uno<br>
                    <strong>Total:</strong> Más fácil de mantener, probar y entender</p>
                </div>
            </div>
        </div>

        <!-- Slide 9: Patrones Anti-Complejidad -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 4: Patrones "Anti-Complejidad"</h2>
            </div>
            <div class="content">
                <div class="danger-box">
                    <h3>🚨 El Problema: Lógica Condicional Basada en Tipo</h3>
                    <p>Grandes switch/if-else que cambian comportamiento según una variable. Viola el Principio Abierto/Cerrado.</p>
                </div>

                <div class="card">
                    <h3>❌ Ejemplo Problemático: Calculadora de Facturas</h3>
                    <div class="code-block">
<span class="keyword">public enum</span> <span class="type">CustomerType</span> { Standard, Premium, Vip }

<span class="keyword">public class</span> <span class="type">InvoiceCalculator</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateTotal</span>(<span class="keyword">decimal</span> amount, <span class="type">CustomerType</span> type)
    {
        <span class="keyword">switch</span> (type) <span class="comment">// Complejidad crece con cada tipo</span>
        {
            <span class="keyword">case</span> <span class="type">CustomerType</span>.Standard:
                <span class="keyword">return</span> amount;
            <span class="keyword">case</span> <span class="type">CustomerType</span>.Premium:
                <span class="keyword">return</span> amount * <span class="number">0.9m</span>; <span class="comment">// 10% descuento</span>
            <span class="keyword">case</span> <span class="type">CustomerType</span>.Vip:
                <span class="keyword">return</span> amount * <span class="number">0.8m</span>; <span class="comment">// 20% descuento</span>
            <span class="keyword">default</span>:
                <span class="keyword">throw new</span> <span class="type">ArgumentOutOfRangeException</span>();
        }
        <span class="comment">// Añadir "Corporate" requiere modificar este método</span>
    }
}
                    </div>

                    <div class="warning-box">
                        <h3>⚠️ Problemas de Este Enfoque</h3>
                        <ul>
                            <li><strong>Viola Open/Closed:</strong> Modificas código existente para añadir tipos</li>
                            <li><strong>Alta complejidad:</strong> Crece linealmente con cada tipo nuevo</li>
                            <li><strong>Testing complejo:</strong> Necesitas probar todos los casos</li>
                            <li><strong>Mantenimiento:</strong> Cambios en un tipo afectan todo el método</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 10: Patrón Strategy -->
        <div class="slide">
            <div class="slide-header">
                <h2>Solución: Patrón Strategy</h2>
            </div>
            <div class="content">
                <div class="success-box">
                    <h3>✅ La Solución: Encapsular Cada Estrategia</h3>
                    <p>Cada rama de lógica se convierte en su propia clase independiente</p>
                </div>

                <div class="card">
                    <h3>🏗️ Paso 1: Crear la Interfaz</h3>
                    <div class="code-block">
<span class="keyword">public interface</span> <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">decimal</span> <span class="method">ApplyDiscount</span>(<span class="keyword">decimal</span> amount);
}
                    </div>
                </div>

                <div class="card">
                    <h3>🔧 Paso 2: Implementar Estrategias Concretas</h3>
                    <div class="code-block">
<span class="keyword">public class</span> <span class="type">StandardDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">ApplyDiscount</span>(<span class="keyword">decimal</span> amount) => amount;
}

<span class="keyword">public class</span> <span class="type">PremiumDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">ApplyDiscount</span>(<span class="keyword">decimal</span> amount) => amount * <span class="number">0.9m</span>;
}

<span class="keyword">public class</span> <span class="type">VipDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">ApplyDiscount</span>(<span class="keyword">decimal</span> amount) => amount * <span class="number">0.8m</span>;
}

<span class="comment">// Añadir Corporate es simple: nueva clase, sin modificar código existente</span>
<span class="keyword">public class</span> <span class="type">CorporateDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">ApplyDiscount</span>(<span class="keyword">decimal</span> amount) => amount * <span class="number">0.75m</span>;
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 11: Implementación Completa Strategy -->
        <div class="slide">
            <div class="slide-header">
                <h2>Strategy Pattern: Implementación Completa</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Paso 3: Context con Diccionario de Estrategias</h3>
                    <div class="code-block">
<span class="keyword">public class</span> <span class="type">InvoiceCalculator</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">CustomerType</span>, <span class="type">IDiscountStrategy</span>&gt; _strategies;

    <span class="keyword">public</span> <span class="method">InvoiceCalculator</span>()
    {
        _strategies = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">CustomerType</span>, <span class="type">IDiscountStrategy</span>&gt;
        {
            { <span class="type">CustomerType</span>.Standard, <span class="keyword">new</span> <span class="type">StandardDiscountStrategy</span>() },
            { <span class="type">CustomerType</span>.Premium, <span class="keyword">new</span> <span class="type">PremiumDiscountStrategy</span>() },
            { <span class="type">CustomerType</span>.Vip, <span class="keyword">new</span> <span class="type">VipDiscountStrategy</span>() },
            { <span class="type">CustomerType</span>.Corporate, <span class="keyword">new</span> <span class="type">CorporateDiscountStrategy</span>() }
        };
    }

    <span class="keyword">public decimal</span> <span class="method">CalculateTotal</span>(<span class="keyword">decimal</span> amount, <span class="type">CustomerType</span> type)
    {
        <span class="comment">// Complejidad = 1 (después de validación)</span>
        <span class="keyword">if</span> (_strategies.TryGetValue(type, <span class="keyword">out var</span> strategy))
        {
            <span class="keyword">return</span> strategy.ApplyDiscount(amount);
        }
        <span class="keyword">throw new</span> <span class="type">NotSupportedException</span>(<span class="string">"Tipo de cliente no soportado"</span>);
    }
}
                    </div>
                </div>

                <div class="two-column">
                    <div class="before">
                        <h4>❌ Antes</h4>
                        <ul>
                            <li><strong>Complejidad:</strong> 4+ (crece con tipos)</li>
                            <li><strong>Testing:</strong> 1 test con múltiples casos</li>
                            <li><strong>Mantenibilidad:</strong> Modificar para añadir</li>
                            <li><strong>SOLID:</strong> Viola Open/Closed</li>
                        </ul>
                    </div>
                    <div class="after">
                        <h4>✅ Después</h4>
                        <ul>
                            <li><strong>Complejidad:</strong> 1 (constante)</li>
                            <li><strong>Testing:</strong> 1 test por estrategia</li>
                            <li><strong>Mantenibilidad:</strong> Solo añadir, no modificar</li>
                            <li><strong>SOLID:</strong> Cumple Open/Closed</li>
                        </ul>
                    </div>
                </div>

                <div class="exercise-box">
                    <div class="exercise-title">🏋️ Ejercicio 3: Refactorizar Generador de Reportes</div>
                    <p>Aplica el patrón Strategy al siguiente código:</p>
                    <div class="code-block">
<span class="keyword">public class</span> <span class="type">ReportGenerator</span>
{
    <span class="keyword">public byte</span>[] <span class="method">GenerateReport</span>(<span class="keyword">string</span> reportType, <span class="type">ReportData</span> data)
    {
        <span class="keyword">if</span> (reportType == <span class="string">"PDF"</span>) { <span class="comment">/* PDF logic */</span> }
        <span class="keyword">else if</span> (reportType == <span class="string">"CSV"</span>) { <span class="comment">/* CSV logic */</span> }
        <span class="keyword">else if</span> (reportType == <span class="string">"Excel"</span>) { <span class="comment">/* Excel logic */</span> }
        <span class="keyword">return null</span>;
    }
}
                    </div>
                    <p><strong>Crea:</strong> IReportStrategy, clases concretas, y usa diccionario para mapear tipos</p>
                </div>
            </div>
        </div>

        <!-- Slide 12: Herramientas Avanzadas -->
        <div class="slide">
            <div class="slide-header">
                <h2>Herramientas y Librerías para .NET Core</h2>
            </div>
            <div class="content">
                <div class="three-column">
                    <div class="tool-card">
                        <span class="tool-icon">🔍</span>
                        <h4>SonarLint</h4>
                        <p><strong>Tiempo real</strong><br>Extensión de Visual Studio</p>
                        <div class="code-block terminal">
Install-Package SonarAnalyzer.CSharp
                        </div>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">☁️</span>
                        <h4>SonarCloud</h4>
                        <p><strong>CI/CD</strong><br>Análisis en la nube</p>
                        <div class="code-block terminal">
dotnet tool install --global 
  dotnet-sonarscanner
                        </div>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">📊</span>
                        <h4>CodeMaid</h4>
                        <p><strong>Limpieza</strong><br>Organización automática</p>
                        <div class="code-block terminal">
# Extensión Visual Studio
# Cleanup + reorganización
                        </div>
                    </div>
                </div>

                <div class="two-column">
                    <div class="card">
                        <h3>🛠️ Analizadores NuGet</h3>
                        <div class="code-block">
<span class="comment"><!-- En tu .csproj --></span>
&lt;<span class="keyword">PackageReference</span> Include=<span class="string">"Microsoft.CodeAnalysis.Analyzers"</span> 
                  Version=<span class="string">"3.3.4"</span> PrivateAssets=<span class="string">"all"</span> /&gt;
&lt;<span class="keyword">PackageReference</span> Include=<span class="string">"StyleCop.Analyzers"</span> 
                  Version=<span class="string">"1.2.0-beta.435"</span> PrivateAssets=<span class="string">"all"</span> /&gt;
&lt;<span class="keyword">PackageReference</span> Include=<span class="string">"Roslynator.Analyzers"</span> 
                  Version=<span class="string">"4.2.0"</span> PrivateAssets=<span class="string">"all"</span> /&gt;
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>⚙️ EditorConfig</h3>
                        <div class="code-block">
<span class="comment"># .editorconfig</span>
root = <span class="keyword">true</span>

[*.cs]
dotnet_analyzer_diagnostic.CA1062.severity = warning
dotnet_analyzer_diagnostic.CA1303.severity = none

<span class="comment"># Complejidad ciclomática</span>
dotnet_analyzer_diagnostic.CA1502.severity = error
                        </div>
                    </div>
                </div>

                <div class="tip-box">
                    <h3>💡 Integración con Pipeline</h3>
                    <div class="code-block">
<span class="comment"># GitHub Actions / Azure DevOps</span>
- name: <span class="string">Run Code Analysis</span>
  run: |
    dotnet build --configuration Release --verbosity normal
    dotnet run --project CodeAnalysis.Tool
    
<span class="comment"># Fallar build si complejidad > 20</span>
- name: <span class="string">Quality Gate</span>
  run: sonar-scanner -Dsonar.qualitygate.wait=<span class="keyword">true</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 13: Tips de Productividad -->
        <div class="slide">
            <div class="slide-header">
                <h2>Tips de Productividad y Mejores Prácticas</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div class="card">
                        <h3>⚡ Shortcuts de Visual Studio</h3>
                        <ul>
                            <li><strong>Ctrl+R, M:</strong> Extract Method</li>
                            <li><strong>Ctrl+R, V:</strong> Extract Variable</li>
                            <li><strong>Ctrl+M, O:</strong> Colapsar todo</li>
                            <li><strong>Ctrl+K, D:</strong> Format Document</li>
                            <li><strong>Alt+Enter:</strong> Quick Actions</li>
                            <li><strong>Ctrl+T:</strong> Go to All (buscar tipos)</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🎯 Reglas de Oro</h3>
                        <ul>
                            <li><strong>Método > 20 líneas:</strong> Considera dividirlo</li>
                            <li><strong>Parámetros > 3:</strong> Usa objeto o Builder</li>
                            <li><strong>If anidados > 3:</strong> Usa Guard Clauses</li>
                            <li><strong>Switch > 5 casos:</strong> Considera Strategy</li>
                            <li><strong>Clase > 500 líneas:</strong> Viola Single Responsibility</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3>🔄 Workflow de Refactoring</h3>
                    <ol>
                        <li><strong>Identificar:</strong> Usar métricas para encontrar puntos problemáticos</li>
                        <li><strong>Asegurar:</strong> Tener tests que cubran el comportamiento actual</li>
                        <li><strong>Refactorizar:</strong> Aplicar técnicas en pasos pequeños</li>
                        <li><strong>Verificar:</strong> Ejecutar tests para asegurar funcionalidad</li>
                        <li><strong>Medir:</strong> Confirmar que la complejidad se redujo</li>
                    </ol>
                </div>

                <div class="three-column">
                    <div class="tool-card">
                        <span class="tool-icon">🚨</span>
                        <h4>Code Smells</h4>
                        <ul>
                            <li>Long Method</li>
                            <li>God Class</li>
                            <li>Duplicate Code</li>
                            <li>Feature Envy</li>
                        </ul>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">🔧</span>
                        <h4>Refactorings</h4>
                        <ul>
                            <li>Extract Method</li>
                            <li>Move Method</li>
                            <li>Replace Conditional</li>
                            <li>Introduce Parameter</li>
                        </ul>
                    </div>
                    
                    <div class="tool-card">
                        <span class="tool-icon">📐</span>
                        <h4>Patrones</h4>
                        <ul>
                            <li>Strategy</li>
                            <li>Factory</li>
                            <li>Command</li>
                            <li>Template Method</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 14: Casos de Uso Empresariales -->
        <div class="slide">
            <div class="slide-header">
                <h2>Casos de Uso Empresariales</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🏦 Sistema Bancario: Validación de Transacciones</h3>
                    <div class="comparison-grid">
                        <div class="before">
                            <h4>❌ Antes: Complejidad 15+</h4>
                            <div class="code-block">
<span class="keyword">public bool</span> <span class="method">ValidateTransaction</span>(<span class="type">Transaction</span> tx)
{
    <span class="keyword">if</span> (tx != <span class="keyword">null</span>)
    {
        <span class="keyword">if</span> (tx.Amount > <span class="number">0</span>)
        {
            <span class="keyword">if</span> (tx.Account.IsActive)
            {
                <span class="keyword">if</span> (tx.Amount <= tx.Account.Balance)
                {
                    <span class="keyword">if</span> (tx.Type == <span class="type">TransactionType</span>.Transfer)
                    {
                        <span class="keyword">if</span> (tx.DestinationAccount != <span class="keyword">null</span>)
                        {
                            <span class="comment">// Más validaciones...</span>
                        }
                    }
                }
            }
        }
    }
    <span class="keyword">return</span> <span class="keyword">false</span>;
}
                            </div>
                        </div>
                        
                        <div class="after">
                            <h4>✅ Después: Complejidad 3</h4>
                            <div class="code-block">
<span class="keyword">public bool</span> <span class="method">ValidateTransaction</span>(<span class="type">Transaction</span> tx)
{
    <span class="keyword">if</span> (!<span class="method">IsValidBasicTransaction</span>(tx))
        <span class="keyword">return</span> <span class="keyword">false</span>;

    <span class="keyword">var</span> validator = _validatorFactory
        .GetValidator(tx.Type);
    
    <span class="keyword">return</span> validator.Validate(tx);
}

<span class="keyword">private bool</span> <span class="method">IsValidBasicTransaction</span>(<span class="type">Transaction</span> tx)
{
    <span class="keyword">return</span> tx != <span class="keyword">null</span> 
        && tx.Amount > <span class="number">0</span>
        && tx.Account.IsActive
        && tx.Amount <= tx.Account.Balance;
}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>🛒 E-Commerce: Calculadora de Precios</h3>
                    <div class="code-block">
<span class="comment">// Patrón Chain of Responsibility para descuentos</span>
<span class="keyword">public class</span> <span class="type">PriceCalculationEngine</span>
{
    <span class="keyword">private readonly</span> <span class="type">List</span>&lt;<span class="type">IPriceModifier</span>&gt; _modifiers;

    <span class="keyword">public decimal</span> <span class="method">CalculatePrice</span>(<span class="type">Product</span> product, <span class="type">Customer</span> customer)
    {
        <span class="keyword">var</span> context = <span class="keyword">new</span> <span class="type">PriceContext</span>(product, customer);
        
        <span class="keyword">foreach</span> (<span class="keyword">var</span> modifier <span class="keyword">in</span> _modifiers)
        {
            context = modifier.Modify(context);
        }
        
        <span class="keyword">return</span> context.FinalPrice;
    }
}

<span class="comment">// Cada regla de negocio es una clase independiente</span>
<span class="keyword">public class</span> <span class="type">VipDiscountModifier</span> : <span class="type">IPriceModifier</span>
<span class="keyword">public class</span> <span class="type">SeasonalDiscountModifier</span> : <span class="type">IPriceModifier</span>
<span class="keyword">public class</span> <span class="type">VolumeDiscountModifier</span> : <span class="type">IPriceModifier</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 15: Anexo de Siglas -->
        <div class="slide">
            <div class="slide-header">
                <h2>📚 Anexo: Siglas y Términos del Mercado</h2>
            </div>
            <div class="content">
                <div class="acronym-grid">
                    <div class="acronym-item">
                        <div class="acronym-term">SAST</div>
                        <div class="acronym-definition">Static Application Security Testing - Análisis de seguridad estático</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">DAST</div>
                        <div class="acronym-definition">Dynamic Application Security Testing - Análisis de seguridad dinámico</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">IAST</div>
                        <div class="acronym-definition">Interactive Application Security Testing - Análisis híbrido</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">CC</div>
                        <div class="acronym-definition">Cyclomatic Complexity - Complejidad Ciclomática</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">LOC</div>
                        <div class="acronym-definition">Lines of Code - Líneas de Código</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">MI</div>
                        <div class="acronym-definition">Maintainability Index - Índice de Mantenibilidad</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">DIT</div>
                        <div class="acronym-definition">Depth of Inheritance Tree - Profundidad de Herencia</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">CBO</div>
                        <div class="acronym-definition">Coupling Between Objects - Acoplamiento entre Objetos</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">LCOM</div>
                        <div class="acronym-definition">Lack of Cohesion of Methods - Falta de Cohesión de Métodos</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">PMD</div>
                        <div class="acronym-definition">Programming Mistake Detector - Detector de Errores de Programación</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">SCA</div>
                        <div class="acronym-definition">Software Composition Analysis - Análisis de Composición de Software</div>
                    </div>
                    <div class="acronym-item">
                        <div class="acronym-term">AST</div>
                        <div class="acronym-definition">Abstract Syntax Tree - Árbol de Sintaxis Abstracta</div>
                    </div>
                </div>

                <div class="tip-box">
                    <h3>🎯 Términos Clave para Entrevistas</h3>
                    <ul>
                        <li><strong>Code Smell:</strong> Síntomas de problemas de diseño más profundos</li>
                        <li><strong>Technical Debt:</strong> Costo de refactorización acumulado</li>
                        <li><strong>Cognitive Complexity:</strong> Métrica que considera la dificultad mental</li>
                        <li><strong>Halstead Metrics:</strong> Medidas de complejidad basadas en operadores/operandos</li>
                        <li><strong>Quality Gates:</strong> Criterios que debe cumplir el código para pasar</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 16: Herramientas del Ecosistema -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ecosistema de Herramientas de Calidad</h2>
            </div>
            <div class="content">
                <div class="three-column">
                    <div class="card">
                        <h3>🔍 Análisis Estático</h3>
                        <ul>
                            <li><strong>SonarQube/Cloud:</strong> Plataforma enterprise</li>
                            <li><strong>CodeClimate:</strong> Análisis en la nube</li>
                            <li><strong>PVS-Studio:</strong> Análisis profundo para C#</li>
                            <li><strong>ReSharper:</strong> JetBrains suite</li>
                            <li><strong>FxCop Analyzers:</strong> Microsoft oficial</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>📊 Métricas y Reportes</h3>
                        <ul>
                            <li><strong>NDepend:</strong> Análisis arquitectural</li>
                            <li><strong>Metrics.NET:</strong> Librería de métricas</li>
                            <li><strong>dotCover:</strong> Code coverage</li>
                            <li><strong>OpenCover:</strong> Coverage open source</li>
                            <li><strong>ReportGenerator:</strong> Reportes visuales</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>⚙️ Integración CI/CD</h3>
                        <ul>
                            <li><strong>GitHub Actions:</strong> Workflows automáticos</li>
                            <li><strong>Azure DevOps:</strong> Pipelines integrados</li>
                            <li><strong>TeamCity:</strong> Servidor de builds</li>
                            <li><strong>Jenkins:</strong> Automatización open source</li>
                            <li><strong>GitLab CI:</strong> DevOps integrado</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3>🔧 Configuración Avanzada</h3>
                    <div class="code-block">
<span class="comment"><!-- Directory.Build.props para aplicar a toda la solución --></span>
&lt;<span class="keyword">Project</span>&gt;
  &lt;<span class="keyword">PropertyGroup</span>&gt;
    &lt;<span class="keyword">TreatWarningsAsErrors</span>&gt;<span class="keyword">true</span>&lt;/<span class="keyword">TreatWarningsAsErrors</span>&gt;
    &lt;<span class="keyword">CodeAnalysisRuleSet</span>&gt;ruleset.ruleset&lt;/<span class="keyword">CodeAnalysisRuleSet</span>&gt;
    &lt;<span class="keyword">RunAnalyzersDuringLiveAnalysis</span>&gt;<span class="keyword">true</span>&lt;/<span class="keyword">RunAnalyzersDuringLiveAnalysis</span>&gt;
  &lt;/<span class="keyword">PropertyGroup</span>&gt;

  &lt;<span class="keyword">ItemGroup</span>&gt;
    &lt;<span class="keyword">PackageReference</span> Include=<span class="string">"SonarAnalyzer.CSharp"</span> Version=<span class="string">"8.40.0.48530"</span>&gt;
      &lt;<span class="keyword">PrivateAssets</span>&gt;all&lt;/<span class="keyword">PrivateAssets</span>&gt;
      &lt;<span class="keyword">IncludeAssets</span>&gt;runtime; build; native; contentfiles; analyzers&lt;/<span class="keyword">IncludeAssets</span>&gt;
    &lt;/<span class="keyword">PackageReference</span>&gt;
  &lt;/<span class="keyword">ItemGroup</span>&gt;
&lt;/<span class="keyword">Project</span>&gt;
                    </div>
                </div>

                <div class="warning-box">
                    <h3>⚠️ Consideraciones de Performance</h3>
                    <p>El análisis estático puede ralentizar el build. Para proyectos grandes:</p>
                    <ul>
                        <li>Ejecuta análisis completo solo en CI/CD</li>
                        <li>Usa análisis incremental en desarrollo</li>
                        <li>Configura exclusiones para archivos generados</li>
                        <li>Considera análisis paralelo para equipos grandes</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 17: Checklist del Desarrollador -->
        <div class="slide">
            <div class="slide-header">
                <h2>✅ Checklist del Desarrollador</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div class="card">
                        <h3>🔍 Antes de Hacer Commit</h3>
                        <ul>
                            <li>✅ ¿SonarLint muestra 0 issues nuevos?</li>
                            <li>✅ ¿Complejidad de métodos nuevos < 10?</li>
                            <li>✅ ¿Métodos tienen una sola responsabilidad?</li>
                            <li>✅ ¿Nombres de variables/métodos son descriptivos?</li>
                            <li>✅ ¿Eliminé código comentado/dead code?</li>
                            <li>✅ ¿Tests pasan y cubren código nuevo?</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🚀 Durante Code Review</h3>
                        <ul>
                            <li>✅ ¿El código cuenta una historia clara?</li>
                            <li>✅ ¿Puedo entenderlo sin contexto adicional?</li>
                            <li>✅ ¿Hay patterns que se repiten (DRY)?</li>
                            <li>✅ ¿Manejo de errores es consistente?</li>
                            <li>✅ ¿Performance es aceptable?</li>
                            <li>✅ ¿Cumple estándares del equipo?</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3>🎯 Refactoring Workflow</h3>
                    <div class="three-column">
                        <div>
                            <h4>🔍 Detectar</h4>
                            <ul>
                                <li>Ejecutar métricas de código</li>
                                <li>Revisar hotspots de complejidad</li>
                                <li>Identificar code smells</li>
                                <li>Priorizar por impacto</li>
                            </ul>
                        </div>
                        <div>
                            <h4>🔧 Refactorizar</h4>
                            <ul>
                                <li>Asegurar cobertura de tests</li>
                                <li>Aplicar técnicas graduales</li>
                                <li>Usar IDE automático cuando sea posible</li>
                                <li>Verificar funcionalidad constantemente</li>
                            </ul>
                        </div>
                        <div>
                            <h4>📊 Validar</h4>
                            <ul>
                                <li>Ejecutar suite completa de tests</li>
                                <li>Medir métricas post-refactoring</li>
                                <li>Confirmar mejora de complejidad</li>
                                <li>Documentar cambios significativos</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="highlight-box">
                    <h3>🏆 El Mantra del Clean Coder</h3>
                    <p><em>"El código se escribe una vez, pero se lee cientos de veces. Optimiza para la legibilidad, no para demostrar lo inteligente que eres."</em></p>
                </div>

                <div class="tip-box">
                    <h3>💡 Tips para Equipos</h3>
                    <ul>
                        <li><strong>Definition of Done:</strong> Incluye criterios de calidad de código</li>
                        <li><strong>Mob Programming:</strong> Sesiones de refactoring en equipo</li>
                        <li><strong>Tech Debt Sprints:</strong> Dedicar tiempo específico a mejoras</li>
                        <li><strong>Knowledge Sharing:</strong> Compartir patrones y anti-patterns encontrados</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 18: Conclusión -->
        <div class="slide">
            <div class="slide-header">
                <h2>🎯 Conclusiones y Próximos Pasos</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🏆 Lo que Hemos Dominado</h3>
                    <ul>
                        <li>✅ <strong>SonarLint:</strong> Análisis en tiempo real para detectar problemas temprano</li>
                        <li>✅ <strong>Complejidad Ciclomática:</strong> Métrica clave para medir mantenibilidad</li>
                        <li>✅ <strong>Guard Clauses:</strong> Reducir anidamiento y mejorar legibilidad</li>
                        <li>✅ <strong>Extract Method:</strong> Dividir métodos complejos en funciones especializadas</li>
                        <li>✅ <strong>Strategy Pattern:</strong> Eliminar complejidad condicional con polimorfismo</li>
                    </ul>
                </div>

                <div class="two-column">
                    <div class="card">
                        <h3>📚 Para Profundizar</h3>
                        <ul>
                            <li><strong>Libros:</strong>
                                <ul>
                                    <li>"Clean Code" - Robert Martin</li>
                                    <li>"Refactoring" - Martin Fowler</li>
                                    <li>"Code Complete" - Steve McConnell</li>
                                </ul>
                            </li>
                            <li><strong>Herramientas Avanzadas:</strong>
                                <ul>
                                    <li>NDepend para análisis arquitectural</li>
                                    <li>ReSharper para refactoring avanzado</li>
                                    <li>SonarQube Enterprise para equipos</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h3>🎯 Tu Camino al Siguiente Nivel</h3>
                        <ul>
                            <li>🔬 <strong>Practica diariamente:</strong> Refactoriza 15 min/día</li>
                            <li>📊 <strong>Mide todo:</strong> Establece métricas de calidad en tu equipo</li>
                            <li>🤖 <strong>Automatiza:</strong> Integra análisis en tu pipeline</li>
                            <li>👥 <strong>Enseña:</strong> Comparte conocimientos con tu equipo</li>
                            <li>🌟 <strong>Innova:</strong> Crea tus propios analizadores custom</li>
                        </ul>
                    </div>
                </div>

                <div class="success-box">
                    <h3>🚀 Mensaje Final</h3>
                    <p>El análisis estático y la reducción de complejidad no son solo herramientas técnicas, son habilidades de <strong>comunicación</strong>. 
                    Un código de baja complejidad comunica intenciones claras, facilita la colaboración y reduce el tiempo de onboarding de nuevos desarrolladores.</p>
                </div>

                <div class="highlight-box">
                    <h3>💼 Impacto en tu Carrera</h3>
                    <p>Estos conocimientos te posicionan como un desarrollador que:</p>
                    <ul>
                        <li>🎯 <strong>Previene problemas</strong> antes de que lleguen a producción</li>
                        <li>💰 <strong>Reduce costos</strong> de mantenimiento y debugging</li>
                        <li>⚡ <strong>Accelera entregas</strong> con código más mantenible</li>
                        <li>🏗️ <strong>Construye sistemas</strong> que escalan sin deuda técnica</li>
                        <li>👥 <strong>Lidera equipos</strong> estableciendo estándares de calidad</li>
                    </ul>
                </div>

                <div class="metric-card">
                    <div class="metric-number">∞</div>
                    <h4>El Código Limpio es un Journey, no un Destination</h4>
                    <p>Cada línea de código es una oportunidad de mejorar</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Instructor Info -->
    <div class="instructor-info">
        <div class="instructor-name">Alejandro Sfrede</div>
        <div class="instructor-title">Área de Arquitectura</div>
    </div>

    <!-- Navigation -->
    <div class="navigation">
        <button class="nav-btn" onclick="previousSlide()" id="prevBtn">
            <span>←</span> Anterior
        </button>
        <button class="nav-btn" onclick="nextSlide()" id="nextBtn">
            Siguiente <span>→</span>
        </button>
        <button class="nav-btn" onclick="goHome()" style="background: rgba(102, 126, 234, 0.3);">
            🏠 Portal
        </button>
    </div>

    <!-- Navigation Hints -->
    <div class="nav-hints" id="navHints">
        Use ← → o Space para navegar
    </div>

    <!-- Slide Counter -->
    <div class="slide-counter">
        <span id="currentSlide">1</span> / <span id="totalSlides">18</span>
    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        document.getElementById('totalSlides').textContent = totalSlides;

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            document.getElementById('currentSlide').textContent = index + 1;
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === totalSlides - 1;
            
            // Show navigation hints briefly
            showNavHints();
        }

        function showNavHints() {
            const hints = document.getElementById('navHints');
            hints.classList.add('show');
            setTimeout(() => {
                hints.classList.remove('show');
            }, 2000);
        }

        function goHome() {
            window.location.href = '../index.html';
        }

        function nextSlide() {
            if (currentSlideIndex < totalSlides - 1) {
                currentSlideIndex++;
                showSlide(currentSlideIndex);
            }
        }

        function previousSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                showSlide(currentSlideIndex);
            }
        }

        // Enhanced keyboard navigation (PowerPoint-style)
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowRight':
                case ' ':
                case 'PageDown':
                case 'Enter':
                    e.preventDefault();
                    nextSlide();
                    break;
                case 'ArrowLeft':
                case 'PageUp':
                case 'Backspace':
                    e.preventDefault();
                    previousSlide();
                    break;
                case 'Home':
                    e.preventDefault();
                    currentSlideIndex = 0;
                    showSlide(currentSlideIndex);
                    break;
                case 'End':
                    e.preventDefault();
                    currentSlideIndex = totalSlides - 1;
                    showSlide(currentSlideIndex);
                    break;
                case 'Escape':
                    e.preventDefault();
                    goHome();
                    break;
            }
        });

        // Touch navigation for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextSlide(); // Swipe left - next slide
                } else {
                    previousSlide(); // Swipe right - previous slide
                }
            }
        }

        // Initialize
        showSlide(0);

        // Functionality for copying code blocks
        document.addEventListener('DOMContentLoaded', function() {
            const copyButtons = document.querySelectorAll('.copy-button');
            
            copyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const codeBlock = this.closest('.code-block');
                    const code = codeBlock.textContent.trim();
                    
                    // Create a temporary textarea to copy the text
                    const textarea = document.createElement('textarea');
                    textarea.value = code;
                    textarea.setAttribute('readonly', '');
                    textarea.style.position = 'absolute';
                    textarea.style.left = '-9999px';
                    document.body.appendChild(textarea);
                    
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    
                    // Change button text to show success
                    const originalText = this.textContent;
                    this.textContent = '¡Copiado!';
                    
                    // Revert button text after 2 seconds
                    setTimeout(() => {
                        this.textContent = originalText;
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>