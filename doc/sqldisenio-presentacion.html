<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diseño de Bases de Datos Dirigido por Metadatos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 60px;
            position: relative;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-header {
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.8em;
            color: #764ba2;
            margin: 30px 0 20px;
            font-weight: 500;
        }

        .subtitle {
            font-size: 1.5em;
            color: #a8a8b3;
            font-weight: 300;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .list {
            list-style: none;
            padding: 0;
        }

        .list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: flex-start;
        }

        .list li:last-child {
            border-bottom: none;
        }

        .list li::before {
            content: '▸';
            color: #667eea;
            font-size: 1.5em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .code-block {
            background: #1e1e2e;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 25px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.6;
            position: relative;
        }

        .code-block.bad {
            border-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.05);
        }

        .code-block.good {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }

        .code-label {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .code-label.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .code-label.good {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .keyword {
            color: #667eea;
            font-weight: bold;
        }

        .string {
            color: #98c379;
        }

        .comment {
            color: #7c8a9c;
            font-style: italic;
        }

        .type {
            color: #e06c75;
        }

        .method {
            color: #61afef;
        }

        /* Enhanced Navigation */
        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Instructor Info Styling */
        .instructor-info {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 25px;
            color: #a8a8b3;
            font-size: 0.9rem;
            z-index: 1000;
            text-align: right;
        }

        .instructor-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .instructor-area {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Slide counter */
        .slide-counter {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 25px;
            color: #a8a8b3;
            font-size: 0.9rem;
            z-index: 1000;
        }

        .slide-number {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 1.2em;
            color: #a8a8b3;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            z-index: 1001;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
        }

        .icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .architecture-diagram {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.3);
            margin: 20px 0;
        }

        .model-comparison {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 20px 0;
        }

        .model-box {
            flex: 1;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .static-model {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
        }

        .dynamic-model {
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid rgba(34, 197, 94, 0.3);
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .danger-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .flow-step {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
        }

        .flow-step::before {
            content: attr(data-step);
            position: absolute;
            top: -10px;
            left: 15px;
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        .json-example {
            background: #1a1a2e;
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            margin: 15px 0;
        }

        .meta-layer {
            background: linear-gradient(135deg, rgba(118, 75, 162, 0.2), rgba(102, 126, 234, 0.2));
            border: 2px solid rgba(118, 75, 162, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .slide {
                padding: 30px;
            }
            h1 {
                font-size: 2.5em;
            }
            h2 {
                font-size: 2em;
            }
            .two-column {
                grid-template-columns: 1fr;
            }
            .code-block {
                font-size: 0.8em;
            }
            .model-comparison {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <div class="progress-bar" id="progressBar"></div>
        
        <!-- Slide 1: Título -->
        <div class="slide active">
            <div class="slide-header">
                <h1>Diseño de BD</h1>
                <p class="subtitle">Dirigido por Metadatos</p>
            </div>
            <div class="content" style="justify-content: center; align-items: center;">
                <div class="card" style="text-align: center; max-width: 800px;">
                    <div class="icon">🏗️</div>
                    <h3>Arquitectura para Sistemas Flexibles y Evolutivos</h3>
                    <p style="font-size: 1.2em; color: #a8a8b3; margin-top: 20px;">
                        De la Rigidez a la Fluidez • EAV • JSON • Meta-Modelo
                    </p>
                </div>
            </div>
            <div class="slide-number">1 / 18</div>
        </div>

        <!-- Slide 2: De la Rigidez a la Fluidez -->
        <div class="slide">
            <div class="slide-header">
                <h2>De la Rigidez a la Fluidez</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🏛️ El Problema del Diseño Tradicional</h3>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">
                        El diseño de bases de datos tradicional es como construir con <strong>mármol</strong>: 
                        sólido, robusto, pero increíblemente difícil y costoso de modificar.
                    </p>
                </div>

                <div class="model-comparison">
                    <div class="model-box static-model">
                        <h3>⚡ Realidad Actual</h3>
                        <p style="margin: 15px 0;">Cada nuevo campo en un formulario de cliente requiere:</p>
                        <ul style="text-align: left; margin-left: 20px;">
                            <li>ALTER TABLE</li>
                            <li>Código de aplicación</li>
                            <li>Despliegue completo</li>
                            <li>Posible migración de datos</li>
                        </ul>
                    </div>
                    <div class="model-box dynamic-model">
                        <h3>🧩 Visión del Curso</h3>
                        <p style="margin: 15px 0;">Diseñar como un sistema de <strong>Lego de alta ingeniería</strong>:</p>
                        <ul style="text-align: left; margin-left: 20px;">
                            <li>Bloques reutilizables (metadatos)</li>
                            <li>Estructuras dinámicas</li>
                            <li>Sin tocar el esquema base</li>
                            <li>Adaptación en tiempo real</li>
                        </ul>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>🎯 Este es el secreto</strong> de los sistemas que deben adaptarse rápidamente a las necesidades cambiantes del negocio: 
                    SaaS, plataformas low-code, CMS empresariales.</p>
                </div>
            </div>
            <div class="slide-number">2 / 18</div>
        </div>

        <!-- Slide 3: Clase 1 - El Manifiesto -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 1: El Manifiesto del Diseño por Metadatos</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Objetivos</h3>
                    <ul class="list">
                        <li>Cuestionar el dogma de la normalización total</li>
                        <li>Entender el concepto de "el esquema como dato"</li>
                        <li>Identificar casos de uso ideales para esta arquitectura</li>
                    </ul>
                </div>

                <h3>¿Y si la tabla no necesitara un ALTER?</h3>
                <div class="two-column">
                    <div>
                        <div class="card">
                            <h4>🏛️ Modelo Estático (Tradicional)</h4>
                            <div class="flow-step" data-step="1">
                                <strong>Estructura:</strong> Esquema rígido definido en tiempo de diseño
                                <div class="code-block" style="margin-top: 10px; font-size: 0.8em;">
<span class="keyword">CREATE TABLE</span> Customers (
    ID <span class="type">INT</span>,
    Name <span class="type">VARCHAR</span>(100),
    Email <span class="type">VARCHAR</span>(100)
);
                                </div>
                            </div>
                            
                            <div class="flow-step" data-step="2">
                                <strong>Evolución:</strong> Agregar <code>DateOfBirth</code> requiere:
                                <ul style="margin-left: 20px; margin-top: 10px; font-size: 0.9em;">
                                    <li>ALTER TABLE</li>
                                    <li>Código de aplicación nuevo</li>
                                    <li>Despliegue coordinado</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h4>🧬 Modelo Dinámico (Metadatos)</h4>
                            <div class="flow-step" data-step="1">
                                <strong>Estructura:</strong> Meta-esquema que describe entidades
                                <div class="json-example">
{
  "entityType": "Customer",
  "fields": [
    {"name": "email", "type": "text"},
    {"name": "dateOfBirth", "type": "date"}
  ]
}
                                </div>
                            </div>
                            
                            <div class="flow-step" data-step="2">
                                <strong>Evolución:</strong> Agregar <code>DateOfBirth</code>:
                                <div class="code-block good" style="margin-top: 10px; font-size: 0.8em;">
<span class="keyword">INSERT INTO</span> MetaAttributes 
<span class="keyword">VALUES</span> (<span class="string">'dateOfBirth'</span>, <span class="string">'date'</span>, <span class="string">'Customer'</span>);
<span class="comment">-- ¡La aplicación se adapta automáticamente!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>💡 Ideal para:</strong> Plataformas low-code, CMS, SaaS multi-tenant, formularios dinámicos, 
                    sistemas que generan sistemas.</p>
                </div>
            </div>
            <div class="slide-number">3 / 18</div>
        </div>

        <!-- Slide 4: Casos de Uso -->
        <div class="slide">
            <div class="slide-header">
                <h2>Casos de Uso Ideales</h2>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>🔧 Sistemas Generadores</h3>
                        <div class="icon">⚙️</div>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Plataformas Low-Code:</strong> OutSystems, Mendix</li>
                            <li><strong>Form Builders:</strong> Google Forms, Typeform</li>
                            <li><strong>Survey Platforms:</strong> SurveyMonkey</li>
                            <li><strong>Custom Field Systems:</strong> Salesforce</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>🏢 SaaS Multi-Tenant</h3>
                        <div class="icon">🏤</div>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Cada cliente:</strong> Campos personalizados</li>
                            <li><strong>Configuraciones únicas:</strong> Por industria</li>
                            <li><strong>Compliance variable:</strong> Regulaciones locales</li>
                            <li><strong>Escalabilidad:</strong> Sin rediseño por cliente</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>📋 CMS Empresariales</h3>
                        <div class="icon">📄</div>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Content Types dinámicos:</strong> Artículos, productos</li>
                            <li><strong>Campos editoriales:</strong> SEO, metadata</li>
                            <li><strong>Workflows custom:</strong> Aprobaciones</li>
                            <li><strong>Multi-idioma:</strong> Campos localizados</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>⚕️ Sistemas Clínicos</h3>
                        <div class="icon">🏥</div>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Estudios clínicos:</strong> Campos variables</li>
                            <li><strong>Especialidades médicas:</strong> Datos únicos</li>
                            <li><strong>Regulatory compliance:</strong> FDA, EMA</li>
                            <li><strong>Formularios de investigación:</strong> Ad-hoc</li>
                        </ul>
                    </div>
                </div>

                <div class="warning-box">
                    <h4>⚠️ Cuándo NO Usar Este Enfoque</h4>
                    <ul style="margin-left: 20px; margin-top: 15px;">
                        <li><strong>Datos financieros críticos:</strong> Contabilidad, banking core</li>
                        <li><strong>Transacciones de alta frecuencia:</strong> Trading, pagos en tiempo real</li>
                        <li><strong>Sistemas con esquema muy estable:</strong> ERP tradicional</li>
                        <li><strong>Reportes complejos predefinidos:</strong> BI con joins complejos</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">4 / 18</div>
        </div>

        <!-- Slide 5: Ejercicio Conceptual -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio Conceptual</h2>
                <p class="subtitle">Sistema de Gestión de Pacientes</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🏥 Escenario: Clínica Médica</h3>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">
                        Necesitas diseñar un sistema para una clínica que maneja pacientes regulares 
                        y también participa en estudios clínicos variables.
                    </p>
                </div>

                <div class="two-column">
                    <div>
                        <div class="card">
                            <h3>🏛️ Modelo Estático</h3>
                            <p style="margin-bottom: 15px;"><strong>Campos Siempre Presentes:</strong></p>
                            <ul class="list" style="font-size: 0.9em;">
                                <li>ID_Paciente (PK)</li>
                                <li>NombreCompleto</li>
                                <li>FechaNacimiento</li>
                                <li>NumeroSeguroSocial</li>
                                <li>Genero</li>
                                <li>TelefonoEmergencia</li>
                                <li>FechaRegistro</li>
                                <li>EstadoPaciente (Activo/Inactivo)</li>
                            </ul>
                        </div>

                        <div class="highlight">
                            <p><strong>💡 Criterio:</strong> Datos requeridos por ley, esenciales para operación básica, 
                            usados en >90% de los casos.</p>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h3>🧬 Modelo Dinámico</h3>
                            <p style="margin-bottom: 15px;"><strong>Campos Variables:</strong></p>
                            <ul class="list" style="font-size: 0.9em;">
                                <li>Estudio clínico específico</li>
                                <li>Medicamentos en investigación</li>
                                <li>Escalas de dolor personalizadas</li>
                                <li>Biomarkers por especialidad</li>
                                <li>Cuestionarios de calidad de vida</li>
                                <li>Datos de dispositivos IoT</li>
                                <li>Consentimientos por estudio</li>
                            </ul>
                        </div>

                        <div class="json-example">
{
  "estudioAlzheimer": {
    "nivelCognitivoMMSE": 24,
    "medicamentoExperimental": "ALZ-2024",
    "dosisActual": "10mg",
    "fechaInicioTratamiento": "2024-01-15"
  }
}
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>🎯 Pregunta para Discusión</h3>
                    <p style="font-size: 1.1em; margin-bottom: 15px;">
                        <strong>¿Cómo diseñarías el sistema para que:</strong>
                    </p>
                    <ul style="margin-left: 20px; font-size: 1em;">
                        <li>1. Un doctor pueda añadir campos específicos para un nuevo estudio clínico</li>
                        <li>2. Los cambios sean inmediatos sin despliegue de código</li>
                        <li>3. Se mantenga la integridad de los datos críticos</li>
                        <li>4. Las búsquedas por campos básicos sigan siendo rápidas</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">5 / 18</div>
        </div>

        <!-- Slide 6: Clase 2 - EAV Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 2: El Patrón EAV</h2>
                <p class="subtitle">El "Vale Todo" de los Datos</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Objetivos</h3>
                    <ul class="list">
                        <li>Aprender a implementar Entity-Attribute-Value (EAV)</li>
                        <li>Entender sus profundos problemas de rendimiento</li>
                        <li>Saber por qué debemos conocerlo pero raramente usarlo</li>
                    </ul>
                </div>

                <div class="architecture-diagram">
                    <h3 style="text-align: center;">Arquitectura EAV</h3>
                    <div style="display: flex; justify-content: space-between; margin: 20px 0;">
                        <div style="text-align: center; flex: 1;">
                            <div style="background: rgba(102, 126, 234, 0.2); padding: 15px; border-radius: 8px;">
                                <strong>Entities</strong><br>
                                <small>Las "cosas" que almacenamos</small>
                            </div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="background: rgba(245, 158, 11, 0.2); padding: 15px; border-radius: 8px;">
                                <strong>Attributes</strong><br>
                                <small>Posibles campos/propiedades</small>
                            </div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="background: rgba(239, 68, 68, 0.2); padding: 15px; border-radius: 8px;">
                                <strong>Values</strong><br>
                                <small>¡La tabla gigante!</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-block">
<span class="comment">-- Estructura básica EAV</span>
<span class="keyword">CREATE TABLE</span> Entities (
    EntityID <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    EntityType <span class="type">VARCHAR</span>(50)
);

<span class="keyword">CREATE TABLE</span> Attributes (
    AttributeID <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    AttributeName <span class="type">VARCHAR</span>(100),
    DataType <span class="type">VARCHAR</span>(50)
);

<span class="keyword">CREATE TABLE</span> AttributeValues (
    ValueID <span class="type">BIGINT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    EntityID <span class="type">INT</span> <span class="keyword">FOREIGN KEY</span> <span class="keyword">REFERENCES</span> Entities(EntityID),
    AttributeID <span class="type">INT</span> <span class="keyword">FOREIGN KEY</span> <span class="keyword">REFERENCES</span> Attributes(AttributeID),
    Value <span class="type">NVARCHAR</span>(<span class="keyword">MAX</span>) <span class="comment">-- ¡El problema principal! Todo es texto</span>
);
                </div>

                <div class="danger-box">
                    <h4>🚨 El Problema Fundamental</h4>
                    <p>Para reconstruir un solo "cliente" con 10 campos, ¡necesitas 10 JOINs o una consulta pivotante muy compleja! 
                    Es una receta para el desastre de rendimiento.</p>
                </div>
            </div>
            <div class="slide-number">6 / 18</div>
        </div>

        <!-- Slide 7: EAV en Acción -->
        <div class="slide">
            <div class="slide-header">
                <h2>EAV en Acción: El Dolor Práctico</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>Poblar los Datos</h3>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="comment">-- Cliente "Juan Pérez"</span>
<span class="keyword">INSERT INTO</span> Entities (EntityType) 
<span class="keyword">VALUES</span> (<span class="string">'Cliente'</span>); <span class="comment">-- EntityID = 101</span>

<span class="keyword">INSERT INTO</span> Attributes (AttributeName, DataType) 
<span class="keyword">VALUES</span> 
(<span class="string">'Nombre'</span>, <span class="string">'string'</span>), <span class="comment">-- AttrID = 1</span>
(<span class="string">'Email'</span>, <span class="string">'string'</span>);  <span class="comment">-- AttrID = 2</span>

<span class="keyword">INSERT INTO</span> AttributeValues 
(EntityID, AttributeID, Value) 
<span class="keyword">VALUES</span> 
(101, 1, <span class="string">'Juan Pérez'</span>),
(101, 2, <span class="string">'juan@test.com'</span>);
                        </div>
                    </div>
                    <div>
                        <h3>Recuperar el Cliente</h3>
                        <div class="code-block bad" style="font-size: 0.8em;">
                            <span class="code-label bad">COMPLEJO</span>
<span class="comment">-- Consulta horrible para UN cliente</span>
<span class="keyword">SELECT</span>
    <span class="keyword">MAX</span>(<span class="keyword">CASE WHEN</span> A.AttributeName = <span class="string">'Nombre'</span> 
        <span class="keyword">THEN</span> V.Value <span class="keyword">END</span>) <span class="keyword">AS</span> Nombre,
    <span class="keyword">MAX</span>(<span class="keyword">CASE WHEN</span> A.AttributeName = <span class="string">'Email'</span> 
        <span class="keyword">THEN</span> V.Value <span class="keyword">END</span>) <span class="keyword">AS</span> Email
<span class="keyword">FROM</span> Entities E
<span class="keyword">JOIN</span> AttributeValues V <span class="keyword">ON</span> E.EntityID = V.EntityID
<span class="keyword">JOIN</span> Attributes A <span class="keyword">ON</span> V.AttributeID = A.AttributeID
<span class="keyword">WHERE</span> E.EntityID = 101
<span class="keyword">GROUP BY</span> E.EntityID;
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 30px;">
                    <div class="danger-box">
                        <h4>💀 Problemas Críticos</h4>
                        <ul style="margin-left: 20px; margin-top: 15px;">
                            <li><strong>Performance:</strong> N JOINs por cada campo</li>
                            <li><strong>Type Safety:</strong> Todo es VARCHAR(MAX)</li>
                            <li><strong>Integridad:</strong> No foreign keys a valores</li>
                            <li><strong>Indexing:</strong> Imposible indexar efectivamente</li>
                            <li><strong>Complexity:</strong> Consultas CASE WHEN gigantes</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>📊 Impacto Real</h4>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>10 campos → 10 JOINs:</strong> Consulta x50 más lenta</li>
                            <li><strong>Sin índices útiles:</strong> Full table scans</li>
                            <li><strong>Validación en app:</strong> No en base de datos</li>
                            <li><strong>Reportes imposibles:</strong> O extremadamente lentos</li>
                        </ul>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>💡 Conclusión:</strong> EAV es conceptualmente simple pero impráctico para sistemas modernos. 
                    Lo estudiamos para entender el problema que los enfoques híbridos resuelven elegantemente.</p>
                </div>
            </div>
            <div class="slide-number">7 / 18</div>
        </div>

        <!-- Slide 8: Clase 3 - Modelo Híbrido JSON -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 3: El Enfoque Moderno</h2>
                <p class="subtitle">Modelo Híbrido con JSON</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Objetivos</h3>
                    <ul class="list">
                        <li>Implementar modelo híbrido: normalización + flexibilidad</li>
                        <li>Utilizar columnas JSON como "contenedor de metadatos"</li>
                        <li>Diseñar esquema performante y evolutivo</li>
                    </ul>
                </div>

                <div class="architecture-diagram">
                    <h3 style="text-align: center;">🧬 Estrategia Híbrida</h3>
                    <div style="display: flex; justify-content: space-between; margin: 20px 0;">
                        <div style="flex: 1; text-align: center; margin: 0 10px;">
                            <div style="background: rgba(34, 197, 94, 0.2); padding: 20px; border-radius: 8px; border: 2px solid rgba(34, 197, 94, 0.4);">
                                <strong>Core Data</strong><br><br>
                                <small>Campos esenciales</small><br>
                                <small>Normalizados</small><br>
                                <small>Fuertemente tipados</small><br>
                                <small>Críticos para búsquedas</small>
                            </div>
                        </div>
                        <div style="flex: 1; text-align: center; margin: 0 10px;">
                            <div style="background: rgba(102, 126, 234, 0.2); padding: 20px; border-radius: 8px; border: 2px solid rgba(102, 126, 234, 0.4);">
                                <strong>Extended Data</strong><br><br>
                                <small>Campos variables</small><br>
                                <small>JSON/JSONB</small><br>
                                <small>Flexibles</small><br>
                                <small>Un solo contenedor</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-block good">
                    <span class="code-label good">HÍBRIDO</span>
<span class="keyword">CREATE TABLE</span> DynamicEntities (
    <span class="comment">-- Core: Normalizadas, indexadas, fuertemente tipadas</span>
    EntityID <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    EntityType <span class="type">VARCHAR</span>(50) <span class="keyword">NOT NULL</span>,
    TenantID <span class="type">INT</span> <span class="keyword">NOT NULL</span>,
    CreatedAt <span class="type">DATETIME2</span> <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> <span class="method">GETUTCDATE</span>(),
    
    <span class="comment">-- El Contenedor de Flexibilidad</span>
    ExtendedData <span class="type">NVARCHAR</span>(<span class="keyword">MAX</span>) <span class="keyword">CHECK</span> (<span class="method">ISJSON</span>(ExtendedData) = 1)
);

<span class="keyword">CREATE INDEX</span> IX_DynamicEntities_EntityType_TenantID 
<span class="keyword">ON</span> DynamicEntities(EntityType, TenantID);
                </div>

                <div class="highlight">
                    <p><strong>🚀 Ventaja Clave:</strong> Las consultas sobre datos del core son extremadamente rápidas. 
                    Los datos flexibles están encapsulados. ¡Los motores modernos saben indexar JSON!</p>
                </div>
            </div>
            <div class="slide-number">8 / 18</div>
        </div>

        <!-- Slide 9: JSON en Acción -->
        <div class="slide">
            <div class="slide-header">
                <h2>JSON en Acción: Flexibilidad sin Sacrificios</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>Insertar Cliente Extendido</h3>
                        <div class="code-block good" style="font-size: 0.8em;">
                            <span class="code-label good">INSERCIÓN</span>
<span class="keyword">INSERT INTO</span> DynamicEntities 
(EntityType, TenantID, ExtendedData)
<span class="keyword">VALUES</span> (<span class="string">'Cliente'</span>, 1, 
    <span class="string">N'{
        "nombre": "Ana López",
        "email": "ana@test.com",
        "fechaNacimiento": "1990-05-15",
        "esVIP": true,
        "tags": ["retail", "frecuente"],
        "configuracion": {
            "notificaciones": true,
            "idioma": "es-AR"
        }
    }'</span>
);
                        </div>

                        <div class="json-example">
<span class="comment">// Estructura del JSON</span>
{
  "nombre": "Ana López",
  "email": "ana@test.com", 
  "fechaNacimiento": "1990-05-15",
  "esVIP": true,
  "tags": ["retail", "frecuente"],
  "configuracion": {
    "notificaciones": true,
    "idioma": "es-AR"
  }
}
                        </div>
                    </div>
                    <div>
                        <h3>Consultar Datos JSON</h3>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="comment">-- Core data (rápido)</span>
<span class="keyword">SELECT</span> EntityID, CreatedAt 
<span class="keyword">FROM</span> DynamicEntities 
<span class="keyword">WHERE</span> EntityType = <span class="string">'Cliente'</span>;

<span class="comment">-- JSON fields (SQL Server)</span>
<span class="keyword">SELECT</span>
    EntityID,
    <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.nombre'</span>) <span class="keyword">AS</span> Nombre,
    <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.email'</span>) <span class="keyword">AS</span> Email,
    <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.esVIP'</span>) <span class="keyword">AS</span> EsVIP
<span class="keyword">FROM</span> DynamicEntities
<span class="keyword">WHERE</span> EntityType = <span class="string">'Cliente'</span> 
  <span class="keyword">AND</span> <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.esVIP'</span>) = <span class="string">'true'</span>;

<span class="comment">-- Buscar en arrays</span>
<span class="keyword">SELECT</span> EntityID, <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.nombre'</span>)
<span class="keyword">FROM</span> DynamicEntities
<span class="keyword">WHERE</span> <span class="method">JSON_QUERY</span>(ExtendedData, <span class="string">'$.tags'</span>) <span class="keyword">LIKE</span> <span class="string">'%retail%'</span>;
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>✅ Ventajas del Híbrido</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li>Core queries ultra-rápidas</li>
                            <li>JSON fields indexables</li>
                            <li>Schema evolution sin migration</li>
                            <li>Type safety en core data</li>
                            <li>Flexibilidad donde se necesita</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>🔧 Soporte por DBMS</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>SQL Server:</strong> JSON_VALUE, JSON_QUERY</li>
                            <li><strong>PostgreSQL:</strong> JSONB, operadores ->, ->></li>
                            <li><strong>MySQL:</strong> JSON data type</li>
                            <li><strong>Oracle:</strong> JSON columns nativas</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">9 / 18</div>
        </div>

        <!-- Slide 10: Ejercicio Práctico JSON -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio Práctico: Productos Dinámicos</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Tu Misión</h3>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">
                        Diseña una entidad "Producto" usando el modelo híbrido para un marketplace que vende 
                        desde electrónicos hasta ropa.
                    </p>
                </div>

                <div class="two-column">
                    <div>
                        <div class="card">
                            <h3>📋 Especificaciones</h3>
                            <p><strong>Core Data (siempre presente):</strong></p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>ProductID, SKU, CategoryID</li>
                                <li>Price, Currency, Stock</li>
                                <li>IsActive, CreatedAt</li>
                            </ul>

                            <p style="margin-top: 20px;"><strong>Extended Data (variable por categoría):</strong></p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li><strong>Electrónicos:</strong> marca, modelo, warranty, specs técnicas</li>
                                <li><strong>Ropa:</strong> tallas, colores, material, cuidado</li>
                                <li><strong>Libros:</strong> autor, ISBN, páginas, editorial</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <h4>🎯 Requerimientos</h4>
                            <ul style="margin-left: 20px;">
                                <li>Búsquedas rápidas por precio y stock</li>
                                <li>Filtros por atributos específicos</li>
                                <li>Agregar nuevas categorías sin ALTER TABLE</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h3>💻 Ejemplo de Solución</h3>
                            <div class="code-block" style="font-size: 0.8em;">
<span class="comment">-- Laptop gaming</span>
<span class="keyword">INSERT INTO</span> DynamicEntities 
(EntityType, TenantID, ExtendedData)
<span class="keyword">VALUES</span> (<span class="string">'Producto'</span>, 1, 
<span class="string">N'{
    "nombre": "Gaming Laptop RTX4080",
    "categoria": "Laptops",
    "marca": "ASUS",
    "modelo": "ROG Strix G18",
    "especificaciones": {
        "cpu": "Intel i9-13980HX",
        "gpu": "RTX 4080 12GB",
        "ram": "32GB DDR5",
        "storage": "1TB NVMe SSD",
        "pantalla": "18 pulgadas 240Hz"
    },
    "garantia": "2 años",
    "imagenes": [
        "img1.jpg", "img2.jpg"
    ]
}'</span>);
                            </div>

                            <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">-- Consulta: Laptops con RTX 4080</span>
<span class="keyword">SELECT</span> 
    <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.nombre'</span>) <span class="keyword">AS</span> Producto,
    <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.especificaciones.gpu'</span>) <span class="keyword">AS</span> GPU
<span class="keyword">FROM</span> DynamicEntities
<span class="keyword">WHERE</span> EntityType = <span class="string">'Producto'</span>
  <span class="keyword">AND</span> <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.especificaciones.gpu'</span>) 
      <span class="keyword">LIKE</span> <span class="string">'%RTX 4080%'</span>;
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>🎯 Ejercicio:</strong> Escribe las sentencias INSERT para un producto de tipo "Libro" y una consulta 
                    que devuelva todos los libros de un autor específico con precio > $1000.</p>
                </div>
            </div>
            <div class="slide-number">10 / 18</div>
        </div>

        <!-- Slide 11: Clase 4 - Meta-Modelo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 4: El Meta-Modelo</h2>
                <p class="subtitle">El Sistema que se Diseña a Sí Mismo</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Objetivos</h3>
                    <ul class="list">
                        <li>Diseñar tablas de metadatos que describen entidades dinámicas</li>
                        <li>Entender cómo la aplicación usa metadatos para construir UI</li>
                        <li>Implementar el "ADN" de tus datos</li>
                    </ul>
                </div>

                <div class="meta-layer">
                    <h3 style="text-align: center;">🧬 El ADN de tus Datos</h3>
                    <p style="text-align: center; margin-bottom: 20px;">
                        Diseñamos el "generador de sistemas": tablas que definen la estructura de nuestras entidades dinámicas.
                    </p>
                </div>

                <div class="two-column">
                    <div>
                        <h3>📋 MetaEntities</h3>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">CREATE TABLE</span> MetaEntities (
    MetaEntityID <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    Name <span class="type">VARCHAR</span>(100) <span class="keyword">NOT NULL</span>, <span class="comment">-- 'Cliente', 'Producto'</span>
    Description <span class="type">NVARCHAR</span>(500),
    IconName <span class="type">VARCHAR</span>(50), <span class="comment">-- Para UI</span>
    IsActive <span class="type">BIT</span> <span class="keyword">DEFAULT</span> 1,
    CreatedAt <span class="type">DATETIME2</span> <span class="keyword">DEFAULT</span> <span class="method">GETUTCDATE</span>()
);
                        </div>

                        <p style="margin-top: 15px;"><strong>Define:</strong> Los tipos de entidades que pueden existir (Cliente, Producto, Ticket, etc.)</p>
                    </div>
                    <div>
                        <h3>🔧 MetaAttributes</h3>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">CREATE TABLE</span> MetaAttributes (
    MetaAttributeID <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> <span class="keyword">IDENTITY</span>,
    MetaEntityID <span class="type">INT</span> <span class="keyword">FOREIGN KEY</span> <span class="keyword">REFERENCES</span> MetaEntities,
    Name <span class="type">VARCHAR</span>(100), <span class="comment">-- 'email', 'fechaNacimiento'</span>
    Label <span class="type">NVARCHAR</span>(200), <span class="comment">-- 'Correo Electrónico'</span>
    DataType <span class="type">VARCHAR</span>(50), <span class="comment">-- 'text', 'date', 'number'</span>
    IsRequired <span class="type">BIT</span> <span class="keyword">DEFAULT</span> 0,
    DefaultValue <span class="type">NVARCHAR</span>(500),
    SortOrder <span class="type">INT</span> <span class="keyword">DEFAULT</span> 100,
    ValidationRules <span class="type">NVARCHAR</span>(<span class="keyword">MAX</span>), <span class="comment">-- JSON</span>
    IsActive <span class="type">BIT</span> <span class="keyword">DEFAULT</span> 1
);
                        </div>

                        <p style="margin-top: 15px;"><strong>Define:</strong> Los atributos/campos de cada entidad con todas sus propiedades de UI y validación.</p>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>💡 El Poder:</strong> Cuando el usuario quiere crear un "Cliente", la aplicación consulta estos metadatos 
                    y genera la UI dinámicamente en tiempo real.</p>
                </div>
            </div>
            <div class="slide-number">11 / 18</div>
        </div>

        <!-- Slide 12: Poblando el Meta-Modelo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Poblando el Meta-Modelo</h2>
                <p class="subtitle">Definiendo un formulario como datos</p>
            </div>
            <div class="content">
                <h3>Definiendo la Entidad "Cliente"</h3>
                <div class="code-block">
<span class="comment">-- 1. Definir la entidad "Cliente"</span>
<span class="keyword">INSERT INTO</span> MetaEntities (Name, Description, IconName) 
<span class="keyword">VALUES</span> (<span class="string">'Cliente'</span>, <span class="string">'Representa un cliente de la compañía'</span>, <span class="string">'user'</span>);
<span class="comment">-- Supongamos que genera MetaEntityID = 1</span>

<span class="comment">-- 2. Definir los atributos para "Cliente"</span>
<span class="keyword">INSERT INTO</span> MetaAttributes 
(MetaEntityID, Name, Label, DataType, IsRequired, SortOrder, ValidationRules) 
<span class="keyword">VALUES</span>
(1, <span class="string">'nombre'</span>, <span class="string">'Nombre Completo'</span>, <span class="string">'text'</span>, 1, 10, 
 <span class="string">'{"minLength": 2, "maxLength": 100}'</span>),
(1, <span class="string">'email'</span>, <span class="string">'Correo Electrónico'</span>, <span class="string">'email'</span>, 1, 20, 
 <span class="string">'{"pattern": "^[\\w\\.-]+@[\\w\\.-]+\\.[a-zA-Z]{2,}$"}'</span>),
(1, <span class="string">'fechaNacimiento'</span>, <span class="string">'Fecha de Nacimiento'</span>, <span class="string">'date'</span>, 0, 30, 
 <span class="string">'{"min": "1900-01-01", "max": "2010-12-31"}'</span>),
(1, <span class="string">'esVIP'</span>, <span class="string">'¿Es Cliente VIP?'</span>, <span class="string">'boolean'</span>, 1, 40, <span class="keyword">NULL</span>),
(1, <span class="string">'tipoCliente'</span>, <span class="string">'Tipo de Cliente'</span>, <span class="string">'select'</span>, 1, 50, 
 <span class="string">'{"options": ["Particular", "Empresa", "Gobierno"]}'</span>);
                </div>

                <div class="architecture-diagram">
                    <h3 style="text-align: center;">🔄 Flujo de la Aplicación</h3>
                    <div class="flow-step" data-step="1">
                        <strong>Usuario quiere crear "Cliente"</strong> → La aplicación identifica MetaEntityID
                    </div>
                    <div class="flow-step" data-step="2">
                        <strong>Query MetaAttributes</strong> → WHERE MetaEntityID = 1 ORDER BY SortOrder
                    </div>
                    <div class="flow-step" data-step="3">
                        <strong>UI se genera dinámicamente</strong> → Bucle creando campos según DataType y Label
                    </div>
                    <div class="flow-step" data-step="4">
                        <strong>Usuario guarda</strong> → App construye JSON y INSERT en DynamicEntities
                    </div>
                </div>

                <div class="code-block good" style="margin-top: 20px;">
                    <span class="code-label good">RESULTADO</span>
<span class="comment">-- La aplicación generó automáticamente este INSERT:</span>
<span class="keyword">INSERT INTO</span> DynamicEntities (EntityType, TenantID, ExtendedData)
<span class="keyword">VALUES</span> (<span class="string">'Cliente'</span>, 1, 
<span class="string">N'{
    "nombre": "María García",
    "email": "maria@empresa.com",
    "fechaNacimiento": "1985-03-15",
    "esVIP": true,
    "tipoCliente": "Empresa"
}'</span>);
                </div>
            </div>
            <div class="slide-number">12 / 18</div>
        </div>

        <!-- Slide 13: Ejercicio Meta-Modelo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio: Ticket de Soporte</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Tu Desafío</h3>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">
                        Puebla las tablas MetaEntities y MetaAttributes para definir una entidad 
                        "Ticket de Soporte" con campos variables.
                    </p>
                </div>

                <div class="two-column">
                    <div>
                        <div class="card">
                            <h3>📋 Especificaciones del Ticket</h3>
                            <ul style="margin-left: 20px; margin-top: 15px;">
                                <li><strong>asunto:</strong> Texto, requerido, máx 200 chars</li>
                                <li><strong>descripcion:</strong> Textarea, opcional, máx 2000 chars</li>
                                <li><strong>prioridad:</strong> Lista ['Alta', 'Media', 'Baja'], requerido</li>
                                <li><strong>fechaReporte:</strong> Fecha, requerido, no futura</li>
                                <li><strong>categoria:</strong> Lista ['Bug', 'Feature', 'Support'], requerido</li>
                                <li><strong>adjuntos:</strong> Array de URLs, opcional</li>
                            </ul>
                        </div>

                        <div class="warning-box">
                            <h4>🤔 Pregunta de Diseño</h4>
                            <p>¿Cómo extenderías MetaAttributes para soportar listas de selección con opciones predefinidas?</p>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h3>💡 Solución Propuesta</h3>
                            <details style="margin-top: 10px;">
                                <summary style="cursor: pointer; color: #667eea;">Ver Implementación</summary>
                                <div class="code-block" style="margin-top: 15px; font-size: 0.8em;">
<span class="comment">-- Definir entidad</span>
<span class="keyword">INSERT INTO</span> MetaEntities (Name, Description, IconName) 
<span class="keyword">VALUES</span> (<span class="string">'Ticket'</span>, <span class="string">'Ticket de soporte técnico'</span>, <span class="string">'ticket'</span>);

<span class="comment">-- Definir atributos</span>
<span class="keyword">INSERT INTO</span> MetaAttributes 
(MetaEntityID, Name, Label, DataType, IsRequired, SortOrder, ValidationRules) 
<span class="keyword">VALUES</span>
(2, <span class="string">'asunto'</span>, <span class="string">'Asunto'</span>, <span class="string">'text'</span>, 1, 10, 
 <span class="string">'{"maxLength": 200}'</span>),
(2, <span class="string">'descripcion'</span>, <span class="string">'Descripción'</span>, <span class="string">'textarea'</span>, 0, 20, 
 <span class="string">'{"maxLength": 2000}'</span>),
(2, <span class="string">'prioridad'</span>, <span class="string">'Prioridad'</span>, <span class="string">'select'</span>, 1, 30, 
 <span class="string">'{"options": ["Alta", "Media", "Baja"]}'</span>),
(2, <span class="string">'fechaReporte'</span>, <span class="string">'Fecha de Reporte'</span>, <span class="string">'date'</span>, 1, 40, 
 <span class="string">'{"max": "today"}'</span>),
(2, <span class="string">'categoria'</span>, <span class="string">'Categoría'</span>, <span class="string">'select'</span>, 1, 50, 
 <span class="string">'{"options": ["Bug", "Feature", "Support"]}'</span>);
                                </div>
                            </details>
                        </div>

                        <div class="json-example">
<span class="comment">// Resultado JSON del ticket creado</span>
{
  "asunto": "Login no funciona en móvil",
  "descripcion": "Al intentar hacer login...",
  "prioridad": "Alta",
  "fechaReporte": "2024-01-15",
  "categoria": "Bug",
  "adjuntos": [
    "screenshot1.png",
    "error_log.txt"
  ]
}
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>🎯 Extensión:</strong> ¿Cómo implementarías validaciones cross-field? 
                    (ej: si prioridad="Alta", entonces descripcion es requerida)</p>
                </div>
            </div>
            <div class="slide-number">13 / 18</div>
        </div>

        <!-- Slide 14: Clase 5 - Performance y Gobernanza -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 5: Performance y Gobernanza</h2>
                <p class="subtitle">Domando a la Bestia Flexible</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 Objetivos</h3>
                    <ul class="list">
                        <li>Aprender a indexar datos dentro de columnas JSON</li>
                        <li>Entender estrategias de caching para metadatos</li>
                        <li>Discutir gobernanza y versionado de esquemas dinámicos</li>
                    </ul>
                </div>

                <div class="grid">
                    <div class="card">
                        <h3>⚡ Indexación de JSON</h3>
                        <h4>SQL Server - Computed Columns</h4>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 10px;">
<span class="comment">-- Crear propiedad computada</span>
<span class="keyword">ALTER TABLE</span> DynamicEntities 
<span class="keyword">ADD</span> Email <span class="keyword">AS</span> <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.email'</span>);

<span class="comment">-- Indexar la propiedad</span>
<span class="keyword">CREATE INDEX</span> IX_DynamicEntities_Email 
<span class="keyword">ON</span> DynamicEntities(Email);

<span class="comment">-- Ahora esta query es súper rápida:</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> DynamicEntities 
<span class="keyword">WHERE</span> Email = <span class="string">'ana@test.com'</span>;
                        </div>

                        <h4>PostgreSQL - GIN Indexes</h4>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 10px;">
<span class="comment">-- Índice GIN sobre toda la columna JSONB</span>
<span class="keyword">CREATE INDEX</span> IDX_GIN_ExtendedData 
<span class="keyword">ON</span> DynamicEntities <span class="keyword">USING</span> GIN (ExtendedData);

<span class="comment">-- Acelera búsquedas por cualquier clave/valor</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> DynamicEntities 
<span class="keyword">WHERE</span> ExtendedData @> <span class="string">'{"esVIP": true}'</span>;
                        </div>
                    </div>
                    <div class="card">
                        <h3>🚀 Caching de Metadatos</h3>
                        <div class="warning-box">
                            <h4>🎯 El Problema</h4>
                            <p>MetaEntities y MetaAttributes se leen constantemente pero cambian muy poco.</p>
                        </div>

                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">// Estrategia en .NET</span>
<span class="keyword">public class</span> <span class="type">MetadataService</span>
{
    <span class="keyword">private readonly</span> <span class="type">IMemoryCache</span> _cache;
    
    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">List</span>&lt;<span class="type">MetaAttribute</span>&gt;&gt; 
        <span class="method">GetAttributesAsync</span>(<span class="type">int</span> entityId)
    {
        <span class="keyword">return await</span> _cache.<span class="method">GetOrCreateAsync</span>(
            $<span class="string">"meta_attrs_{entityId}"</span>,
            <span class="keyword">async</span> entry => {
                entry.AbsoluteExpirationRelativeToNow = 
                    <span class="type">TimeSpan</span>.<span class="method">FromHours</span>(4);
                <span class="keyword">return await</span> _repository
                    .<span class="method">GetAttributesByEntityIdAsync</span>(entityId);
            });
    }
    
    <span class="keyword">public void</span> <span class="method">InvalidateMetadata</span>(<span class="type">int</span> entityId)
    {
        _cache.<span class="method">Remove</span>($<span class="string">"meta_attrs_{entityId}"</span>);
    }
}
                        </div>

                        <div class="highlight">
                            <p><strong>💡 Resultado:</strong> UI generation instantánea, miles menos queries a la DB.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">14 / 18</div>
        </div>

        <!-- Slide 15: Gobernanza y Versionado -->
        <div class="slide">
            <div class="slide-header">
                <h2>Gobernanza y Versionado</h2>
                <p class="subtitle">Evolución controlada del esquema</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="danger-box">
                        <h3>🚨 El Problema</h3>
                        <p><strong>¿Qué pasa si eliminas un MetaAttribute que ya está siendo usado en miles de registros de DynamicEntities?</strong></p>
                        <div style="text-align: center; margin: 20px 0; font-size: 1.2em;">
                            ⚠️ DATOS HUÉRFANOS ⚠️
                        </div>
                    </div>
                    <div class="card">
                        <h3>✅ Solución: Soft Delete</h3>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">-- Añadir columna IsActive</span>
<span class="keyword">ALTER TABLE</span> MetaAttributes 
<span class="keyword">ADD</span> IsActive <span class="type">BIT</span> <span class="keyword">DEFAULT</span> 1;

<span class="comment">-- En lugar de DELETE</span>
<span class="keyword">UPDATE</span> MetaAttributes 
<span class="keyword">SET</span> IsActive = 0 
<span class="keyword">WHERE</span> MetaAttributeID = 5;

<span class="comment">-- UI no renderiza campos inactivos</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> MetaAttributes 
<span class="keyword">WHERE</span> MetaEntityID = 1 
  <span class="keyword">AND</span> IsActive = 1
<span class="keyword">ORDER BY</span> SortOrder;
                        </div>
                    </div>
                </div>

                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <div class="card">
                            <h3>📊 Versionado de Esquemas</h3>
                            <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">-- Añadir versionado a MetaEntities</span>
<span class="keyword">ALTER TABLE</span> MetaEntities 
<span class="keyword">ADD</span> Version <span class="type">INT</span> <span class="keyword">DEFAULT</span> 1;

<span class="keyword">ALTER TABLE</span> MetaAttributes 
<span class="keyword">ADD</span> FromVersion <span class="type">INT</span> <span class="keyword">DEFAULT</span> 1,
    ToVersion <span class="type">INT</span> <span class="keyword">NULL</span>; <span class="comment">-- NULL = activo</span>

<span class="comment">-- Query para versión específica</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> MetaAttributes 
<span class="keyword">WHERE</span> MetaEntityID = 1 
  <span class="keyword">AND</span> FromVersion <= 2 
  <span class="keyword">AND</span> (ToVersion <span class="keyword">IS NULL</span> <span class="keyword">OR</span> ToVersion > 2)
  <span class="keyword">AND</span> IsActive = 1;
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h3>🔒 Políticas de Gobernanza</h3>
                            <ul class="list" style="font-size: 0.9em;">
                                <li><strong>Approval Process:</strong> Cambios requieren aprobación</li>
                                <li><strong>Change Log:</strong> Auditoría de modificaciones</li>
                                <li><strong>Migration Path:</strong> Scripts para datos existentes</li>
                                <li><strong>Rollback Strategy:</strong> Plan de retroceso</li>
                                <li><strong>Impact Analysis:</strong> Qué registros se afectan</li>
                            </ul>

                            <div class="warning-box" style="margin-top: 15px;">
                                <p><strong>💼 Para Fintech:</strong> Cambios en metadatos pueden requerir aprobación regulatoria. Implementa workflows de aprobación con trazabilidad completa.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>🎯 Principio Clave:</strong> En sistemas críticos, la flexibilidad debe venir acompañada de controles estrictos. 
                    "Con gran poder viene gran responsabilidad" - aplica especialmente a esquemas dinámicos.</p>
                </div>
            </div>
            <div class="slide-number">15 / 18</div>
        </div>

        <!-- Slide 16: Ejercicio Final -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio Final de Integración</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>🎯 El Gran Desafío</h3>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">
                        <strong>Escenario:</strong> El administrador debe poder añadir un nuevo campo "Número de Póliza" 
                        a la entidad "Cliente". Este campo debe ser visible inmediatamente para todos los usuarios 
                        al crear o editar un cliente. Las búsquedas por número de póliza deben ser rápidas.
                    </p>
                </div>

                <div class="two-column">
                    <div>
                        <div class="card">
                            <h3>📋 Estrategia Completa</h3>
                            <div class="flow-step" data-step="1">
                                <strong>MetaData Update:</strong> INSERT en MetaAttributes
                            </div>
                            <div class="flow-step" data-step="2">
                                <strong>Cache Invalidation:</strong> Limpiar caché de metadatos
                            </div>
                            <div class="flow-step" data-step="3">
                                <strong>Index Creation:</strong> Computed column + índice
                            </div>
                            <div class="flow-step" data-step="4">
                                <strong>UI Auto-Update:</strong> Formularios se actualizan automáticamente
                            </div>
                        </div>

                        <div class="warning-box">
                            <h4>🎯 Requerimientos Técnicos</h4>
                            <ul style="margin-left: 20px;">
                                <li>Zero downtime</li>
                                <li>Búsquedas < 100ms</li>
                                <li>Visible inmediatamente</li>
                                <li>Backward compatibility</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <div class="card">
                            <h3>💻 Implementación</h3>
                            <div class="code-block" style="font-size: 0.75em;">
<span class="comment">-- 1. Añadir metadato</span>
<span class="keyword">INSERT INTO</span> MetaAttributes 
(MetaEntityID, Name, Label, DataType, IsRequired, SortOrder, ValidationRules)
<span class="keyword">VALUES</span> (1, <span class="string">'numeroPoliza'</span>, <span class="string">'Número de Póliza'</span>, <span class="string">'text'</span>, 0, 60, 
        <span class="string">'{"pattern": "^POL-[0-9]{8}$", "maxLength": 12}'</span>);

<span class="comment">-- 2. Crear computed column para performance</span>
<span class="keyword">ALTER TABLE</span> DynamicEntities 
<span class="keyword">ADD</span> NumeroPoliza <span class="keyword">AS</span> <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.numeroPoliza'</span>);

<span class="comment">-- 3. Indexar para búsquedas rápidas</span>
<span class="keyword">CREATE INDEX</span> IX_DynamicEntities_NumeroPoliza 
<span class="keyword">ON</span> DynamicEntities(NumeroPoliza) 
<span class="keyword">WHERE</span> NumeroPoliza <span class="keyword">IS NOT NULL</span>;

<span class="comment">-- 4. Invalidar caché (código C#)</span>
metadataService.<span class="method">InvalidateMetadata</span>(1); <span class="comment">// Cliente = 1</span>
                            </div>

                            <div class="code-block good" style="font-size: 0.75em; margin-top: 15px;">
                                <span class="code-label good">BÚSQUEDA RÁPIDA</span>
<span class="comment">-- Búsqueda ultra-rápida por póliza</span>
<span class="keyword">SELECT</span> EntityID, 
       <span class="method">JSON_VALUE</span>(ExtendedData, <span class="string">'$.nombre'</span>) <span class="keyword">AS</span> Nombre,
       NumeroPoliza
<span class="keyword">FROM</span> DynamicEntities 
<span class="keyword">WHERE</span> EntityType = <span class="string">'Cliente'</span> 
  <span class="keyword">AND</span> NumeroPoliza = <span class="string">'POL-12345678'</span>;
<span class="comment">-- Index seek! Sub-millisecond response</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>🚀 Resultado:</strong> Campo añadido sin downtime, visible inmediatamente en todos los formularios, 
                    búsquedas en microsegundos, cero impacto en datos existentes.</p>
                </div>
            </div>
            <div class="slide-number">16 / 18</div>
        </div>

        <!-- Slide 17: Casos Reales en Producción -->
        <div class="slide">
            <div class="slide-header">
                <h2>Casos Reales en Producción</h2>
                <p class="subtitle">Donde se usa este enfoque hoy</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>🏢 Salesforce</h3>
                        <div class="icon">☁️</div>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Custom Fields:</strong> 800+ por objeto</li>
                            <li><strong>Multi-Tenant:</strong> Millones de organizaciones</li>
                            <li><strong>Real-time Schema:</strong> Cambios inmediatos</li>
                            <li><strong>Performance:</strong> <50ms response times</li>
                        </ul>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Tecnología:</strong> Multi-tenant architecture con metadata API, computed columns masivos.</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>🚀 OutSystems</h3>
                        <div class="icon">⚙️</div>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Low-Code Platform:</strong> Drag & drop entities</li>
                            <li><strong>Dynamic DDL:</strong> Auto-generated schemas</li>
                            <li><strong>Enterprise Scale:</strong> Millones de records</li>
                            <li><strong>Live Deployment:</strong> Sin downtime</li>
                        </ul>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Innovación:</strong> Transforman metadata visual a SQL optimizado automáticamente.</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>📊 Monday.com</h3>
                        <div class="icon">📋</div>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Custom Boards:</strong> Columnas dinámicas ilimitadas</li>
                            <li><strong>Type System:</strong> 20+ tipos de columnas</li>
                            <li><strong>Real-time Sync:</strong> Millones de updates/día</li>
                            <li><strong>API Flexible:</strong> GraphQL auto-generated</li>
                        </ul>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Arquitectura:</strong> Event sourcing + JSON columns + computed properties.</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>🛒 Shopify</h3>
                        <div class="icon">🛍️</div>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Metafields:</strong> Campos custom para productos</li>
                            <li><strong>App Ecosystem:</strong> 1000+ apps añaden campos</li>
                            <li><strong>E-commerce Scale:</strong> Billones de requests</li>
                            <li><strong>Developer API:</strong> Schema discovery automático</li>
                        </ul>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Pattern:</strong> Core ecommerce data + metafields JSON + strategic indexing.</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 30px;">
                    <h3>💰 Business Impact</h3>
                    <div class="grid" style="margin-top: 15px;">
                        <div>
                            <h4>📈 Revenue Impact</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Faster TTM:</strong> Features en días vs meses</li>
                                <li><strong>Customer Retention:</strong> Customización sin limits</li>
                                <li><strong>Expansion Revenue:</strong> Premium fields per tier</li>
                            </ul>
                        </div>
                        <div>
                            <h4>⚡ Operational Impact</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>DevOps Efficiency:</strong> 90% menos deployments</li>
                                <li><strong>Support Reduction:</strong> Self-service configuration</li>
                                <li><strong>Compliance Agility:</strong> Regulatory changes en horas</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">17 / 18</div>
        </div>

        <!-- Slide 18: Conclusiones -->
        <div class="slide">
            <div class="slide-header">
                <h2>Conclusiones y Próximos Pasos</h2>
            </div>
            <div class="content">
                <div class="card" style="text-align: center; max-width: 800px; margin: 0 auto;">
                    <h3>🎯 Conceptos Clave Dominados</h3>
                    <div style="text-align: left; margin-top: 30px;">
                        <p style="margin-bottom: 20px;">✅ <strong>Diseño Híbrido:</strong> Core normalizado + JSON para flexibilidad</p>
                        <p style="margin-bottom: 20px;">✅ <strong>Meta-Modelo:</strong> El sistema que se diseña a sí mismo</p>
                        <p style="margin-bottom: 20px;">✅ <strong>Performance:</strong> Computed columns e índices estratégicos</p>
                        <p style="margin-bottom: 20px;">✅ <strong>Gobernanza:</strong> Versionado, soft delete, change management</p>
                        <p style="margin-bottom: 20px;">✅ <strong>Casos Reales:</strong> Arquitecturas de billón-dollar companies</p>
                    </div>
                </div>
                
                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>📚 Para Profundizar</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>"Database Design for Mere Mortals" - Hernandez</li>
                            <li>"High Performance MySQL" - Schwartz</li>
                            <li>"PostgreSQL JSON Documentation"</li>
                            <li>"Multi-tenant Data Architecture" - Microsoft</li>
                            <li>"Schema Evolution in NoSQL" - Fowler</li>
                            <li>Salesforce Technical Architecture Guides</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>🎯 Plan de Acción</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Identifica un formulario "rígido" en tu sistema</li>
                            <li>Diseña el meta-modelo para esa entidad</li>
                            <li>Implementa PoC con JSON híbrido</li>
                            <li>Mide performance vs enfoque tradicional</li>
                            <li>Diseña estrategia de migración gradual</li>
                            <li>Presenta business case al management</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>🚀 Temas Avanzados</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Event Sourcing:</strong> Para auditabilidad completa</li>
                            <li><strong>CQRS:</strong> Separar writes de reads optimizados</li>
                            <li><strong>GraphQL:</strong> API auto-generado desde metadatos</li>
                            <li><strong>Microservices:</strong> Meta-schema como servicio</li>
                            <li><strong>Blockchain:</strong> Schema governance descentralizado</li>
                            <li><strong>AI/ML:</strong> Schema suggestions basadas en usage</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>💼 ROI Empresarial</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Time to Market:</strong> 10x faster feature delivery</li>
                            <li><strong>Development Cost:</strong> 70% reduction en changes</li>
                            <li><strong>Customer Satisfaction:</strong> Self-service customization</li>
                            <li><strong>Compliance Agility:</strong> Regulatory changes en horas</li>
                            <li><strong>Technical Debt:</strong> Más flexible = menos refactoring</li>
                            <li><strong>Team Productivity:</strong> Focus en business logic</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight" style="margin-top: 40px;">
                    <p style="text-align: center; font-size: 1.2em;">
                        <strong>"El futuro pertenece a los sistemas que pueden evolucionar. 
                        Los esquemas dinámicos no son una opción, son una necesidad competitiva."</strong>
                    </p>
                    <p style="text-align: center; margin-top: 10px; color: #a8a8b3;">— Martin Kleppmann, Designing Data-Intensive Applications</p>
                </div>
            </div>
            <div class="slide-number">18 / 18</div>
        </div>

        <!-- Instructor Info -->
        <div class="instructor-info">
            <div class="instructor-name">Alejandro Sfrede</div>
            <div class="instructor-area">Área de Arquitectura</div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn" onclick="previousSlide()" id="prevBtn">← Anterior</button>
            <button class="nav-btn" onclick="nextSlide()" id="nextBtn">Siguiente →</button>
            <button class="nav-btn" onclick="goHome()" style="background: rgba(102, 126, 234, 0.3);">🏠 Portal</button>
        </div>

        <div class="slide-counter">
            <span id="currentSlide">1</span> / <span id="totalSlides">18</span>
        </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        function showSlide(n) {
            slides.forEach(slide => slide.classList.remove('active'));
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');
            
            document.getElementById('slideIndicator').textContent = `${currentSlide + 1} / ${totalSlides}`;
            document.getElementById('prevBtn').disabled = currentSlide === 0;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides - 1;
            
            // Update progress bar
            const progress = ((currentSlide + 1) / totalSlides) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        function goHome() {
            window.location.href = '../index.html';
        }

        // Enhanced keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousSlide();
            } else if (e.key === 'Home') {
                e.preventDefault();
                goHome();
            }
        });

        // Touch/swipe support
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) changeSlide(1);
            if (touchEndX > touchStartX + 50) changeSlide(-1);
        }

        // Initialize
        document.getElementById('totalSlides').textContent = totalSlides;
        showSlide(0);
    </script>
</body>
</html>