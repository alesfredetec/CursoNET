<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√©cnicas "No If" para un C√≥digo Limpio y Flexible</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 60px;
            position: relative;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-header {
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.8em;
            color: #764ba2;
            margin: 30px 0 20px;
            font-weight: 500;
        }

        .subtitle {
            font-size: 1.5em;
            color: #a8a8b3;
            font-weight: 300;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .list {
            list-style: none;
            padding: 0;
        }

        .list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: flex-start;
        }

        .list li:last-child {
            border-bottom: none;
        }

        .list li::before {
            content: '‚ñ∏';
            color: #667eea;
            font-size: 1.5em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .code-block {
            background: #1e1e2e;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 25px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.6;
            position: relative;
        }

        .code-block.bad {
            border-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.05);
        }

        .code-block.good {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }

        .code-label {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .code-label.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .code-label.good {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .keyword {
            color: #667eea;
            font-weight: bold;
        }

        .string {
            color: #98c379;
        }

        .comment {
            color: #7c8a9c;
            font-style: italic;
        }

        .type {
            color: #e06c75;
        }

        .method {
            color: #61afef;
        }

        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .slide-counter {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1000;
            color: #a8a8b3;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .instructor-info {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 13px;
            z-index: 1000;
            color: #a8a8b3;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: right;
        }

        .instructor-name {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .instructor-title {
            color: #a8a8b3;
            font-size: 11px;
        }

        .nav-hints {
            position: fixed;
            bottom: 90px;
            right: 30px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 11px;
            z-index: 1000;
            color: #666;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-hints.show {
            opacity: 1;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            z-index: 1001;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
        }

        .icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .smell-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 0 5px;
        }

        .smell-indicator.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .smell-indicator.good {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .arrow {
            font-size: 2em;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        .pattern-evolution {
            background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        @media (max-width: 768px) {
            .slide {
                padding: 30px;
            }
            h1 {
                font-size: 2.5em;
            }
            h2 {
                font-size: 2em;
            }
            .two-column {
                grid-template-columns: 1fr;
            }
            .code-block {
                font-size: 0.8em;
            }
        }

        /* Loader and Modal Styles */
        .solution-loader {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .spinner {
            border: 4px solid rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            border-top: 4px solid #667eea;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .password-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            align-items: center;
            justify-content: center;
        }

        .password-modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            padding: 30px;
            border: 2px solid #667eea;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            color: #ffffff;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.7) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-content h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .password-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #667eea;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: #ffffff;
            font-size: 16px;
            text-align: center;
        }

        .password-input:focus {
            outline: none;
            border-color: #764ba2;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .modal-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .modal-btn-confirm {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal-btn-cancel {
            background: rgba(255,255,255,0.1);
            color: #a8a8b3;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        .error-message {
            color: #ff6b6b;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .success-message {
            color: #90ee90;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .protected-solution {
            display: none;
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <div class="progress-bar" id="progressBar"></div>
        
        <!-- Slide 1: T√≠tulo -->
        <div class="slide active">
            <div class="slide-header">
                <h1>T√©cnicas "No If"</h1>
                <p class="subtitle">Para un C√≥digo Limpio y Flexible</p>
            </div>
            <div class="content" style="justify-content: center; align-items: center;">
                <div class="card" style="text-align: center; max-width: 800px;">
                    <div class="icon">üö´</div>
                    <h3>Eliminando la Complejidad Condicional</h3>
                    <p style="font-size: 1.2em; color: #a8a8b3; margin-top: 20px;">
                        Dictionary ‚Ä¢ Strategy ‚Ä¢ State ‚Ä¢ Polymorphism
                    </p>
                </div>
            </div>
            <div class="slide-number">1 / 24</div>
        </div>

        <!-- Slide 2: Roadmap del Aprendizaje -->
        <div class="slide">
            <div class="slide-header">
                <h2>üó∫Ô∏è Tu Aprendizaje</h2>
                <p class="subtitle">De c√≥digo con IFs complejos a c√≥digo limpio y extensible</p>
            </div>
            <div class="content">
                <!-- Learning Path -->
                <div style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 30px;">
                    <div style="text-align: center; background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px; border: 2px solid #ff6b6b;">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üòµ</div>
                        <div style="font-weight: bold; color: #ff6b6b;">PROBLEMA</div>
                        <div style="font-size: 0.8em;">IFs complejos</div>
                    </div>
                    <div style="font-size: 1.5em;">‚Üí</div>
                    <div style="text-align: center; background: rgba(255,215,0,0.2); padding: 15px; border-radius: 10px; border: 2px solid #ffd700;">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üìö</div>
                        <div style="font-weight: bold; color: #ffd700;">PATTERNS</div>
                        <div style="font-size: 0.8em;">4+ t√©cnicas</div>
                    </div>
                    <div style="font-size: 1.5em;">‚Üí</div>
                    <div style="text-align: center; background: rgba(144,238,144,0.2); padding: 15px; border-radius: 10px; border: 2px solid #90ee90;">
                        <div style="font-size: 1.5em; margin-bottom: 8px;">üéØ</div>
                        <div style="font-weight: bold; color: #90ee90;">SOLUCI√ìN</div>
                        <div style="font-size: 0.8em;">C√≥digo limpio</div>
                    </div>
                </div>

                <!-- Patterns Overview -->
                <div class="card">
                    <h3>üß∞ Las 4 Herramientas que Aprender√°s</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px;">
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: bold; color: #667eea; margin-bottom: 8px;">üìã Dictionary Pattern</div>
                            <div style="font-size: 0.9em;">Para mapeos simples clave ‚Üí valor</div>
                            <div style="font-size: 0.8em; color: #a8a8b3; margin-top: 5px;">‚è±Ô∏è 15 mins | üéØ F√°cil</div>
                        </div>
                        
                        <div style="background: rgba(255, 193, 7, 0.1); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: bold; color: #ffc107; margin-bottom: 8px;">‚ö° Strategy Pattern</div>
                            <div style="font-size: 0.9em;">Para algoritmos complejos intercambiables</div>
                            <div style="font-size: 0.8em; color: #a8a8b3; margin-top: 5px;">‚è±Ô∏è 45 mins | üéØ Intermedio</div>
                        </div>
                        
                        <div style="background: rgba(255, 107, 107, 0.1); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: bold; color: #ff6b6b; margin-bottom: 8px;">üîÑ State Pattern</div>
                            <div style="font-size: 0.9em;">Para workflows con transiciones</div>
                            <div style="font-size: 0.8em; color: #a8a8b3; margin-top: 5px;">‚è±Ô∏è 60 mins | üéØ Avanzado</div>
                        </div>
                        
                        <div style="background: rgba(135, 206, 235, 0.1); padding: 15px; border-radius: 10px;">
                            <div style="font-weight: bold; color: #87ceeb; margin-bottom: 8px;">üë• Polimorfismo</div>
                            <div style="font-size: 0.9em;">Para jerarqu√≠as naturales de tipos</div>
                            <div style="font-size: 0.8em; color: #a8a8b3; margin-top: 5px;">‚è±Ô∏è 30 mins | üéØ B√°sico</div>
                        </div>
                    </div>
                </div>

                <div class="highlight" style="text-align: center; margin-top: 20px;">
                    <strong>üéØ Meta de hoy:</strong> Transformar c√≥digo con 20+ IFs en c√≥digo con 0 IFs usando estos 4 patrones
                </div>
            </div>
            <div class="slide-number">2 / 24</div>
        </div>

        <!-- Slide 3: ¬øPor qu√© evitar los if? -->
        <div class="slide">
            <div class="slide-header">
                <h2>¬øPor qu√© evitar los if?</h2>
                <p class="subtitle">El c√≥digo real que enfrentas d√≠a a d√≠a</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üéØ El Problema: Complejidad Ciclom√°tica</h3>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">
                        Los if-else y switch son herramientas b√°sicas, pero su uso excesivo conduce a c√≥digo:
                    </p>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <div class="icon">üìö</div>
                        <h3>Dif√≠cil de Leer</h3>
                        <ul class="list">
                            <li>L√≥gica ramificada y enrevesada</li>
                            <li>M√∫ltiples niveles de anidaci√≥n</li>
                            <li>Flujo no lineal</li>
                            <li>Contexto perdido entre ramas</li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="icon">üîß</div>
                        <h3>Dif√≠cil de Mantener</h3>
                        <ul class="list">
                            <li>A√±adir condici√≥n = modificar c√≥digo existente</li>
                            <li>Viola principio Open/Closed</li>
                            <li>Propenso a errores de regresi√≥n</li>
                            <li>Duplicaci√≥n de l√≥gica</li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="icon">üß™</div>
                        <h3>Dif√≠cil de Probar</h3>
                        <ul class="list">
                            <li>Una prueba por cada rama</li>
                            <li>Combinaciones exponenciales</li>
                            <li>Mock complejo de dependencias</li>
                            <li>Coverage dif√≠cil de alcanzar</li>
                        </ul>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>üí° Objetivo:</strong> No eliminar todos los if, sino reemplazar la l√≥gica de negocio compleja con dise√±os m√°s robustos, flexibles y orientados a objetos.</p>
                </div>
            </div>
            <div class="slide-number">3 / 24</div>
        </div>

        <!-- Slide 4: Clase 1 - Diccionarios al Rescate -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 1: Adi√≥s al switch</h2>
                <p class="subtitle">Diccionarios al rescate</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üéØ Objetivo</h3>
                    <p>Reemplazar estructuras switch o cadenas de if-else que mapean una clave a una acci√≥n o valor, utilizando la simplicidad y eficiencia de un <code>Dictionary</code>.</p>
                </div>

                <h3>El Problema: Un "Factory" R√≠gido</h3>
                <div class="code-block bad">
                    <span class="code-label bad">ANTES</span>
<span class="keyword">public class</span> <span class="type">NotifierFactory</span>
{
    <span class="comment">// Este m√©todo viola el Principio de Abierto/Cerrado</span>
    <span class="keyword">public</span> <span class="type">INotifier</span> <span class="method">GetNotifier</span>(<span class="type">string</span> notificationType)
    {
        <span class="keyword">switch</span> (notificationType.<span class="method">ToLower</span>())
        {
            <span class="keyword">case</span> <span class="string">"email"</span>:
                <span class="keyword">return new</span> <span class="type">EmailNotifier</span>();
            <span class="keyword">case</span> <span class="string">"sms"</span>:
                <span class="keyword">return new</span> <span class="type">SmsNotifier</span>();
            <span class="keyword">case</span> <span class="string">"push"</span>:
                <span class="keyword">return new</span> <span class="type">PushNotifier</span>();
            <span class="keyword">default</span>:
                <span class="keyword">throw new</span> <span class="type">ArgumentException</span>(<span class="string">"Tipo no v√°lido"</span>);
        }
    }
}
                </div>

                <div class="highlight">
                    <p><strong>üö® Problema:</strong> Si a√±adimos WhatsAppNotifier, TENEMOS que modificar esta clase. Viola Open/Closed Principle.</p>
                </div>
            </div>
            <div class="slide-number">4 / 24</div>
        </div>

        <!-- Slide 4: Soluci√≥n con Diccionarios -->
        <div class="slide">
            <div class="slide-header">
                <h2>La Soluci√≥n: Mapeo con Diccionarios</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>Paso a Paso</h3>
                        <div class="card">
                            <p><strong>1. Identificar el Mapeo:</strong><br>
                            Una clave string se mapea a la creaci√≥n de un objeto.</p>
                            
                            <p style="margin-top: 15px;"><strong>2. Crear el Diccionario:</strong><br>
                            <code>Dictionary&lt;string, Func&lt;INotifier&gt;&gt;</code> para creaci√≥n perezosa.</p>
                            
                            <p style="margin-top: 15px;"><strong>3. Refactorizar:</strong><br>
                            El switch se reemplaza por b√∫squeda en diccionario.</p>
                        </div>
                    </div>
                    <div>
                        <div class="code-block good">
                            <span class="code-label good">DESPU√âS</span>
<span class="keyword">public class</span> <span class="type">NotifierFactory</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">INotifier</span>&gt;&gt; _notifiers;

    <span class="keyword">public</span> <span class="method">NotifierFactory</span>()
    {
        _notifiers = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">INotifier</span>&gt;&gt;
        {
            { <span class="string">"email"</span>, () => <span class="keyword">new</span> <span class="type">EmailNotifier</span>() },
            { <span class="string">"sms"</span>, () => <span class="keyword">new</span> <span class="type">SmsNotifier</span>() },
            { <span class="string">"push"</span>, () => <span class="keyword">new</span> <span class="type">PushNotifier</span>() }
        };
    }

    <span class="keyword">public</span> <span class="type">INotifier</span> <span class="method">GetNotifier</span>(<span class="type">string</span> notificationType)
    {
        <span class="keyword">if</span> (_notifiers.<span class="method">TryGetValue</span>(notificationType.<span class="method">ToLower</span>(), <span class="keyword">out var</span> factory))
        {
            <span class="keyword">return</span> factory();
        }
        
        <span class="keyword">throw new</span> <span class="type">ArgumentException</span>(<span class="string">"Tipo no v√°lido"</span>);
    }
}
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>‚úÖ Ventaja:</strong> Para a√±adir WhatsAppNotifier, simplemente a√±adimos una entrada al diccionario. ¬°Cumple Open/Closed!</p>
                </div>
            </div>
            <div class="slide-number">5 / 24</div>
        </div>

        <!-- Slide 5: Ejemplo Pr√°ctico - Calculadora -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio: Calculadora Matem√°tica</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>C√≥digo Original</h3>
                        <div class="code-block bad">
                            <span class="code-label bad">R√çGIDO</span>
<span class="keyword">public int</span> <span class="method">Calculate</span>(<span class="type">char</span> operation, <span class="type">int</span> a, <span class="type">int</span> b)
{
    <span class="keyword">switch</span> (operation)
    {
        <span class="keyword">case</span> <span class="string">'+'</span>:
            <span class="keyword">return</span> a + b;
        <span class="keyword">case</span> <span class="string">'-'</span>:
            <span class="keyword">return</span> a - b;
        <span class="keyword">case</span> <span class="string">'*'</span>:
            <span class="keyword">return</span> a * b;
        <span class="keyword">case</span> <span class="string">'/'</span>:
            <span class="keyword">return</span> a / b;
        <span class="keyword">default</span>:
            <span class="keyword">throw new</span> <span class="type">InvalidOperationException</span>();
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>Versi√≥n con Dictionary</h3>
                        <div class="code-block good">
                            <span class="code-label good">FLEXIBLE</span>
<span class="keyword">public class</span> <span class="type">Calculator</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">char</span>, <span class="type">Func</span>&lt;<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&gt;&gt; _operations;

    <span class="keyword">public</span> <span class="method">Calculator</span>()
    {
        _operations = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">char</span>, <span class="type">Func</span>&lt;<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&gt;&gt;
        {
            { <span class="string">'+'</span>, (a, b) => a + b },
            { <span class="string">'-'</span>, (a, b) => a - b },
            { <span class="string">'*'</span>, (a, b) => a * b },
            { <span class="string">'/'</span>, (a, b) => a / b },
            { <span class="string">'%'</span>, (a, b) => a % b }, <span class="comment">// ¬°F√°cil agregar!</span>
            { <span class="string">'^'</span>, (a, b) => (<span class="type">int</span>)<span class="type">Math</span>.<span class="method">Pow</span>(a, b) }
        };
    }

    <span class="keyword">public int</span> <span class="method">Calculate</span>(<span class="type">char</span> operation, <span class="type">int</span> a, <span class="type">int</span> b)
    {
        <span class="keyword">return</span> _operations.<span class="method">GetValueOrDefault</span>(operation, 
            (x, y) => <span class="keyword">throw new</span> <span class="type">InvalidOperationException</span>())(a, b);
    }
}
                        </div>
                    </div>
                </div>

                <!-- Func and Lambda Explanation -->
                <div class="card" style="margin: 20px 0; background: rgba(102, 126, 234, 0.1); border-left: 4px solid #667eea;">
                    <div style="padding: 20px;">
                        <h3>üß† ¬øQu√© significan estos s√≠mbolos raros?</h3>
                        
                        <!-- Simple Visual Explanation -->
                        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0; text-align: center;">
                            <div style="font-size: 1.4em; color: #90ee90; margin-bottom: 10px;">
                                <code>Dictionary&lt;char, Func&lt;int, int, int&gt;&gt;</code>
                            </div>
                            <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap; font-size: 0.9em;">
                                <div style="background: rgba(255,100,100,0.2); padding: 8px 12px; border-radius: 5px;">
                                    <strong>char</strong><br><small>Operador: '+', '-', '*'</small>
                                </div>
                                <span style="font-size: 1.5em;">‚Üí</span>
                                <div style="background: rgba(100,255,100,0.2); padding: 8px 12px; border-radius: 5px;">
                                    <strong>Func</strong><br><small>Funci√≥n que hace algo</small>
                                </div>
                            </div>
                        </div>

                        <div class="two-column" style="gap: 30px; font-size: 0.9em;">
                            <div>
                                <h4 style="color: #667eea; margin-bottom: 15px;">üîç Func&lt;int, int, int&gt; Desglosado</h4>
                                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; font-family: monospace;">
                                    <div style="margin-bottom: 8px;"><span style="color: #ff6b6b;">Func</span><span style="color: #4ecdc4;">&lt;</span><span style="color: #ffe66d;">int, int,</span> <span style="color: #95e1d3;">int</span><span style="color: #4ecdc4;">&gt;</span></div>
                                    <div style="font-size: 0.8em; font-family: sans-serif;">
                                        <div>üì• <span style="color: #ffe66d;">Par√°metro 1:</span> int a</div>
                                        <div>üì• <span style="color: #ffe66d;">Par√°metro 2:</span> int b</div>
                                        <div>üì§ <span style="color: #95e1d3;">Retorna:</span> int resultado</div>
                                    </div>
                                </div>
                                <p style="margin-top: 10px; font-size: 0.85em; color: #a8a8b3;">
                                    üí° <strong>Analog√≠a:</strong> Como una receta que toma 2 ingredientes (int, int) y produce 1 plato (int)
                                </p>
                            </div>
                            <div>
                                <h4 style="color: #667eea; margin-bottom: 15px;">‚ö° Lambda: (a, b) => a + b</h4>
                                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; font-family: monospace;">
                                    <div style="margin-bottom: 8px;"><span style="color: #ff6b6b;">(a, b)</span> <span style="color: #4ecdc4;">=></span> <span style="color: #95e1d3;">a + b</span></div>
                                    <div style="font-size: 0.8em; font-family: sans-serif;">
                                        <div>üìù <span style="color: #ff6b6b;">Par√°metros</span></div>
                                        <div>üîÑ <span style="color: #4ecdc4;">"Se convierte en"</span></div>
                                        <div>üéØ <span style="color: #95e1d3;">Lo que devuelve</span></div>
                                    </div>
                                </div>
                                <p style="margin-top: 10px; font-size: 0.85em; color: #a8a8b3;">
                                    üí° <strong>Se lee:</strong> "Toma a y b, y devuelve a m√°s b"
                                </p>
                            </div>
                        </div>
                        
                        <!-- Three Clear Forms -->
                        <div style="margin-top: 25px;">
                            <h4 style="color: #667eea; margin-bottom: 15px;">üîÑ Tres maneras de escribir lo mismo:</h4>
                            
                            <!-- Form 1: Lambda (Recommended) -->
                            <div style="margin-bottom: 20px; background: rgba(144,238,144,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #90ee90;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <span style="background: #90ee90; color: black; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold;">‚úÖ RECOMENDADO</span>
                                    <span style="margin-left: 10px; font-weight: bold;">1. Lambda Expression</span>
                                </div>
                                <div class="code-block" style="background: rgba(0,0,0,0.3); margin: 0;">
{ <span class="string">'+'</span>, (a, b) => a + b }
                                </div>
                                <p style="font-size: 0.8em; margin: 8px 0 0 0; color: #a8a8b3;">
                                    üìñ <strong>M√°s simple y directo.</strong> √ösala cuando la l√≥gica cabe en una l√≠nea.
                                </p>
                            </div>

                            <!-- Form 2: Anonymous Method -->
                            <div style="margin-bottom: 20px; background: rgba(255,215,0,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #ffd700;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <span style="background: #ffd700; color: black; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold;">‚ö†Ô∏è M√âTODO AN√ìNIMO</span>
                                    <span style="margin-left: 10px; font-weight: bold;">2. Estilo Cl√°sico</span>
                                </div>
                                <div class="code-block" style="background: rgba(0,0,0,0.3); margin: 0;">
{ <span class="string">'+'</span>, <span class="keyword">delegate</span>(<span class="type">int</span> a, <span class="type">int</span> b) 
  { 
      <span class="keyword">return</span> a + b; 
  } 
}
                                </div>
                                <p style="font-size: 0.8em; margin: 8px 0 0 0; color: #a8a8b3;">
                                    üìñ <strong>M√°s verboso.</strong> √ösalo cuando necesites m√∫ltiples l√≠neas de c√≥digo.
                                </p>
                            </div>

                            <!-- Form 3: Named Method -->
                            <div style="margin-bottom: 20px; background: rgba(135,206,235,0.1); padding: 15px; border-radius: 8px; border-left: 4px solid #87ceeb;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <span style="background: #87ceeb; color: black; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; font-weight: bold;">üîß M√âTODO SEPARADO</span>
                                    <span style="margin-left: 10px; font-weight: bold;">3. Funci√≥n Reutilizable</span>
                                </div>
                                <div class="code-block" style="background: rgba(0,0,0,0.3); margin: 0;">
<span class="comment">// Definir m√©todo separado</span>
<span class="keyword">private static int</span> <span class="method">Sumar</span>(<span class="type">int</span> a, <span class="type">int</span> b)
{
    <span class="keyword">return</span> a + b;
}

<span class="comment">// Usar en el diccionario</span>
{ <span class="string">'+'</span>, Sumar }
                                </div>
                                <p style="font-size: 0.8em; margin: 8px 0 0 0; color: #a8a8b3;">
                                    üìñ <strong>Para l√≥gica compleja o reutilizable.</strong> Mejor testing y debugging.
                                </p>
                            </div>
                        </div>
                        
                        <div class="highlight" style="text-align: center; margin-top: 20px;">
                            <strong>üí° Regla de oro:</strong> Lambda para l√≥gica simple, m√©todos separados para l√≥gica compleja
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>‚úÖ Beneficios</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Agregar operaciones sin modificar Calculate</li>
                            <li>L√≥gica m√°s limpia y expresiva</li>
                            <li>F√°cil testing de operaciones individuales</li>
                            <li>Composici√≥n de operaciones complejas</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üéØ Casos de Uso</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Factories y builders</li>
                            <li>Command processors</li>
                            <li>State machines simples</li>
                            <li>Mapeo de enums a acciones</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">6 / 24</div>
        </div>

        <!-- Slide 7: Transici√≥n a Strategy Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>üîÑ Checkpoint: Dictionary vs Strategy</h2>
                <p class="subtitle">¬øCu√°ndo Dictionary no es suficiente?</p>
            </div>
            <div class="content">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div class="card" style="background: rgba(144,238,144,0.1);">
                        <h3 style="color: #90ee90;">‚úÖ Dictionary Pattern Funciona</h3>
                        <div style="margin-top: 15px; font-size: 0.9em;">
                            <div style="margin-bottom: 10px;">üéØ <strong>Mapeo simple:</strong></div>
                            <ul style="margin-left: 20px; font-size: 0.85em;">
                                <li>Clave ‚Üí Valor/Funci√≥n</li>
                                <li>Sin l√≥gica compleja</li>
                                <li>Resultado directo</li>
                            </ul>
                            
                            <div style="margin: 15px 0 10px;">üí° <strong>Ejemplos:</strong></div>
                            <div style="font-size: 0.8em; color: #a8a8b3;">
                                ‚Ä¢ "email" ‚Üí EmailNotifier<br>
                                ‚Ä¢ "+" ‚Üí (a,b) => a + b<br>
                                ‚Ä¢ "PDF" ‚Üí PdfExporter
                            </div>
                        </div>
                    </div>
                    
                    <div class="card" style="background: rgba(255,193,7,0.1);">
                        <h3 style="color: #ffc107;">‚ö° Necesitas Strategy Pattern</h3>
                        <div style="margin-top: 15px; font-size: 0.9em;">
                            <div style="margin-bottom: 10px;">üö® <strong>Algoritmos complejos:</strong></div>
                            <ul style="margin-left: 20px; font-size: 0.85em;">
                                <li>M√∫ltiples variables de entrada</li>
                                <li>L√≥gica condicional dentro del algoritmo</li>
                                <li>Estado/configuraci√≥n propia</li>
                            </ul>
                            
                            <div style="margin: 15px 0 10px;">üí° <strong>Ejemplos:</strong></div>
                            <div style="font-size: 0.8em; color: #a8a8b3;">
                                ‚Ä¢ C√°lculo de precios con descuentos<br>
                                ‚Ä¢ Algoritmos de validaci√≥n complejos<br>
                                ‚Ä¢ Procesamiento con m√∫ltiples reglas
                            </div>
                        </div>
                    </div>
                </div>

                <div class="highlight" style="text-align: center; margin-top: 25px;">
                    <div style="font-size: 1.1em; font-weight: bold; margin-bottom: 10px;">ü§î Pregunta Clave para Decidir:</div>
                    <div style="font-size: 1.2em; color: #ffc107;">
                        "¬øLa l√≥gica es un mapeo directo o requiere c√°lculos/validaciones complejas?"
                    </div>
                </div>

                <div style="display: flex; justify-content: center; margin-top: 25px;">
                    <div style="background: rgba(102,126,234,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-weight: bold; color: #667eea; margin-bottom: 5px;">üéØ Pr√≥ximo Paso:</div>
                        <div style="font-size: 0.9em;">Aprender√°s Strategy Pattern para casos complejos</div>
                    </div>
                </div>
            </div>
            <div class="slide-number">7 / 24</div>
        </div>

        <!-- Slide 8: Clase 2 - Strategy Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 2: El Patr√≥n Strategy</h2>
                <p class="subtitle">Encapsulando algoritmos</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üéØ Objetivo</h3>
                    <p>Reemplazar bloques if-else complejos que representan diferentes algoritmos o estrategias de negocio, encapsulando cada algoritmo en su propia clase.</p>
                </div>

                <h3>El Problema: C√°lculo de Costos de Env√≠o</h3>
                <div class="code-block bad">
                    <span class="code-label bad">ANTES</span>
<span class="keyword">public class</span> <span class="type">ShippingCalculator</span>
{
    <span class="comment">// Cada nueva compa√±√≠a requiere modificar este m√©todo</span>
    <span class="keyword">public decimal</span> <span class="method">CalculateShippingCost</span>(<span class="type">Order</span> order, <span class="type">string</span> provider)
    {
        <span class="type">decimal</span> cost = 0;
        <span class="keyword">if</span> (provider == <span class="string">"FedEx"</span>)
        {
            <span class="comment">// L√≥gica compleja de FedEx</span>
            cost = order.WeightInKg * 3.5m + 5;
        }
        <span class="keyword">else if</span> (provider == <span class="string">"UPS"</span>)
        {
            <span class="comment">// L√≥gica de UPS</span>
            cost = order.WeightInKg * 4.2m;
        }
        <span class="keyword">else if</span> (provider == <span class="string">"DHL"</span>)
        {
            <span class="comment">// L√≥gica de DHL</span>
            cost = 15 + (order.WeightInKg > 10 ? (order.WeightInKg - 10) * 2 : 0);
        }
        <span class="keyword">return</span> cost;
    }
}
                </div>

                <div class="highlight">
                    <p><strong>üö® Problema:</strong> Este m√©todo crece con cada nueva compa√±√≠a y se vuelve m√°s fr√°gil. Viola SRP y OCP.</p>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 9: Strategy Pattern - Soluci√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>Soluci√≥n Paso a Paso: Strategy Pattern</h2>
            </div>
            <div class="content">
                <div class="pattern-evolution">
                    <h3>Paso 1: Definir la Interfaz de la Estrategia</h3>
                    <div class="code-block" style="margin-top: 15px;">
<span class="keyword">public interface</span> <span class="type">IShippingStrategy</span>
{
    <span class="type">decimal</span> <span class="method">CalculateCost</span>(<span class="type">Order</span> order);
}
                    </div>
                </div>

                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h3>Paso 2: Estrategias Concretas</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">FedExShippingStrategy</span> : <span class="type">IShippingStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateCost</span>(<span class="type">Order</span> order) 
        => order.WeightInKg * 3.5m + 5;
}

<span class="keyword">public class</span> <span class="type">UPSShippingStrategy</span> : <span class="type">IShippingStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateCost</span>(<span class="type">Order</span> order) 
        => order.WeightInKg * 4.2m;
}

<span class="keyword">public class</span> <span class="type">DHLShippingStrategy</span> : <span class="type">IShippingStrategy</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateCost</span>(<span class="type">Order</span> order) 
        => 15 + (order.WeightInKg > 10 ? (order.WeightInKg - 10) * 2 : 0);
}
                        </div>
                    </div>
                    <div>
                        <h3>Paso 3: Contexto Simplificado</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">ShippingCalculator</span>
{
    <span class="comment">// Depende de la ABSTRACCI√ìN, no de implementaciones</span>
    <span class="keyword">public decimal</span> <span class="method">CalculateShippingCost</span>(<span class="type">Order</span> order, 
                                    <span class="type">IShippingStrategy</span> strategy)
    {
        <span class="keyword">return</span> strategy.<span class="method">CalculateCost</span>(order);
    }
}

<span class="comment">// Uso del patr√≥n</span>
<span class="keyword">var</span> order = <span class="keyword">new</span> <span class="type">Order</span> { WeightInKg = 5 };
<span class="keyword">var</span> calculator = <span class="keyword">new</span> <span class="type">ShippingCalculator</span>();

<span class="type">IShippingStrategy</span> fedexStrategy = <span class="keyword">new</span> <span class="type">FedExShippingStrategy</span>();
<span class="type">decimal</span> cost = calculator.<span class="method">CalculateShippingCost</span>(order, fedexStrategy);
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>‚úÖ Ventaja:</strong> Para a√±adir "Estafeta", creamos EstafetaShippingStrategy. ShippingCalculator no cambia.</p>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 9: Strategy Pattern - Ejercicio -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio: Sistema de Exportaci√≥n</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>C√≥digo Original</h3>
                        <div class="code-block bad">
                            <span class="code-label bad">R√çGIDO</span>
<span class="keyword">public class</span> <span class="type">Exporter</span>
{
    <span class="keyword">public void</span> <span class="method">Export</span>(<span class="type">Report</span> report, <span class="type">string</span> format)
    {
        <span class="keyword">if</span> (format == <span class="string">"PDF"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Creando PDF..."</span>);
            <span class="comment">// L√≥gica PDF compleja</span>
        }
        <span class="keyword">else if</span> (format == <span class="string">"CSV"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Creando CSV..."</span>);
            <span class="comment">// L√≥gica CSV</span>
        }
        <span class="keyword">else if</span> (format == <span class="string">"JSON"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Serializando JSON..."</span>);
            <span class="comment">// L√≥gica JSON</span>
        }
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>Versi√≥n con Strategy</h3>
                        <div class="code-block good">
                            <span class="code-label good">FLEXIBLE</span>
<span class="keyword">public interface</span> <span class="type">IExportStrategy</span>
{
    <span class="keyword">void</span> <span class="method">Export</span>(<span class="type">Report</span> report);
}

<span class="keyword">public class</span> <span class="type">PdfExportStrategy</span> : <span class="type">IExportStrategy</span>
{
    <span class="keyword">public void</span> <span class="method">Export</span>(<span class="type">Report</span> report)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"üìÑ Generando PDF..."</span>);
        <span class="comment">// L√≥gica espec√≠fica de PDF</span>
    }
}

<span class="keyword">public class</span> <span class="type">ExcelExportStrategy</span> : <span class="type">IExportStrategy</span>
{
    <span class="keyword">public void</span> <span class="method">Export</span>(<span class="type">Report</span> report)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"üìä Generando Excel..."</span>);
        <span class="comment">// L√≥gica espec√≠fica de Excel</span>
    }
}

<span class="keyword">public class</span> <span class="type">ReportExporter</span>
{
    <span class="keyword">public void</span> <span class="method">Export</span>(<span class="type">Report</span> report, <span class="type">IExportStrategy</span> strategy)
    {
        strategy.<span class="method">Export</span>(report);
    }
}
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>üéØ Patrones Relacionados</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Factory:</strong> Crear estrategias din√°micamente</li>
                            <li><strong>Decorator:</strong> Componer estrategias</li>
                            <li><strong>Command:</strong> Encapsular operaciones</li>
                            <li><strong>Template Method:</strong> Algoritmos con pasos variables</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üîß En el Mundo Real</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Algoritmos de pricing din√°mico</li>
                            <li>Diferentes m√©todos de pago</li>
                            <li>Validaciones por tipo de usuario</li>
                            <li>Estrategias de caching</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 9: Clase 3 - State Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 3: El Patr√≥n State</h2>
                <p class="subtitle">Gesti√≥n de comportamiento por estado</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üéØ Objetivo</h3>
                    <p>Eliminar condicionales que gestionan el comportamiento de un objeto basado en su estado interno. El patr√≥n permite a un objeto alterar su comportamiento cuando su estado interno cambia.</p>
                </div>

                <h3>El Problema: Gesti√≥n de un Documento</h3>
                <div class="code-block bad">
                    <span class="code-label bad">ANTES</span>
<span class="keyword">public class</span> <span class="type">Document</span>
{
    <span class="keyword">public string</span> State { <span class="keyword">get</span>; <span class="keyword">private set</span>; } = <span class="string">"Borrador"</span>;

    <span class="keyword">public void</span> <span class="method">Publish</span>()
    {
        <span class="keyword">if</span> (State == <span class="string">"Borrador"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Publicando documento..."</span>);
            State = <span class="string">"Publicado"</span>;
        }
        <span class="keyword">else if</span> (State == <span class="string">"Publicado"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Error: Ya est√° publicado"</span>);
        }
        <span class="keyword">else if</span> (State == <span class="string">"Archivado"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Error: No se puede publicar archivado"</span>);
        }
    }
    
    <span class="comment">// Archive(), Edit(), etc. con l√≥gica similar...</span>
}
                </div>

                <div class="highlight">
                    <p><strong>üö® Problema:</strong> L√≥gica de transici√≥n dispersa y compleja. A√±adir "En Revisi√≥n" requiere modificar todos los m√©todos.</p>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 10: State Pattern - Soluci√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>Soluci√≥n: State Pattern</h2>
            </div>
            <div class="content">
                <div class="pattern-evolution">
                    <h3>Paso 1: Definir la Interfaz de Estado</h3>
                    <div class="code-block" style="margin-top: 15px;">
<span class="keyword">public interface</span> <span class="type">IDocumentState</span>
{
    <span class="keyword">void</span> <span class="method">Publish</span>(<span class="type">Document</span> document);
    <span class="keyword">void</span> <span class="method">Archive</span>(<span class="type">Document</span> document);
    <span class="keyword">void</span> <span class="method">Edit</span>(<span class="type">Document</span> document);
}
                    </div>
                </div>

                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h3>Paso 2: Estados Concretos</h3>
                        <div class="code-block good" style="font-size: 0.8em;">
<span class="keyword">public class</span> <span class="type">DraftState</span> : <span class="type">IDocumentState</span>
{
    <span class="keyword">public void</span> <span class="method">Publish</span>(<span class="type">Document</span> document)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Publicando documento..."</span>);
        document.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">PublishedState</span>());
    }

    <span class="keyword">public void</span> <span class="method">Archive</span>(<span class="type">Document</span> document)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Archivando borrador..."</span>);
        document.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">ArchivedState</span>());
    }

    <span class="keyword">public void</span> <span class="method">Edit</span>(<span class="type">Document</span> document)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Editando borrador..."</span>);
        <span class="comment">// Permanece en Draft</span>
    }
}

<span class="keyword">public class</span> <span class="type">PublishedState</span> : <span class="type">IDocumentState</span>
{
    <span class="keyword">public void</span> <span class="method">Publish</span>(<span class="type">Document</span> document) 
        => <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Ya est√° publicado"</span>);

    <span class="keyword">public void</span> <span class="method">Archive</span>(<span class="type">Document</span> document)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Archivando publicado..."</span>);
        document.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">ArchivedState</span>());
    }

    <span class="keyword">public void</span> <span class="method">Edit</span>(<span class="type">Document</span> document)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Creando nueva versi√≥n..."</span>);
        document.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">DraftState</span>());
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>Paso 3: Contexto Simplificado</h3>
                        <div class="code-block good" style="font-size: 0.8em;">
<span class="keyword">public class</span> <span class="type">Document</span>
{
    <span class="keyword">private</span> <span class="type">IDocumentState</span> _currentState;

    <span class="keyword">public</span> <span class="method">Document</span>()
    {
        _currentState = <span class="keyword">new</span> <span class="type">DraftState</span>(); <span class="comment">// Estado inicial</span>
    }

    <span class="comment">// Permite que estados cambien el estado</span>
    <span class="keyword">public void</span> <span class="method">SetState</span>(<span class="type">IDocumentState</span> newState) 
        => _currentState = newState;

    <span class="comment">// M√©todos DELEGAN al estado actual</span>
    <span class="keyword">public void</span> <span class="method">Publish</span>() => _currentState.<span class="method">Publish</span>(<span class="keyword">this</span>);
    <span class="keyword">public void</span> <span class="method">Archive</span>() => _currentState.<span class="method">Archive</span>(<span class="keyword">this</span>);
    <span class="keyword">public void</span> <span class="method">Edit</span>() => _currentState.<span class="method">Edit</span>(<span class="keyword">this</span>);
}

<span class="comment">// Uso del patr√≥n</span>
<span class="keyword">var</span> doc = <span class="keyword">new</span> <span class="type">Document</span>();
doc.<span class="method">Publish</span>();  <span class="comment">// Draft ‚Üí Published</span>
doc.<span class="method">Edit</span>();     <span class="comment">// Published ‚Üí Draft</span>
doc.<span class="method">Archive</span>(); <span class="comment">// Draft ‚Üí Archived</span>
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>‚úÖ Ventaja:</strong> Toda la l√≥gica de un estado est√° en una clase. Para a√±adir "En Revisi√≥n", creamos ReviewState sin tocar Document.</p>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 11: State Pattern - Ticket Support -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio: Ticket de Soporte</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>C√≥digo Original</h3>
                        <div class="code-block bad">
                            <span class="code-label bad">MONOL√çTICO</span>
<span class="keyword">public class</span> <span class="type">SupportTicket</span>
{
    <span class="keyword">public string</span> Status { <span class="keyword">get</span>; <span class="keyword">private set</span>; } = <span class="string">"Abierto"</span>;

    <span class="keyword">public void</span> <span class="method">AssignToDeveloper</span>()
    {
        <span class="keyword">if</span> (Status == <span class="string">"Abierto"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Asignando ticket..."</span>);
            Status = <span class="string">"En Progreso"</span>;
        }
        <span class="keyword">else</span> 
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Acci√≥n no permitida"</span>);
        }
    }
    
    <span class="keyword">public void</span> <span class="method">Resolve</span>()
    {
        <span class="keyword">if</span> (Status == <span class="string">"En Progreso"</span>)
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Resolviendo ticket..."</span>);
            Status = <span class="string">"Cerrado"</span>;
        }
        <span class="keyword">else</span> 
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Acci√≥n no permitida"</span>);
        }
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>Versi√≥n con State Pattern</h3>
                        <div class="code-block good" style="font-size: 0.8em;">
<span class="keyword">public interface</span> <span class="type">ITicketState</span>
{
    <span class="keyword">void</span> <span class="method">AssignToDeveloper</span>(<span class="type">SupportTicket</span> ticket);
    <span class="keyword">void</span> <span class="method">Resolve</span>(<span class="type">SupportTicket</span> ticket);
    <span class="keyword">void</span> <span class="method">Reopen</span>(<span class="type">SupportTicket</span> ticket);
}

<span class="keyword">public class</span> <span class="type">OpenTicketState</span> : <span class="type">ITicketState</span>
{
    <span class="keyword">public void</span> <span class="method">AssignToDeveloper</span>(<span class="type">SupportTicket</span> ticket)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"üîÑ Asignando a developer..."</span>);
        ticket.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">InProgressTicketState</span>());
    }

    <span class="keyword">public void</span> <span class="method">Resolve</span>(<span class="type">SupportTicket</span> ticket) 
        => <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"‚ùå Debe asignarse primero"</span>);

    <span class="keyword">public void</span> <span class="method">Reopen</span>(<span class="type">SupportTicket</span> ticket) 
        => <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"‚ùå Ya est√° abierto"</span>);
}

<span class="keyword">public class</span> <span class="type">InProgressTicketState</span> : <span class="type">ITicketState</span>
{
    <span class="keyword">public void</span> <span class="method">AssignToDeveloper</span>(<span class="type">SupportTicket</span> ticket) 
        => <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"‚ùå Ya est√° asignado"</span>);

    <span class="keyword">public void</span> <span class="method">Resolve</span>(<span class="type">SupportTicket</span> ticket)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"‚úÖ Resolviendo ticket..."</span>);
        ticket.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">ClosedTicketState</span>());
    }

    <span class="keyword">public void</span> <span class="method">Reopen</span>(<span class="type">SupportTicket</span> ticket)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"‚Ü©Ô∏è Reabriendo ticket..."</span>);
        ticket.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">OpenTicketState</span>());
    }
}
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>üéØ Cu√°ndo Usar State Pattern</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Objeto con comportamiento que cambia por estado</li>
                            <li>M√∫ltiples estados con transiciones complejas</li>
                            <li>M√°quinas de estado finito</li>
                            <li>Workflows con validaciones por estado</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üîß Casos Reales</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Pedidos: Pendiente ‚Üí Procesando ‚Üí Enviado</li>
                            <li>Conexiones: Desconectado ‚Üí Conectando ‚Üí Conectado</li>
                            <li>Media Player: Play ‚Üí Pause ‚Üí Stop</li>
                            <li>Aprobaciones: Solicitado ‚Üí Revisi√≥n ‚Üí Aprobado</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">11 / 24</div>
        </div>

        <!-- Slide 12: Clase 4 - Polimorfismo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Clase 4: Polimorfismo</h2>
                <p class="subtitle">El "No If" de la OOP</p>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üéØ Objetivo</h3>
                    <p>Reemplazar condicionales que verifican el tipo de un objeto (<code>if (obj is TypeA)</code>) utilizando el comportamiento polim√≥rfico fundamental de la Programaci√≥n Orientada a Objetos.</p>
                </div>

                <h3>El Problema: Formas Geom√©tricas</h3>
                <div class="code-block bad">
                    <span class="code-label bad">TYPE CHECKING</span>
<span class="keyword">public class</span> <span class="type">AreaCalculator</span>
{
    <span class="keyword">public double</span> <span class="method">CalculateTotalArea</span>(<span class="type">List</span>&lt;<span class="type">object</span>&gt; shapes)
    {
        <span class="type">double</span> totalArea = 0;
        <span class="keyword">foreach</span> (<span class="keyword">var</span> shape <span class="keyword">in</span> shapes)
        {
            <span class="comment">// ¬°Code smell terrible! Es fr√°gil y viola OCP</span>
            <span class="keyword">if</span> (shape <span class="keyword">is</span> <span class="type">Square</span> s)
            {
                totalArea += s.Side * s.Side;
            }
            <span class="keyword">else if</span> (shape <span class="keyword">is</span> <span class="type">Circle</span> c)
            {
                totalArea += <span class="type">Math</span>.PI * c.Radius * c.Radius;
            }
            <span class="keyword">else if</span> (shape <span class="keyword">is</span> <span class="type">Rectangle</span> r)
            {
                totalArea += r.Width * r.Height;
            }
            <span class="comment">// A√±adir Triangle requiere modificar este bucle!</span>
        }
        <span class="keyword">return</span> totalArea;
    }
}
                </div>

                <div class="highlight">
                    <p><strong>üö® Problema:</strong> Viola OCP. Cada nueva forma requiere modificar el calculador. Type checking es anti-OOP.</p>
                </div>
            </div>
            <div class="slide-number">12 / 24</div>
        </div>

        <!-- Slide 13: Polimorfismo - Soluci√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>Soluci√≥n: Polimorfismo Puro</h2>
            </div>
            <div class="content">
                <div class="pattern-evolution">
                    <h3>Paso 1: Crear Abstracci√≥n Com√∫n</h3>
                    <div class="code-block" style="margin-top: 15px;">
<span class="keyword">public abstract class</span> <span class="type">Shape</span>
{
    <span class="keyword">public abstract double</span> <span class="method">CalculateArea</span>();
}
                    </div>
                </div>

                <div class="two-column" style="margin-top: 30px;">
                    <div>
                        <h3>Paso 2: Implementaciones Espec√≠ficas</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">Square</span> : <span class="type">Shape</span>
{
    <span class="keyword">public double</span> Side { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override double</span> <span class="method">CalculateArea</span>()
        => Side * Side;
}

<span class="keyword">public class</span> <span class="type">Circle</span> : <span class="type">Shape</span>
{
    <span class="keyword">public double</span> Radius { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override double</span> <span class="method">CalculateArea</span>()
        => <span class="type">Math</span>.PI * Radius * Radius;
}

<span class="keyword">public class</span> <span class="type">Triangle</span> : <span class="type">Shape</span>
{
    <span class="keyword">public double</span> Base { <span class="keyword">get</span>; <span class="keyword">set</span>; }
    <span class="keyword">public double</span> Height { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override double</span> <span class="method">CalculateArea</span>()
        => (Base * Height) / 2;
}
                        </div>
                    </div>
                    <div>
                        <h3>Paso 3: C√°lculo Polim√≥rfico</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">AreaCalculator</span>
{
    <span class="comment">// Lista de abstracci√≥n, no de object</span>
    <span class="keyword">public double</span> <span class="method">CalculateTotalArea</span>(<span class="type">List</span>&lt;<span class="type">Shape</span>&gt; shapes)
    {
        <span class="type">double</span> totalArea = 0;
        <span class="keyword">foreach</span> (<span class="keyword">var</span> shape <span class="keyword">in</span> shapes)
        {
            <span class="comment">// NO hay if. .NET elige implementaci√≥n correcta</span>
            totalArea += shape.<span class="method">CalculateArea</span>();
        }
        <span class="keyword">return</span> totalArea;
    }
}

<span class="comment">// Versi√≥n LINQ m√°s elegante</span>
<span class="keyword">public double</span> <span class="method">CalculateTotalAreaLINQ</span>(<span class="type">List</span>&lt;<span class="type">Shape</span>&gt; shapes)
    => shapes.<span class="method">Sum</span>(s => s.<span class="method">CalculateArea</span>());

<span class="comment">// Uso del polimorfismo</span>
<span class="keyword">var</span> shapes = <span class="keyword">new</span> <span class="type">List</span>&lt;<span class="type">Shape</span>&gt;
{
    <span class="keyword">new</span> <span class="type">Square</span> { Side = 5 },
    <span class="keyword">new</span> <span class="type">Circle</span> { Radius = 3 },
    <span class="keyword">new</span> <span class="type">Triangle</span> { Base = 4, Height = 6 }
};

<span class="keyword">var</span> calculator = <span class="keyword">new</span> <span class="type">AreaCalculator</span>();
<span class="keyword">var</span> totalArea = calculator.<span class="method">CalculateTotalArea</span>(shapes);
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>‚úÖ Ventaja:</strong> Agregar Pentagon requiere solo crear la clase. AreaCalculator no cambia. Polimorfismo = OCP autom√°tico.</p>
                </div>
            </div>
            <div class="slide-number">13 / 24</div>
        </div>

        <!-- Slide 14: Polimorfismo - Ejercicio Empleados -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicio: Sistema de Bonos</h2>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>C√≥digo Original</h3>
                        <div class="code-block bad">
                            <span class="code-label bad">TYPE CHECKING</span>
<span class="keyword">public class</span> <span class="type">BonusCalculator</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateBonus</span>(<span class="type">object</span> employee)
    {
        <span class="keyword">if</span> (employee <span class="keyword">is</span> <span class="type">Manager</span> m) 
            <span class="keyword">return</span> m.Salary * 0.20m;
            
        <span class="keyword">if</span> (employee <span class="keyword">is</span> <span class="type">Developer</span> d) 
            <span class="keyword">return</span> d.Salary * 0.10m + d.LinesOfCode * 0.01m;
            
        <span class="keyword">if</span> (employee <span class="keyword">is</span> <span class="type">SalesPerson</span> s) 
            <span class="keyword">return</span> s.Commission * 0.30m;
            
        <span class="keyword">return</span> 0;
    }
}

<span class="comment">// Clases desconectadas</span>
<span class="keyword">public class</span> <span class="type">Manager</span> 
{ 
    <span class="keyword">public decimal</span> Salary { <span class="keyword">get</span>; <span class="keyword">set</span>; } 
}

<span class="keyword">public class</span> <span class="type">Developer</span> 
{ 
    <span class="keyword">public decimal</span> Salary { <span class="keyword">get</span>; <span class="keyword">set</span>; }
    <span class="keyword">public int</span> LinesOfCode { <span class="keyword">get</span>; <span class="keyword">set</span>; }
}
                        </div>
                    </div>
                    <div>
                        <h3>Versi√≥n Polim√≥rfica</h3>
                        <div class="code-block good" style="font-size: 0.8em;">
<span class="keyword">public abstract class</span> <span class="type">Employee</span>
{
    <span class="keyword">public string</span> Name { <span class="keyword">get</span>; <span class="keyword">set</span>; }
    <span class="keyword">public abstract decimal</span> <span class="method">CalculateBonus</span>();
}

<span class="keyword">public class</span> <span class="type">Manager</span> : <span class="type">Employee</span>
{
    <span class="keyword">public decimal</span> Salary { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override decimal</span> <span class="method">CalculateBonus</span>()
        => Salary * 0.20m; <span class="comment">// 24% del salario</span>
}

<span class="keyword">public class</span> <span class="type">Developer</span> : <span class="type">Employee</span>
{
    <span class="keyword">public decimal</span> Salary { <span class="keyword">get</span>; <span class="keyword">set</span>; }
    <span class="keyword">public int</span> LinesOfCode { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override decimal</span> <span class="method">CalculateBonus</span>()
        => Salary * 0.10m + LinesOfCode * 0.01m;
}

<span class="keyword">public class</span> <span class="type">SalesPerson</span> : <span class="type">Employee</span>
{
    <span class="keyword">public decimal</span> Commission { <span class="keyword">get</span>; <span class="keyword">set</span>; }

    <span class="keyword">public override decimal</span> <span class="method">CalculateBonus</span>()
        => Commission * 0.30m; <span class="comment">// 30% de comisi√≥n</span>
}

<span class="comment">// Calculador simplificado</span>
<span class="keyword">public class</span> <span class="type">PayrollProcessor</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateTotalBonuses</span>(<span class="type">List</span>&lt;<span class="type">Employee</span>&gt; employees)
        => employees.<span class="method">Sum</span>(e => e.<span class="method">CalculateBonus</span>());
}
                        </div>
                    </div>
                </div>

                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>üéØ Beneficios del Polimorfismo</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Elimina type checking completamente</li>
                            <li>OCP autom√°tico para nuevos tipos</li>
                            <li>Cada clase maneja su propia l√≥gica</li>
                            <li>C√≥digo m√°s expresivo y mantenible</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>‚ö° Casos Avanzados</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Visitor Pattern:</strong> Operaciones sobre jerarqu√≠as</li>
                            <li><strong>Template Method:</strong> Algoritmos con pasos variables</li>
                            <li><strong>Factory Method:</strong> Creaci√≥n polim√≥rfica</li>
                            <li><strong>Chain of Responsibility:</strong> Procesamiento secuencial</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">14 / 24</div>
        </div>

        <!-- Slide 15: Comparaci√≥n de Patrones -->
        <div class="slide">
            <div class="slide-header">
                <h2>Comparaci√≥n: Cu√°ndo Usar Cada Patr√≥n</h2>
            </div>
            <div class="content">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Patr√≥n</th>
                            <th>Cu√°ndo Usar</th>
                            <th>Ejemplo de Uso</th>
                            <th>Complejidad</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Dictionary</strong></td>
                            <td>Mapeo simple clave ‚Üí valor/acci√≥n</td>
                            <td>Factory, Command processor, Configuraci√≥n</td>
                            <td><span class="smell-indicator good">Baja</span></td>
                        </tr>
                        <tr>
                            <td><strong>Strategy</strong></td>
                            <td>Algoritmos intercambiables, l√≥gica compleja</td>
                            <td>Pricing, Validaci√≥n, Exportaci√≥n</td>
                            <td><span class="smell-indicator good">Media</span></td>
                        </tr>
                        <tr>
                            <td><strong>State</strong></td>
                            <td>Comportamiento cambia por estado interno</td>
                            <td>Workflows, State machines, UI states</td>
                            <td><span class="smell-indicator">Media-Alta</span></td>
                        </tr>
                        <tr>
                            <td><strong>Polimorfismo</strong></td>
                            <td>Type checking, jerarqu√≠as naturales</td>
                            <td>Formas geom√©tricas, Empleados, Medios de pago</td>
                            <td><span class="smell-indicator good">Baja</span></td>
                        </tr>
                    </tbody>
                </table>

                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>üöÄ Combinando Patrones</h3>
                        <div class="code-block" style="font-size: 0.85em; margin-top: 10px;">
<span class="comment">// Dictionary + Strategy</span>
<span class="keyword">var</span> strategies = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">IPaymentStrategy</span>&gt;
{
    [<span class="string">"credit"</span>] = <span class="keyword">new</span> <span class="type">CreditCardStrategy</span>(),
    [<span class="string">"paypal"</span>] = <span class="keyword">new</span> <span class="type">PayPalStrategy</span>(),
    [<span class="string">"crypto"</span>] = <span class="keyword">new</span> <span class="type">CryptoStrategy</span>()
};

<span class="comment">// Strategy + State</span>
<span class="keyword">public class</span> <span class="type">Order</span>
{
    <span class="keyword">private</span> <span class="type">IOrderState</span> _state = <span class="keyword">new</span> <span class="type">PendingState</span>();
    <span class="keyword">private</span> <span class="type">IPaymentStrategy</span> _paymentStrategy;
    
    <span class="keyword">public void</span> <span class="method">SetPaymentMethod</span>(<span class="type">IPaymentStrategy</span> strategy)
        => _paymentStrategy = strategy;
        
    <span class="keyword">public void</span> <span class="method">Process</span>() 
        => _state.<span class="method">Process</span>(<span class="keyword">this</span>, _paymentStrategy);
}
                        </div>
                    </div>
                    <div class="card">
                        <h3>üí° Reglas de Oro</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li><strong>Empieza simple:</strong> Dictionary primero</li>
                            <li><strong>Evoluciona:</strong> Dictionary ‚Üí Strategy cuando se complique</li>
                            <li><strong>Estado complejo:</strong> State pattern para FSM</li>
                            <li><strong>Jerarqu√≠as naturales:</strong> Polimorfismo directo</li>
                            <li><strong>No sobre-engineer:</strong> A veces un if simple est√° bien</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">15 / 24</div>
        </div>

        <!-- Slide 16: Casos de Uso en Fintech -->
        <div class="slide">
            <div class="slide-header">
                <h2>Casos Reales en Fintech</h2>
                <p class="subtitle">Aplicando "No If" en sistemas de pagos</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üí≥ Procesamiento de Pagos</h3>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">// Strategy para diferentes gateways</span>
<span class="keyword">public interface</span> <span class="type">IPaymentGateway</span>
{
    <span class="type">Task</span>&lt;<span class="type">PaymentResult</span>&gt; <span class="method">ProcessAsync</span>(<span class="type">PaymentRequest</span> request);
}

<span class="keyword">public class</span> <span class="type">CoelsaGateway</span> : <span class="type">IPaymentGateway</span> { <span class="comment">/* ... */</span> }
<span class="keyword">public class</span> <span class="type">StripeGateway</span> : <span class="type">IPaymentGateway</span> { <span class="comment">/* ... */</span> }

<span class="comment">// Factory para selecci√≥n din√°mica</span>
<span class="keyword">var</span> gateways = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">IPaymentGateway</span>&gt;
{
    [<span class="string">"AR"</span>] = <span class="keyword">new</span> <span class="type">CoelsaGateway</span>(),
    [<span class="string">"US"</span>] = <span class="keyword">new</span> <span class="type">StripeGateway</span>()
};

<span class="keyword">var</span> gateway = gateways[user.Country];
<span class="keyword">await</span> gateway.<span class="method">ProcessAsync</span>(paymentRequest);
                        </div>
                    </div>
                    <div class="card">
                        <h3>üîê Validaciones KYC</h3>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">// Strategy para diferentes niveles KYC</span>
<span class="keyword">public abstract class</span> <span class="type">KycValidator</span>
{
    <span class="keyword">public abstract</span> <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">User</span> user);
}

<span class="keyword">public class</span> <span class="type">BasicKycValidator</span> : <span class="type">KycValidator</span>
{
    <span class="keyword">public override</span> <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">User</span> user)
    {
        <span class="comment">// Validar email + tel√©fono</span>
        <span class="keyword">return</span> user.Email != <span class="keyword">null</span> && user.Phone != <span class="keyword">null</span> 
            ? <span class="type">ValidationResult</span>.Valid 
            : <span class="type">ValidationResult</span>.Invalid;
    }
}

<span class="keyword">public class</span> <span class="type">EnhancedKycValidator</span> : <span class="type">KycValidator</span>
{
    <span class="keyword">public override</span> <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">User</span> user)
    {
        <span class="comment">// Validar documentos + biometr√≠a + BCRA</span>
        <span class="keyword">return</span> <span class="type">ComplexValidation</span>(user);
    }
}
                        </div>
                    </div>
                    <div class="card">
                        <h3>üìä Pricing Din√°mico</h3>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">// Dictionary para reglas de pricing</span>
<span class="keyword">var</span> pricingRules = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">Transaction</span>, <span class="type">decimal</span>&gt;&gt;
{
    [<span class="string">"VIP"</span>] = tx => 0, <span class="comment">// Sin comisi√≥n</span>
    [<span class="string">"Premium"</span>] = tx => tx.Amount * 0.01m,
    [<span class="string">"Standard"</span>] = tx => <span class="type">Math</span>.<span class="method">Max</span>(tx.Amount * 0.025m, 10m),
    [<span class="string">"Basic"</span>] = tx => tx.Amount * 0.03m + 5m
};

<span class="comment">// Aplicar regla sin if-else</span>
<span class="keyword">var</span> fee = pricingRules.<span class="method">GetValueOrDefault</span>(user.Tier, 
    tx => tx.Amount * 0.05m)(transaction);

<span class="comment">// Reglas especiales por hora</span>
<span class="keyword">if</span> (<span class="type">DateTime</span>.Now.Hour >= 22) <span class="comment">// Un if est√° OK aqu√≠</span>
    fee *= 1.5m; <span class="comment">// Recargo nocturno</span>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üö¶ Estados de Transacci√≥n</h3>
                        <div class="code-block" style="font-size: 0.8em; margin-top: 15px;">
<span class="comment">// State pattern para lifecycle de transacciones</span>
<span class="keyword">public interface</span> <span class="type">ITransactionState</span>
{
    <span class="type">Task</span> <span class="method">ProcessAsync</span>(<span class="type">Transaction</span> tx);
    <span class="type">Task</span> <span class="method">CancelAsync</span>(<span class="type">Transaction</span> tx);
    <span class="type">Task</span> <span class="method">RefundAsync</span>(<span class="type">Transaction</span> tx);
}

<span class="keyword">public class</span> <span class="type">PendingTransactionState</span> : <span class="type">ITransactionState</span>
{
    <span class="keyword">public async</span> <span class="type">Task</span> <span class="method">ProcessAsync</span>(<span class="type">Transaction</span> tx)
    {
        <span class="comment">// Validar + Procesar + Cambiar a ProcessedState</span>
        <span class="keyword">if</span> (<span class="keyword">await</span> <span class="method">ValidateTransaction</span>(tx))
        {
            <span class="keyword">await</span> <span class="method">ChargeCard</span>(tx);
            tx.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">ProcessedTransactionState</span>());
        }
    }
    
    <span class="keyword">public async</span> <span class="type">Task</span> <span class="method">CancelAsync</span>(<span class="type">Transaction</span> tx)
    {
        tx.<span class="method">SetState</span>(<span class="keyword">new</span> <span class="type">CancelledTransactionState</span>());
    }
}
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">16 / 24</div>
        </div>

        <!-- Slide 17: M√©tricas y Testing -->
        <div class="slide">
            <div class="slide-header">
                <h2>Testing y M√©tricas</h2>
                <p class="subtitle">Validando la mejora del c√≥digo</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>üìä M√©tricas de Calidad</h3>
                        <table class="comparison-table" style="font-size: 0.9em;">
                            <tr>
                                <th>M√©trica</th>
                                <th>Antes</th>
                                <th>Despu√©s</th>
                            </tr>
                            <tr>
                                <td>Complejidad Ciclom√°tica</td>
                                <td><span class="smell-indicator bad">15-25</span></td>
                                <td><span class="smell-indicator good">2-5</span></td>
                            </tr>
                            <tr>
                                <td>L√≠neas por m√©todo</td>
                                <td><span class="smell-indicator bad">50-100+</span></td>
                                <td><span class="smell-indicator good">5-20</span></td>
                            </tr>
                            <tr>
                                <td>Acoplamiento</td>
                                <td><span class="smell-indicator bad">Alto</span></td>
                                <td><span class="smell-indicator good">Bajo</span></td>
                            </tr>
                            <tr>
                                <td>Test Coverage</td>
                                <td><span class="smell-indicator bad">30-50%</span></td>
                                <td><span class="smell-indicator good">80-95%</span></td>
                            </tr>
                        </table>

                        <div class="card" style="margin-top: 20px;">
                            <h4>üõ†Ô∏è Herramientas de Medici√≥n</h4>
                            <ul class="list" style="font-size: 0.9em;">
                                <li>SonarCloud para code smells</li>
                                <li>NDepend para m√©tricas .NET</li>
                                <li>Coverlet para coverage</li>
                                <li>Stryker.NET para mutation testing</li>
                            </ul>
                        </div>
                    </div>
                    <div>
                        <h3>üß™ Testing Simplificado</h3>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="comment">// ANTES: Dif√≠cil de testear</span>
[<span class="type">Test</span>]
<span class="keyword">public void</span> <span class="method">CalculateShipping_WithMultipleProviders_ReturnsCorrectCost</span>()
{
    <span class="comment">// Necesita mockear todo el m√©todo gigante</span>
    <span class="keyword">var</span> calculator = <span class="keyword">new</span> <span class="type">ShippingCalculator</span>();
    <span class="comment">// Test complejo y fr√°gil...</span>
}

<span class="comment">// DESPU√âS: F√°cil de testear cada estrategia</span>
[<span class="type">Test</span>]
<span class="keyword">public void</span> <span class="method">FedExStrategy_Calculate_ReturnsWeightTimesPlusFlat</span>()
{
    <span class="keyword">var</span> strategy = <span class="keyword">new</span> <span class="type">FedExShippingStrategy</span>();
    <span class="keyword">var</span> order = <span class="keyword">new</span> <span class="type">Order</span> { WeightInKg = 2 };
    
    <span class="keyword">var</span> result = strategy.<span class="method">CalculateCost</span>(order);
    
    <span class="type">Assert</span>.<span class="method">AreEqual</span>(12m, result); <span class="comment">// 2 * 3.5 + 5</span>
}

[<span class="type">Test</span>]
<span class="keyword">public void</span> <span class="method">Calculator_WithMockStrategy_CallsStrategy</span>()
{
    <span class="keyword">var</span> mockStrategy = <span class="keyword">new</span> <span class="type">Mock</span>&lt;<span class="type">IShippingStrategy</span>&gt;();
    <span class="keyword">var</span> calculator = <span class="keyword">new</span> <span class="type">ShippingCalculator</span>();
    
    calculator.<span class="method">CalculateShippingCost</span>(order, mockStrategy.Object);
    
    mockStrategy.<span class="method">Verify</span>(s => s.<span class="method">CalculateCost</span>(order), <span class="type">Times</span>.Once);
}
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>üí° Beneficio Clave:</strong> Cada patr√≥n hace el c√≥digo m√°s testeable. Strategy permite mockear algoritmos, State permite testear transiciones, Polimorfismo permite testear cada tipo independientemente.</p>
                </div>
            </div>
            <div class="slide-number">17 / 24</div>
        </div>

        <!-- Slide 18: Cu√°ndo Usar Cada Patr√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>üéØ Cu√°ndo Usar Cada Patr√≥n</h2>
                <p class="subtitle">Checklist simple para estudiantes</p>
            </div>
            <div class="content">
                
                <!-- Quick Decision Checklist -->
                <div class="card" style="background: linear-gradient(135deg, rgba(0,123,255,0.1) 0%, rgba(40,167,69,0.1) 100%); margin-bottom: 25px;">
                    <h3 style="text-align: center; margin-bottom: 20px;">üö¶ DECISI√ìN R√ÅPIDA - Responde estas preguntas:</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                        <div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                <div style="font-weight: bold; color: #90ee90; margin-bottom: 8px;">‚ùì ¬øEs solo un mapeo?</div>
                                <div style="font-size: 0.9em;">¬øSolo necesitas convertir A ‚Üí B?</div>
                                <div style="color: #90ee90; font-weight: bold; margin-top: 5px;">‚úÖ S√ç ‚Üí Dictionary Pattern</div>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                                <div style="font-weight: bold; color: #ffd700; margin-bottom: 8px;">‚ùì ¬øSon diferentes algoritmos?</div>
                                <div style="font-size: 0.9em;">¬øLa l√≥gica cambia completamente?</div>
                                <div style="color: #ffd700; font-weight: bold; margin-top: 5px;">‚úÖ S√ç ‚Üí Strategy Pattern</div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                <div style="font-weight: bold; color: #ff6b6b; margin-bottom: 8px;">‚ùì ¬øHay estados y transiciones?</div>
                                <div style="font-size: 0.9em;">¬øEl comportamiento depende del estado?</div>
                                <div style="color: #ff6b6b; font-weight: bold; margin-top: 5px;">‚úÖ S√ç ‚Üí State Pattern</div>
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                                <div style="font-weight: bold; color: #87ceeb; margin-bottom: 8px;">‚ùì ¬øSon tipos relacionados?</div>
                                <div style="font-size: 0.9em;">¬øHerencia natural entre clases?</div>
                                <div style="color: #87ceeb; font-weight: bold; margin-top: 5px;">‚úÖ S√ç ‚Üí Polimorfismo</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Scenarios -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div class="card">
                        <h3>üü¢ USAR CUANDO...</h3>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="border-left: 4px solid #90ee90; padding-left: 12px;">
                                <div style="font-weight: bold; color: #90ee90;">Dictionary Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ Calculadora (operador ‚Üí funci√≥n)<br>
                                    ‚Ä¢ Men√∫ de opciones<br>
                                    ‚Ä¢ Configuraciones simples<br>
                                    ‚Ä¢ Factory b√°sico
                                </div>
                            </div>
                            
                            <div style="border-left: 4px solid #ffd700; padding-left: 12px;">
                                <div style="font-weight: bold; color: #ffd700;">Strategy Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ Sistema de precios complejos<br>
                                    ‚Ä¢ Algoritmos de ordenamiento<br>
                                    ‚Ä¢ Validadores con l√≥gica<br>
                                    ‚Ä¢ M√©todos de pago
                                </div>
                            </div>
                            
                            <div style="border-left: 4px solid #ff6b6b; padding-left: 12px;">
                                <div style="font-weight: bold; color: #ff6b6b;">State Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ Workflow de documentos<br>
                                    ‚Ä¢ Estados de pedido<br>
                                    ‚Ä¢ M√°quinas de estado<br>
                                    ‚Ä¢ Juegos con niveles
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>üî¥ NO USAR CUANDO...</h3>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <div style="border-left: 4px solid #ff6b6b; padding-left: 12px;">
                                <div style="font-weight: bold; color: #ff6b6b;">Dictionary Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ Necesitas validaciones complejas<br>
                                    ‚Ä¢ La l√≥gica tiene muchas condiciones<br>
                                    ‚Ä¢ Requires estado interno<br>
                                    ‚Ä¢ L√≥gica de negocio compleja
                                </div>
                            </div>
                            
                            <div style="border-left: 4px solid #ff6b6b; padding-left: 12px;">
                                <div style="font-weight: bold; color: #ff6b6b;">Strategy Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ Solo 2-3 opciones simples<br>
                                    ‚Ä¢ Los algoritmos nunca cambian<br>
                                    ‚Ä¢ Performance super cr√≠tica<br>
                                    ‚Ä¢ Mapeo directo sin l√≥gica
                                </div>
                            </div>
                            
                            <div style="border-left: 4px solid #ff6b6b; padding-left: 12px;">
                                <div style="font-weight: bold; color: #ff6b6b;">State Pattern</div>
                                <div style="font-size: 0.85em;">
                                    ‚Ä¢ No hay transiciones de estado<br>
                                    ‚Ä¢ Comportamiento no cambia<br>
                                    ‚Ä¢ Solo validaciones simples<br>
                                    ‚Ä¢ Estados independientes
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>üöÄ Nivel Avanzado</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                        <div style="border-left: 4px solid #ff6b6b; padding-left: 15px;">
                            <h4>üîÑ State Pattern</h4>
                            <p style="font-size: 0.85em; margin: 5px 0;">Workflows con transiciones</p>
                            <div class="highlight" style="font-size: 0.8em; padding: 8px;">
                                ‚úÖ Order processing, FSM<br>
                                ‚ùå Flags booleanos simples
                            </div>
                        </div>
                        <div style="border-left: 4px solid #ff6b6b; padding-left: 15px;">
                            <h4>üé≠ Polimorfismo</h4>
                            <p style="font-size: 0.85em; margin: 5px 0;">Elimina type checking</p>
                            <div class="highlight" style="font-size: 0.8em; padding: 8px;">
                                ‚úÖ Jerarqu√≠as naturales<br>
                                ‚ùå No hay relaci√≥n "es-un"
                            </div>
                        </div>
                        <div style="border-left: 4px solid #ff6b6b; padding-left: 15px;">
                            <h4>üëÅÔ∏è Visitor Pattern</h4>
                            <p style="font-size: 0.85em; margin: 5px 0;">M√∫ltiples operaciones en jerarqu√≠a</p>
                            <div class="highlight" style="font-size: 0.8em; padding: 8px;">
                                ‚úÖ Compiladores, AST<br>
                                ‚ùå Jerarqu√≠a cambia mucho
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">18 / 24</div>
        </div>

        <!-- Slide 19: Gu√≠a de Decisi√≥n Pr√°ctica -->
        <div class="slide">
            <div class="slide-header">
                <h2>üß≠ Gu√≠a de Decisi√≥n Pr√°ctica</h2>
                <p class="subtitle">Diagrama de flujo simple para decidir</p>
            </div>
            <div class="content">
                
                <!-- Flow Chart Style Decision Tree -->
                <div style="display: flex; flex-direction: column; gap: 20px; align-items: center;">
                    
                    <!-- Start -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 30px; border-radius: 25px; text-align: center; font-weight: bold; font-size: 1.1em;">
                        üöÄ EMPEZAR AQU√ç
                    </div>
                    
                    <!-- First Question -->
                    <div style="background: rgba(255,193,7,0.2); border: 3px solid #ffd700; padding: 20px; border-radius: 15px; text-align: center; max-width: 600px;">
                        <div style="font-weight: bold; font-size: 1.1em; margin-bottom: 10px;">‚ùì ¬øQu√© necesitas hacer?</div>
                        <div style="font-size: 0.95em; color: #666;">Piensa en tu problema espec√≠fico...</div>
                    </div>
                    
                    <!-- Decision Branches -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; width: 100%;">
                        
                        <!-- Branch 1: Simple Mapping -->
                        <div style="text-align: center;">
                            <div style="background: rgba(144,238,144,0.2); border: 2px solid #90ee90; padding: 20px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: #2d8659; margin-bottom: 10px;">üìã MAPEO SIMPLE</div>
                                <div style="font-size: 0.9em; margin-bottom: 15px;">
                                    "Necesito convertir algo directo:"<br>
                                    ‚Ä¢ Operador ‚Üí Funci√≥n<br>
                                    ‚Ä¢ C√≥digo ‚Üí Descripci√≥n<br>
                                    ‚Ä¢ Tipo ‚Üí Acci√≥n
                                </div>
                                <div style="background: #90ee90; color: white; padding: 10px; border-radius: 8px; font-weight: bold;">
                                    ‚úÖ Dictionary Pattern
                                </div>
                                <div style="font-size: 0.8em; margin-top: 8px; color: #666;">
                                    ‚è±Ô∏è 15 mins | üß† F√°cil
                                </div>
                            </div>
                        </div>
                        
                        <!-- Branch 2: Complex Logic -->
                        <div style="text-align: center;">
                            <div style="background: rgba(255,215,0,0.2); border: 2px solid #ffd700; padding: 20px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: #b8860b; margin-bottom: 10px;">‚ö° L√ìGICA COMPLEJA</div>
                                <div style="font-size: 0.9em; margin-bottom: 15px;">
                                    "La l√≥gica es diferente:"<br>
                                    ‚Ä¢ Algoritmos variables<br>
                                    ‚Ä¢ C√°lculos complejos<br>
                                    ‚Ä¢ Reglas de negocio
                                </div>
                                <div style="background: #ffd700; color: #333; padding: 10px; border-radius: 8px; font-weight: bold;">
                                    ‚úÖ Strategy Pattern
                                </div>
                                <div style="font-size: 0.8em; margin-top: 8px; color: #666;">
                                    ‚è±Ô∏è 45 mins | üß† Intermedio
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Second Row -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; width: 100%;">
                        
                        <!-- Branch 3: State Transitions -->
                        <div style="text-align: center;">
                            <div style="background: rgba(255,107,107,0.2); border: 2px solid #ff6b6b; padding: 20px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: #c92a2a; margin-bottom: 10px;">üîÑ ESTADOS & FLUJOS</div>
                                <div style="font-size: 0.9em; margin-bottom: 15px;">
                                    "Hay cambios de estado:"<br>
                                    ‚Ä¢ Workflow de docs<br>
                                    ‚Ä¢ Estados de pedido<br>
                                    ‚Ä¢ M√°quina de estado
                                </div>
                                <div style="background: #ff6b6b; color: white; padding: 10px; border-radius: 8px; font-weight: bold;">
                                    ‚úÖ State Pattern
                                </div>
                                <div style="font-size: 0.8em; margin-top: 8px; color: #666;">
                                    ‚è±Ô∏è 60 mins | üß† Avanzado
                                </div>
                            </div>
                        </div>
                        
                        <!-- Branch 4: Related Types -->
                        <div style="text-align: center;">
                            <div style="background: rgba(135,206,235,0.2); border: 2px solid #87ceeb; padding: 20px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="font-size: 1.1em; font-weight: bold; color: #4682b4; margin-bottom: 10px;">üë• TIPOS RELACIONADOS</div>
                                <div style="font-size: 0.9em; margin-bottom: 15px;">
                                    "Herencia natural:"<br>
                                    ‚Ä¢ Formas geom√©tricas<br>
                                    ‚Ä¢ Tipos de empleados<br>
                                    ‚Ä¢ Animales del zoo
                                </div>
                                <div style="background: #87ceeb; color: white; padding: 10px; border-radius: 8px; font-weight: bold;">
                                    ‚úÖ Polimorfismo
                                </div>
                                <div style="font-size: 0.8em; margin-top: 8px; color: #666;">
                                    ‚è±Ô∏è 30 mins | üß† B√°sico
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                </div>

                <!-- Quick Reference Card -->
                <div class="card" style="background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.3); margin-top: 25px;">
                    <h3 style="text-align: center; margin-bottom: 20px;">üéØ REGLAS DE ORO PARA ESTUDIANTES</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                        <div>
                            <div style="background: rgba(144,238,144,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; color: #90ee90; margin-bottom: 8px;">üü¢ EMPEZAR CON:</div>
                                <div style="font-size: 0.9em;">
                                    1. Dictionary si es mapeo directo<br>
                                    2. Polimorfismo si hay herencia<br>
                                    3. Strategy si la l√≥gica es diferente<br>
                                    4. State si hay transiciones
                                </div>
                            </div>
                        </div>
                        <div>
                            <div style="background: rgba(255,107,107,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; color: #ff6b6b; margin-bottom: 8px;">üî¥ EVITAR:</div>
                                <div style="font-size: 0.9em;">
                                    ‚Ä¢ Strategy para 2-3 casos simples<br>
                                    ‚Ä¢ State sin transiciones reales<br>
                                    ‚Ä¢ Dictionary para l√≥gica compleja<br>
                                    ‚Ä¢ Polimorfismo forzado
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px; font-style: italic; color: #a8a8b3;">
                        üí° <strong>Tip:</strong> Si tienes dudas, preg√∫ntate: "¬øEs simple o complejo?" y "¬øCambia el comportamiento o solo el valor?"
                    </div>
                </div>

                <!-- AI Assistant Section -->
                <div class="card" style="background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%); border: 2px solid rgba(102,126,234,0.3); margin-top: 25px;">
                    <h3 style="text-align: center; margin-bottom: 20px;">ü§ñ C√≥mo Usar IA como Herramienta de Aprendizaje</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;">
                        <div>
                            <h4 style="color: #90ee90; margin-bottom: 15px;">‚úÖ PROMPTS EFECTIVOS</h4>
                            <div style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üéØ Para An√°lisis de Patrones:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "Tengo este c√≥digo con muchos IF statements para calcular precios. ¬øQu√© preguntas debo hacerme para elegir entre Dictionary Pattern, Strategy Pattern o Factory? No me des la soluci√≥n, gu√≠ame con preguntas."
                                </div>
                            </div>

                            <div style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üîç Para Validaci√≥n de Decisiones:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "Creo que mi problema necesita Strategy Pattern porque [explica tu razonamiento]. ¬øEstoy en lo correcto? ¬øQu√© pros y contras deber√≠a considerar?"
                                </div>
                            </div>

                            <div style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 10px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üìö Para Aprendizaje Paso a Paso:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "Quiero refactorizar este c√≥digo usando [patr√≥n elegido]. Expl√≠came paso a paso QU√â hacer primero, no me escribas el c√≥digo. Quiero entender el proceso."
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: #ff6b6b; margin-bottom: 15px;">‚ùå EVITAR ESTOS PROMPTS</h4>
                            <div style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üö´ Demasiado Directo:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "Refactoriza este c√≥digo usando patrones NoIF"
                                </div>
                                <div style="font-size: 0.8em; color: #ff6b6b; margin-top: 5px;">
                                    ‚ùå No aprendes el proceso de decisi√≥n
                                </div>
                            </div>

                            <div style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üö´ Sin Contexto:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "¬øQu√© patr√≥n usar?"
                                </div>
                                <div style="font-size: 0.8em; color: #ff6b6b; margin-top: 5px;">
                                    ‚ùå Respuesta gen√©rica sin valor
                                </div>
                            </div>

                            <div style="background: rgba(255,107,107,0.2); padding: 15px; border-radius: 10px;">
                                <div style="font-weight: bold; margin-bottom: 8px;">üö´ Sin Esfuerzo:</div>
                                <div style="font-size: 0.85em; font-family: monospace; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                                    "Hazme los ejercicios de la clase"
                                </div>
                                <div style="font-size: 0.8em; color: #ff6b6b; margin-top: 5px;">
                                    ‚ùå Pierdes la oportunidad de aprender
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Workflow con IA -->
                    <div style="margin-top: 25px;">
                        <h4 style="text-align: center; margin-bottom: 15px;">üîÑ Workflow Recomendado: Aprende Con IA</h4>
                        <div style="display: flex; justify-content: center; gap: 30px; align-items: center;">
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; flex: 1;">
                                <div style="font-size: 1.2em; margin-bottom: 8px;">1Ô∏è‚É£</div>
                                <div style="font-weight: bold; margin-bottom: 5px;">ANALIZA T√ö PRIMERO</div>
                                <div style="font-size: 0.8em;">Identifica el problema y haz tu mejor intento de clasificarlo</div>
                            </div>
                            <div style="font-size: 1.5em;">‚Üí</div>
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; flex: 1;">
                                <div style="font-size: 1.2em; margin-bottom: 8px;">2Ô∏è‚É£</div>
                                <div style="font-weight: bold; margin-bottom: 5px;">PIDE GU√çA, NO SOLUCI√ìN</div>
                                <div style="font-size: 0.8em;">Usa la IA como mentor que te hace preguntas</div>
                            </div>
                            <div style="font-size: 1.5em;">‚Üí</div>
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; flex: 1;">
                                <div style="font-size: 1.2em; margin-bottom: 8px;">3Ô∏è‚É£</div>
                                <div style="font-weight: bold; margin-bottom: 5px;">VALIDA TU DECISI√ìN</div>
                                <div style="font-size: 0.8em;">Confirma si tu razonamiento es correcto</div>
                            </div>
                            <div style="font-size: 1.5em;">‚Üí</div>
                            <div style="text-align: center; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; flex: 1;">
                                <div style="font-size: 1.2em; margin-bottom: 8px;">4Ô∏è‚É£</div>
                                <div style="font-weight: bold; margin-bottom: 5px;">IMPLEMENTA T√ö</div>
                                <div style="font-size: 0.8em;">Escribe el c√≥digo y pide review despu√©s</div>
                            </div>
                        </div>
                    </div>

                    <!-- Ejemplos Pr√°cticos -->
                    <div style="margin-top: 25px;">
                        <h4 style="text-align: center; margin-bottom: 15px;">üí¨ Ejemplos de Conversaci√≥n Efectiva</h4>
                        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; font-size: 0.8em;">
                            <div style="color: #87ceeb; font-weight: bold;">üë®‚Äçüíª Estudiante:</div>
                            <div style="margin: 5px 0; font-family: monospace;">"Tengo un sistema que calcula comisiones bancarias. Hay 5 tipos de cuenta con reglas diferentes. ¬øDeber√≠a usar Dictionary o Strategy? Mi an√°lisis: creo que Strategy porque las reglas son complejas, pero no estoy seguro."</div>
                            
                            <div style="color: #90ee90; font-weight: bold; margin-top: 15px;">ü§ñ IA:</div>
                            <div style="margin: 5px 0; font-style: italic;">"Buen an√°lisis inicial. Para ayudarte a decidir: ¬øLas reglas son simples mapeos (ej: TipoCuenta ‚Üí Porcentaje) o hay l√≥gica compleja (ej: c√°lculos con m√∫ltiples variables, validaciones, condiciones)? ¬øCrees que podr√≠an cambiar frecuentemente?"</div>
                            
                            <div style="color: #87ceeb; font-weight: bold; margin-top: 15px;">üë®‚Äçüíª Estudiante:</div>
                            <div style="margin: 5px 0; font-family: monospace;">"Las reglas incluyen validaciones de saldo m√≠nimo, c√°lculos con rango de montos, y bonificaciones por antig√ºedad. S√≠, el banco cambia las reglas cada 6 meses."</div>
                            
                            <div style="color: #90ee90; font-weight: bold; margin-top: 15px;">ü§ñ IA:</div>
                            <div style="margin: 5px 0; font-style: italic;">"Perfecto! Identificaste: l√≥gica compleja + cambios frecuentes = Strategy Pattern. ¬øPuedes dise√±ar la interface ICommissionStrategy? ¬øQu√© m√©todo(s) tendr√≠a?"</div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 20px; background: rgba(255,193,7,0.2); padding: 10px; border-radius: 8px;">
                        <strong>üéØ Recuerda:</strong> La IA es tu <em>sparring partner</em>, no tu reemplazo. √ösala para validar tu razonamiento, no para evitar pensar.
                    </div>
                </div>
            </div>
            <div class="slide-number">19 / 24</div>
        </div>

        <!-- Slide 20: Ejercicios Pr√°cticos -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicios Pr√°cticos</h2>
                <p class="subtitle">Aplica lo aprendido</p>
            </div>
            <div class="content" style="overflow-y: auto;">
                <div class="card">
                    <h3>üèãÔ∏è Ejercicio 1: Identificar Patr√≥n Correcto</h3>
                    <p>Analiza cada escenario y selecciona el patr√≥n m√°s apropiado:</p>
                    <div class="grid" style="margin-top: 15px; font-size: 0.9em;">
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px;">
                            <p><strong>A)</strong> Sistema de notificaciones que env√≠a por email, SMS, push o Slack seg√∫n configuraci√≥n del usuario.</p>
                            <p style="margin-top: 10px; color: #a8a8b3;"><em>¬øDictionary, Strategy, State o Polimorfismo?</em></p>
                        </div>
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px;">
                            <p><strong>B)</strong> Pedido de e-commerce: Pendiente ‚Üí Confirmado ‚Üí Enviado ‚Üí Entregado, con acciones espec√≠ficas en cada estado.</p>
                            <p style="margin-top: 10px; color: #a8a8b3;"><em>¬øDictionary, Strategy, State o Polimorfismo?</em></p>
                        </div>
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px;">
                            <p><strong>C)</strong> Calculadora de impuestos para Argentina, M√©xico, Colombia con l√≥gicas muy diferentes.</p>
                            <p style="margin-top: 10px; color: #a8a8b3;"><em>¬øDictionary, Strategy, State o Polimorfismo?</em></p>
                        </div>
                        <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 8px;">
                            <p><strong>D)</strong> Sistema de reportes que calcula m√©tricas diferentes: Orders, Customers, Revenue, Inventory.</p>
                            <p style="margin-top: 10px; color: #a8a8b3;"><em>¬øDictionary, Strategy, State o Polimorfismo?</em></p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üî® Ejercicio 2: Refactoring Challenge</h3>
                    <p>Refactoriza este c√≥digo de un sistema de descuentos:</p>
                    <div class="code-block bad" style="font-size: 0.8em; margin-top: 10px;">
<span class="keyword">public class</span> <span class="type">DiscountCalculator</span>
{
    <span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order)
    {
        <span class="keyword">if</span> (customer.Type == <span class="string">"VIP"</span> && order.Amount > 1000)
            <span class="keyword">return</span> order.Amount * 0.20m;
        <span class="keyword">else if</span> (customer.Type == <span class="string">"VIP"</span>)
            <span class="keyword">return</span> order.Amount * 0.15m;
        <span class="keyword">else if</span> (customer.Type == <span class="string">"Premium"</span> && customer.YearsActive > 5)
            <span class="keyword">return</span> order.Amount * 0.12m;
        <span class="keyword">else if</span> (customer.Type == <span class="string">"Premium"</span>)
            <span class="keyword">return</span> order.Amount * 0.08m;
        <span class="keyword">else if</span> (order.Amount > 500)
            <span class="keyword">return</span> order.Amount * 0.05m;
        <span class="keyword">else</span>
            <span class="keyword">return</span> 0;
    }
}
                    </div>
                    <p style="margin-top: 15px;"><strong>Tareas:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>1. Dise√±a las clases necesarias usando Strategy pattern</li>
                        <li>2. Crea un factory para seleccionar la estrategia correcta</li>
                        <li>3. Escribe tests unitarios para cada estrategia</li>
                        <li>4. Bonus: Usa Dictionary para mapear tipos a estrategias</li>
                    </ul>
                </div>

                <div class="card">
                    <h3>üöÄ Ejercicio 3: Sistema Completo</h3>
                    <p><strong>Dise√±a un procesador de transacciones bancarias que:</strong></p>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Valide transacciones seg√∫n el tipo (Transferencia, Pago, Dep√≥sito)</li>
                        <li>Cada tipo tiene reglas de validaci√≥n diferentes</li>
                        <li>Las transacciones pasan por estados: Pendiente ‚Üí Procesando ‚Üí Completada/Rechazada</li>
                        <li>Cada estado permite diferentes operaciones</li>
                        <li>Debe enviar notificaciones por el canal preferido del usuario</li>
                    </ol>
                    <p style="margin-top: 15px;"><strong>Combina:</strong> Strategy (validaciones), State (estados), Dictionary (notificaciones)</p>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #a8a8b3;"><em>Tiempo: 30 minutos | Presentaci√≥n: 10 minutos por equipo</em></p>
                </div>

                <!-- Soluciones -->
                <div class="card">
                    <h3>üí° Soluciones Ejercicio 1</h3>
                    <div style="margin-top: 15px;">
                        <button onclick="requestSolution('solution1')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
                            üîì Ver Respuestas (Requiere Clave)
                        </button>
                        
                        <!-- Loader -->
                        <div id="loader1" class="solution-loader">
                            <div class="spinner"></div>
                            <p>Verificando acceso...</p>
                        </div>
                        
                        <!-- Protected Solution -->
                        <div id="solution1" class="protected-solution" style="margin-top: 15px; font-size: 0.9em;">
                            <div style="padding: 15px; background: rgba(144,238,144,0.1); border-radius: 10px; border-left: 4px solid #90ee90;">
                                <h4 style="color: #90ee90; margin-bottom: 10px;">‚úÖ Respuestas Correctas:</h4>
                                <p><strong>A) Notificaciones:</strong> <span class="smell-indicator good">Dictionary</span> - Mapeo simple canal ‚Üí implementaci√≥n</p>
                                <p><strong>B) Estados de Pedido:</strong> <span class="smell-indicator good">State</span> - Comportamiento cambia por estado con transiciones</p>
                                <p><strong>C) Impuestos por Pa√≠s:</strong> <span class="smell-indicator good">Strategy</span> - Algoritmos complejos intercambiables</p>
                                <p><strong>D) M√©tricas de Reportes:</strong> <span class="smell-indicator good">Polimorfismo</span> - Jerarqu√≠a natural de tipos de reporte</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üí° Soluci√≥n Ejercicio 2: Refactoring</h3>
                    <div style="margin-top: 15px;">
                        <button onclick="requestSolution('solution2')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
                            üîì Ver Soluci√≥n Completa (Requiere Clave)
                        </button>
                        
                        <!-- Loader -->
                        <div id="loader2" class="solution-loader">
                            <div class="spinner"></div>
                            <p>Cargando soluci√≥n detallada...</p>
                        </div>
                        
                        <!-- Protected Solution -->
                        <div id="solution2" class="protected-solution" style="margin-top: 15px;">
                            <h4>Paso 1: Interface y Strategies</h4>
                            <div class="code-block good" style="font-size: 0.75em; margin-top: 10px;">
<span class="keyword">public interface</span> <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order);
    <span class="keyword">string</span> CustomerType { <span class="keyword">get</span>; }
}

<span class="keyword">public class</span> <span class="type">VipDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public string</span> CustomerType => <span class="string">"VIP"</span>;
    
    <span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order)
    {
        <span class="keyword">return</span> order.Amount > 1000 ? order.Amount * 0.20m : order.Amount * 0.15m;
    }
}

<span class="keyword">public class</span> <span class="type">PremiumDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public string</span> CustomerType => <span class="string">"Premium"</span>;
    
    <span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order)
    {
        <span class="keyword">return</span> customer.YearsActive > 5 ? order.Amount * 0.12m : order.Amount * 0.08m;
    }
}

<span class="keyword">public class</span> <span class="type">StandardDiscountStrategy</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public string</span> CustomerType => <span class="string">"Standard"</span>;
    
    <span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order)
    {
        <span class="keyword">return</span> order.Amount > 500 ? order.Amount * 0.05m : 0;
    }
}
                            </div>
                            
                            <h4>Paso 2: Calculator Refactorizado</h4>
                            <div class="code-block good" style="font-size: 0.75em; margin-top: 10px;">
<span class="keyword">public class</span> <span class="type">DiscountCalculator</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">IDiscountStrategy</span>&gt; _strategies;

    <span class="keyword">public</span> <span class="method">DiscountCalculator</span>()
    {
        _strategies = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">IDiscountStrategy</span>&gt;
        {
            [<span class="string">"VIP"</span>] = <span class="keyword">new</span> <span class="type">VipDiscountStrategy</span>(),
            [<span class="string">"Premium"</span>] = <span class="keyword">new</span> <span class="type">PremiumDiscountStrategy</span>(),
            [<span class="string">"Standard"</span>] = <span class="keyword">new</span> <span class="type">StandardDiscountStrategy</span>()
        };
    }

    <span class="keyword">public decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Customer</span> customer, <span class="type">Order</span> order)
    {
        <span class="keyword">var</span> strategy = _strategies.GetValueOrDefault(customer.Type) 
                        ?? _strategies[<span class="string">"Standard"</span>];
        <span class="keyword">return</span> strategy.CalculateDiscount(customer, order);
    }
}
                            </div>

                            <h4>Paso 3: Tests Unitarios</h4>
                            <div class="code-block" style="font-size: 0.7em; margin-top: 10px;">
[<span class="type">Test</span>]
<span class="keyword">public void</span> <span class="method">VipStrategy_HighAmount_Returns20Percent</span>()
{
    <span class="comment">// Arrange</span>
    <span class="keyword">var</span> strategy = <span class="keyword">new</span> <span class="type">VipDiscountStrategy</span>();
    <span class="keyword">var</span> customer = <span class="keyword">new</span> <span class="type">Customer</span> { Type = <span class="string">"VIP"</span> };
    <span class="keyword">var</span> order = <span class="keyword">new</span> <span class="type">Order</span> { Amount = 1500m };

    <span class="comment">// Act</span>
    <span class="keyword">var</span> result = strategy.CalculateDiscount(customer, order);

    <span class="comment">// Assert</span>
    <span class="type">Assert</span>.AreEqual(300m, result); <span class="comment">// 1500 * 0.20</span>
}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>üí° Soluci√≥n Ejercicio 3: Sistema Completo</h3>
                    <div style="margin-top: 15px;">
                        <button onclick="requestSolution('solution3')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.3s ease;">
                            üîì Ver Arquitectura de Soluci√≥n (Requiere Clave)
                        </button>
                        
                        <!-- Loader -->
                        <div id="loader3" class="solution-loader">
                            <div class="spinner"></div>
                            <p>Construyendo arquitectura...</p>
                        </div>
                        
                        <!-- Protected Solution -->
                        <div id="solution3" class="protected-solution" style="margin-top: 15px;">
                            <h4>Componentes del Sistema</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; font-size: 0.85em;">
                                <div>
                                    <h5 style="color: #ffd700;">üîπ Strategy: Validaciones</h5>
                                    <div class="code-block" style="font-size: 0.7em;">
<span class="keyword">public interface</span> <span class="type">ITransactionValidator</span>
{
    <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">Transaction</span> transaction);
    <span class="keyword">string</span> TransactionType { <span class="keyword">get</span>; }
}

<span class="keyword">public class</span> <span class="type">TransferValidator</span> : <span class="type">ITransactionValidator</span>
{
    <span class="keyword">public string</span> TransactionType => <span class="string">"Transfer"</span>;
    
    <span class="keyword">public</span> <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">Transaction</span> t)
    {
        <span class="comment">// Validar saldo, cuentas, l√≠mites</span>
        <span class="keyword">return new</span> <span class="type">ValidationResult</span> { IsValid = <span class="keyword">true</span> };
    }
}
                                    </div>
                                </div>
                                
                                <div>
                                    <h5 style="color: #ff6b6b;">üîπ State: Estados</h5>
                                    <div class="code-block" style="font-size: 0.7em;">
<span class="keyword">public interface</span> <span class="type">ITransactionState</span>
{
    <span class="keyword">void</span> <span class="method">Process</span>(<span class="type">Transaction</span> transaction);
    <span class="keyword">void</span> <span class="method">Cancel</span>(<span class="type">Transaction</span> transaction);
    <span class="keyword">string</span> StateName { <span class="keyword">get</span>; }
}

<span class="keyword">public class</span> <span class="type">PendingState</span> : <span class="type">ITransactionState</span>
{
    <span class="keyword">public string</span> StateName => <span class="string">"Pending"</span>;
    
    <span class="keyword">public void</span> <span class="method">Process</span>(<span class="type">Transaction</span> t)
    {
        <span class="comment">// Cambiar a ProcessingState</span>
        t.SetState(<span class="keyword">new</span> <span class="type">ProcessingState</span>());
    }
}
                                    </div>
                                </div>
                            </div>

                            <h4>Integraci√≥n Completa</h4>
                            <div class="code-block" style="font-size: 0.7em; margin-top: 15px;">
<span class="keyword">public class</span> <span class="type">TransactionProcessor</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">ITransactionValidator</span>&gt; _validators;
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">INotificationChannel</span>&gt; _channels;

    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">ProcessResult</span>&gt; <span class="method">ProcessTransaction</span>(<span class="type">Transaction</span> transaction)
    {
        <span class="comment">// 1. Strategy: Validar seg√∫n tipo</span>
        <span class="keyword">var</span> validator = _validators[transaction.Type];
        <span class="keyword">var</span> validation = validator.Validate(transaction);
        
        <span class="keyword">if</span> (!validation.IsValid)
            <span class="keyword">return</span> <span class="type">ProcessResult</span>.Failed(validation.Errors);

        <span class="comment">// 2. State: Procesar seg√∫n estado actual</span>
        transaction.Process();

        <span class="comment">// 3. Dictionary: Notificar por canal preferido</span>
        <span class="keyword">var</span> channel = _channels[transaction.User.PreferredChannel];
        <span class="keyword">await</span> channel.SendAsync($<span class="string">"Transacci√≥n {transaction.Id} procesada"</span>);

        <span class="keyword">return</span> <span class="type">ProcessResult</span>.Success();
    }
}
                            </div>

                            <div class="highlight" style="margin-top: 15px; text-align: center; font-size: 0.85em;">
                                <strong>üéØ Resultado:</strong> Sistema flexible que combina 3 patrones sin IF statements complejos
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">20 / 24</div>
        </div>

        <!-- Slide 21: Evoluci√≥n y Patrones Avanzados -->
        <div class="slide">
            <div class="slide-header">
                <h2>Evoluci√≥n: Patrones Avanzados</h2>
                <p class="subtitle">El siguiente nivel en tu journey</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üîó Chain of Responsibility</h3>
                        <p style="margin-bottom: 15px;">Evoluci√≥n natural de m√∫ltiples validaciones secuenciales</p>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">public abstract class</span> <span class="type">ValidationHandler</span>
{
    <span class="keyword">protected</span> <span class="type">ValidationHandler</span> _next;
    
    <span class="keyword">public</span> <span class="type">ValidationHandler</span> <span class="method">SetNext</span>(<span class="type">ValidationHandler</span> next)
    {
        _next = next;
        <span class="keyword">return</span> next;
    }
    
    <span class="keyword">public virtual</span> <span class="type">ValidationResult</span> <span class="method">Handle</span>(<span class="type">Request</span> request)
    {
        <span class="keyword">var</span> result = <span class="method">Validate</span>(request);
        <span class="keyword">if</span> (result.IsValid && _next != <span class="keyword">null</span>)
            <span class="keyword">return</span> _next.<span class="method">Handle</span>(request);
        <span class="keyword">return</span> result;
    }
    
    <span class="keyword">protected abstract</span> <span class="type">ValidationResult</span> <span class="method">Validate</span>(<span class="type">Request</span> request);
}
                        </div>
                    </div>
                    <div class="card">
                        <h3>üé≠ Decorator Pattern</h3>
                        <p style="margin-bottom: 15px;">Agregar funcionalidad sin modificar c√≥digo base</p>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">public class</span> <span class="type">CachedPaymentGateway</span> : <span class="type">IPaymentGateway</span>
{
    <span class="keyword">private readonly</span> <span class="type">IPaymentGateway</span> _gateway;
    <span class="keyword">private readonly</span> <span class="type">IMemoryCache</span> _cache;
    
    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">PaymentResult</span>&gt; <span class="method">ProcessAsync</span>(<span class="type">PaymentRequest</span> request)
    {
        <span class="keyword">var</span> cacheKey = $<span class="string">"payment_{request.Id}"</span>;
        <span class="keyword">if</span> (_cache.<span class="method">TryGetValue</span>(cacheKey, <span class="keyword">out</span> <span class="type">PaymentResult</span> cached))
            <span class="keyword">return</span> cached;
            
        <span class="keyword">var</span> result = <span class="keyword">await</span> _gateway.<span class="method">ProcessAsync</span>(request);
        _cache.<span class="method">Set</span>(cacheKey, result, <span class="type">TimeSpan</span>.<span class="method">FromMinutes</span>(5));
        <span class="keyword">return</span> result;
    }
}

<span class="comment">// Uso: wrapping m√∫ltiple</span>
<span class="type">IPaymentGateway</span> gateway = <span class="keyword">new</span> <span class="type">StripeGateway</span>();
gateway = <span class="keyword">new</span> <span class="type">CachedPaymentGateway</span>(gateway);
gateway = <span class="keyword">new</span> <span class="type">LoggedPaymentGateway</span>(gateway);
gateway = <span class="keyword">new</span> <span class="type">MetricsPaymentGateway</span>(gateway);
                        </div>
                    </div>
                    <div class="card">
                        <h3>üè≠ Abstract Factory</h3>
                        <p style="margin-bottom: 15px;">Crear familias de objetos relacionados</p>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">public interface</span> <span class="type">IFinancialServiceFactory</span>
{
    <span class="type">IPaymentGateway</span> <span class="method">CreatePaymentGateway</span>();
    <span class="type">IFraudDetector</span> <span class="method">CreateFraudDetector</span>();
    <span class="type">IComplianceValidator</span> <span class="method">CreateComplianceValidator</span>();
}

<span class="keyword">public class</span> <span class="type">ArgentinaFinancialFactory</span> : <span class="type">IFinancialServiceFactory</span>
{
    <span class="keyword">public</span> <span class="type">IPaymentGateway</span> <span class="method">CreatePaymentGateway</span>() 
        => <span class="keyword">new</span> <span class="type">CoelsaGateway</span>();
        
    <span class="keyword">public</span> <span class="type">IFraudDetector</span> <span class="method">CreateFraudDetector</span>() 
        => <span class="keyword">new</span> <span class="type">BCRAFraudDetector</span>();
        
    <span class="keyword">public</span> <span class="type">IComplianceValidator</span> <span class="method">CreateComplianceValidator</span>() 
        => <span class="keyword">new</span> <span class="type">CNVValidator</span>();
}

<span class="keyword">public class</span> <span class="type">USAFinancialFactory</span> : <span class="type">IFinancialServiceFactory</span>
{
    <span class="comment">// Implementa servicios espec√≠ficos de USA</span>
}
                        </div>
                    </div>
                    <div class="card">
                        <h3>üìã Command Pattern</h3>
                        <p style="margin-bottom: 15px;">Encapsular requests como objetos, √∫til para CQRS</p>
                        <div class="code-block" style="font-size: 0.8em;">
<span class="keyword">public interface</span> <span class="type">ICommand</span>&lt;<span class="type">TResult</span>&gt;
{
    <span class="type">Task</span>&lt;<span class="type">TResult</span>&gt; <span class="method">ExecuteAsync</span>();
}

<span class="keyword">public class</span> <span class="type">ProcessPaymentCommand</span> : <span class="type">ICommand</span>&lt;<span class="type">PaymentResult</span>&gt;
{
    <span class="keyword">private readonly</span> <span class="type">PaymentRequest</span> _request;
    <span class="keyword">private readonly</span> <span class="type">IPaymentGateway</span> _gateway;
    
    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">PaymentResult</span>&gt; <span class="method">ExecuteAsync</span>()
    {
        <span class="comment">// L√≥gica de procesamiento</span>
        <span class="keyword">return await</span> _gateway.<span class="method">ProcessAsync</span>(_request);
    }
}

<span class="comment">// Command Bus para manejo centralizado</span>
<span class="keyword">public class</span> <span class="type">CommandBus</span>
{
    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">TResult</span>&gt; <span class="method">ExecuteAsync</span>&lt;<span class="type">TResult</span>&gt;(<span class="type">ICommand</span>&lt;<span class="type">TResult</span>&gt; command)
    {
        <span class="comment">// Logging, validation, metrics</span>
        <span class="keyword">return await</span> command.<span class="method">ExecuteAsync</span>();
    }
}
                        </div>
                    </div>
                </div>

                <div class="highlight">
                    <p><strong>üîÑ Evoluci√≥n Natural:</strong> Dictionary ‚Üí Strategy ‚Üí Strategy + Factory ‚Üí Abstract Factory + DI Container ‚Üí CQRS + Event Sourcing</p>
                </div>
            </div>
            <div class="slide-number">21 / 24</div>
        </div>

        <!-- Slide 22: Conclusiones -->
        <div class="slide">
            <div class="slide-header">
                <h2>Conclusiones y Pr√≥ximos Pasos</h2>
            </div>
            <div class="content">
                <div class="card" style="text-align: center; max-width: 800px; margin: 0 auto;">
                    <h3>üéØ Conceptos Clave Dominados</h3>
                    <div style="text-align: left; margin-top: 30px;">
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Dictionary Pattern:</strong> Elimina switch statements con mapeos simples</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Strategy Pattern:</strong> Encapsula algoritmos intercambiables</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>State Pattern:</strong> Gestiona comportamiento basado en estado interno</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Polimorfismo:</strong> Elimina type checking con jerarqu√≠as naturales</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Principios SOLID:</strong> Open/Closed en acci√≥n pr√°ctica</p>
                    </div>
                </div>
                
                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>üìö Recursos para Profundizar</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>"Refactoring" - Martin Fowler</li>
                            <li>"Design Patterns" - Gang of Four</li>
                            <li>"Clean Code" - Robert Martin</li>
                            <li>"refactoring.guru" - Patrones visuales</li>
                            <li>"Effective C#" - Bill Wagner</li>
                            <li>"Architecture Patterns with Python" - Percival & Gregory</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üéØ Plan de Acci√≥n</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Identifica un switch en tu c√≥digo actual</li>
                            <li>Refactoriza usando Dictionary pattern</li>
                            <li>Busca if-else complejos para Strategy</li>
                            <li>Encuentra m√°quinas de estado para State pattern</li>
                            <li>Detecta type checking para Polimorfismo</li>
                            <li>Mide impacto: complejidad y testabilidad</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üöÄ Siguientes Niveles</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Chain of Responsibility para validaciones</li>
                            <li>Decorator para funcionalidad cross-cutting</li>
                            <li>Command + CQRS para arquitecturas complejas</li>
                            <li>Event Sourcing para auditabilidad</li>
                            <li>Microservices con Domain-Driven Design</li>
                            <li>Reactive Programming con observables</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üí∞ ROI en Fintech</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Menos bugs en sistemas cr√≠ticos</li>
                            <li>Onboarding m√°s r√°pido de nuevos devs</li>
                            <li>Features de compliance m√°s √°giles</li>
                            <li>Integraci√≥n con nuevos gateways sin fricci√≥n</li>
                            <li>Auditor√≠as de c√≥digo m√°s f√°ciles</li>
                            <li>Escalabilidad autom√°tica del equipo</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight" style="margin-top: 40px;">
                    <p style="text-align: center; font-size: 1.2em;">
                        <strong>"El c√≥digo excelente no es el que funciona, sino el que se puede entender, modificar y extender con confianza."</strong>
                    </p>
                    <p style="text-align: center; margin-top: 10px; color: #a8a8b3;">‚Äî Martin Fowler, adaptado</p>
                </div>
            </div>
            <div class="slide-number">22 / 24</div>
        </div>

    <!-- Instructor Info -->
    <div class="instructor-info">
        <div class="instructor-name">Alejandro Sfrede</div>
        <div class="instructor-title">√Årea de Arquitectura</div>
    </div>

    <!-- Password Modal -->
    <div id="passwordModal" class="password-modal">
        <div class="modal-content">
            <h3>üîê Acceso a Soluciones</h3>
            <p style="margin-bottom: 20px; color: #a8a8b3;">
                Para acceder a las soluciones, ingresa la clave que te proporcion√≥ el instructor:
            </p>
            <input type="password" id="passwordInput" class="password-input" placeholder="Ingresa la clave de acceso">
            <div id="passwordMessage" class="error-message" style="display: none;"></div>
            <div class="modal-buttons">
                <button id="confirmPassword" class="modal-btn modal-btn-confirm">üîì Acceder</button>
                <button id="cancelPassword" class="modal-btn modal-btn-cancel">‚ùå Cancelar</button>
            </div>
            <div style="margin-top: 20px; font-size: 0.8em; color: #666;">
                üí° <strong>Tip:</strong> Si no conoces la clave, consulta con tu instructor
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="navigation">
        <button class="nav-btn" onclick="previousSlide()" id="prevBtn">
            <span>‚Üê</span> Anterior
        </button>
        <button class="nav-btn" onclick="nextSlide()" id="nextBtn">
            Siguiente <span>‚Üí</span>
        </button>
        <button class="nav-btn" onclick="goHome()" style="background: rgba(102, 126, 234, 0.3);">
            üè† Portal
        </button>
    </div>

    <!-- Navigation Hints -->
    <div class="nav-hints" id="navHints">
        Use ‚Üê ‚Üí o Space para navegar
    </div>

    <!-- Slide Counter -->
    <div class="slide-counter">
        <span id="currentSlide">1</span> / <span id="totalSlides">20</span>
    </div>
    </div>

    <script>
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        document.getElementById('totalSlides').textContent = totalSlides;

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            document.getElementById('currentSlide').textContent = index + 1;
            
            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === totalSlides - 1;
            
            // Show navigation hints briefly
            showNavHints();
        }

        function showNavHints() {
            const hints = document.getElementById('navHints');
            hints.classList.add('show');
            setTimeout(() => {
                hints.classList.remove('show');
            }, 2000);
        }

        function goHome() {
            window.location.href = '../index.html';
        }

        function nextSlide() {
            if (currentSlideIndex < totalSlides - 1) {
                currentSlideIndex++;
                showSlide(currentSlideIndex);
            }
        }

        function previousSlide() {
            if (currentSlideIndex > 0) {
                currentSlideIndex--;
                showSlide(currentSlideIndex);
            }
        }

        // Enhanced keyboard navigation (PowerPoint-style)
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowRight':
                case ' ':
                case 'PageDown':
                case 'Enter':
                    e.preventDefault();
                    nextSlide();
                    break;
                case 'ArrowLeft':
                case 'PageUp':
                case 'Backspace':
                    e.preventDefault();
                    previousSlide();
                    break;
                case 'Home':
                    e.preventDefault();
                    currentSlideIndex = 0;
                    showSlide(currentSlideIndex);
                    break;
                case 'End':
                    e.preventDefault();
                    currentSlideIndex = totalSlides - 1;
                    showSlide(currentSlideIndex);
                    break;
                case 'Escape':
                    e.preventDefault();
                    goHome();
                    break;
            }
        });

        // Touch navigation for mobile
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;
            
            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    nextSlide(); // Swipe left - next slide
                } else {
                    previousSlide(); // Swipe right - previous slide
                }
            }
        }

        // Initialize
        showSlide(0);

        // ===== SOLUTION PROTECTION SYSTEM =====
        
        let activeSolutionTarget = null;
        const authTokens = [
            String.fromCharCode(102,105,110,116,101,120,97,49),
            String.fromCharCode(102,105,110,116,101,120,97,50), 
            String.fromCharCode(102,105,110,116,101,120,97,51)
        ];

        function requestSolution(solutionId) {
            console.log('Requesting solution:', solutionId);
            activeSolutionTarget = solutionId;
            
            // Show loader first
            const loaderId = `loader${solutionId.slice(-1)}`;
            const loader = document.getElementById(loaderId);
            console.log('Looking for loader:', loaderId, loader);
            
            if (loader) {
                loader.style.display = 'block';
            }
            
            // Simulate loading delay
            setTimeout(() => {
                if (loader) {
                    loader.style.display = 'none';
                }
                showPasswordModal();
            }, 2000);
        }

        function showPasswordModal() {
            const modal = document.getElementById('passwordModal');
            const passwordInput = document.getElementById('passwordInput');
            const messageDiv = document.getElementById('passwordMessage');
            
            modal.classList.add('show');
            passwordInput.value = '';
            messageDiv.style.display = 'none';
            
            // Focus after animation
            setTimeout(() => {
                passwordInput.focus();
            }, 100);
        }

        function hidePasswordModal() {
            const modal = document.getElementById('passwordModal');
            modal.classList.remove('show');
            activeSolutionTarget = null;
        }

        function checkPassword() {
            const userInput = document.getElementById('passwordInput').value.toLowerCase().trim();
            const messageDiv = document.getElementById('passwordMessage');
            
            console.log('Validating access token...');
            console.log('Target:', activeSolutionTarget);
            
            if (authTokens.includes(userInput)) {
                messageDiv.style.display = 'block';
                messageDiv.className = 'success-message';
                messageDiv.textContent = '‚úÖ Acceso concedido! Cargando soluci√≥n...';
                
                // Store the target before clearing it
                const targetSolution = activeSolutionTarget;
                
                setTimeout(() => {
                    hidePasswordModal();
                    showSolution(targetSolution);
                }, 1500);
            } else {
                messageDiv.style.display = 'block';
                messageDiv.className = 'error-message';
                messageDiv.innerHTML = `
                    ‚ùå Clave incorrecta.<br>
                    <small>Pista: La clave es "fintexa" seguido de un n√∫mero del 1 al 3</small>
                `;
            }
        }

        function showSolution(solutionId) {
            console.log('Showing solution for:', solutionId);
            
            const solutionDiv = document.getElementById(solutionId);
            if (!solutionDiv) {
                console.error('Solution div not found:', solutionId);
                return;
            }
            
            console.log('Solution div found:', solutionDiv);
            console.log('Current display:', window.getComputedStyle(solutionDiv).display);
            console.log('Has protected-solution class:', solutionDiv.classList.contains('protected-solution'));
            
            // Find the button by looking in the parent container
            const parentDiv = solutionDiv.parentElement;
            const button = parentDiv.querySelector('button[onclick*="' + solutionId + '"]');
            
            if (button) {
                console.log('Hiding button:', button);
                button.style.display = 'none';
            } else {
                console.log('Button not found for:', solutionId);
            }
            
            // Remove the protected-solution class first (this removes display: none)
            solutionDiv.classList.remove('protected-solution');
            
            // Force show the solution div with important and add styles
            solutionDiv.style.cssText = 'display: block !important; visibility: visible !important; opacity: 0; transform: translateY(20px); transition: all 0.5s ease;';
            
            console.log('After style changes - display:', window.getComputedStyle(solutionDiv).display);
            console.log('After style changes - visibility:', window.getComputedStyle(solutionDiv).visibility);
            
            // Check if solution already has the success header
            const existingHeader = solutionDiv.querySelector('[data-success-header]');
            if (!existingHeader) {
                // Add success header first
                const successHeader = document.createElement('div');
                successHeader.setAttribute('data-success-header', 'true');
                successHeader.innerHTML = `
                    <div style="background: rgba(144,238,144,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; border: 2px solid #90ee90;">
                        <h4 style="color: #90ee90; margin: 0;">üîì Acceso Autorizado - Soluci√≥n Desbloqueada</h4>
                        <p style="margin: 5px 0 0 0; font-size: 0.9em; color: #a8a8b3;">Ahora puedes ver la soluci√≥n completa</p>
                    </div>
                `;
                solutionDiv.insertBefore(successHeader, solutionDiv.firstChild);
            }
            
            // Animate in with a small delay to ensure the DOM has updated
            requestAnimationFrame(() => {
                setTimeout(() => {
                    solutionDiv.style.opacity = '1';
                    solutionDiv.style.transform = 'translateY(0)';
                    console.log('Animation completed for:', solutionId);
                    console.log('Final display state:', window.getComputedStyle(solutionDiv).display);
                }, 50);
            });
        }

        // Event listeners for modal
        document.getElementById('confirmPassword').addEventListener('click', checkPassword);
        document.getElementById('cancelPassword').addEventListener('click', hidePasswordModal);
        
        // Enter key support
        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Close modal when clicking outside
        document.getElementById('passwordModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hidePasswordModal();
            }
        });

        // Debug function to test solutions
        window.testSolution = function(solutionId) {
            showSolution(solutionId);
        };

        // Emergency function to show all solutions (for testing)
        window.showAllSolutions = function() {
            console.log('Showing all solutions...');
            showSolution('solution1');
            showSolution('solution2');  
            showSolution('solution3');
        };

        // Test access function
        window.testAccess = function(token) {
            document.getElementById('passwordInput').value = token;
            checkPassword();
        };
    </script>
</body>
</html>