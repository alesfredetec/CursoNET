<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refactoring: De Procedural a Funcional y OO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }

        .presentation-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            padding: 60px;
            position: relative;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-header {
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        h2 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 30px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.8em;
            color: #764ba2;
            margin: 30px 0 20px;
            font-weight: 500;
        }

        .subtitle {
            font-size: 1.5em;
            color: #a8a8b3;
            font-weight: 300;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .list {
            list-style: none;
            padding: 0;
        }

        .list li {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: flex-start;
        }

        .list li:last-child {
            border-bottom: none;
        }

        .list li::before {
            content: '‚ñ∏';
            color: #667eea;
            font-size: 1.5em;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .code-block {
            background: #1e1e2e;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 25px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.6;
            position: relative;
        }

        .code-block.bad {
            border-color: rgba(239, 68, 68, 0.5);
            background: rgba(239, 68, 68, 0.05);
        }

        .code-block.good {
            border-color: rgba(34, 197, 94, 0.5);
            background: rgba(34, 197, 94, 0.05);
        }

        .code-label {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .code-label.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .code-label.good {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .keyword {
            color: #667eea;
            font-weight: bold;
        }

        .string {
            color: #98c379;
        }

        .comment {
            color: #7c8a9c;
            font-style: italic;
        }

        .type {
            color: #e06c75;
        }

        .method {
            color: #61afef;
        }

        /* Enhanced Navigation */
        .navigation {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 1000;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            font-weight: 500;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Instructor Info Styling */
        .instructor-info {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-radius: 25px;
            color: #a8a8b3;
            font-size: 0.9rem;
            z-index: 1000;
            text-align: right;
        }

        .instructor-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .instructor-area {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Slide counter */
        .slide-counter {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 25px;
            color: #a8a8b3;
            font-size: 0.9rem;
            z-index: 1000;
        }

        .slide-number {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 1.2em;
            color: #a8a8b3;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            z-index: 1001;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            margin: 20px 0;
        }

        .icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .smell-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 0 5px;
        }

        .smell-indicator.bad {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .smell-indicator.good {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .arrow {
            font-size: 2em;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table tr:hover td {
            background: rgba(255, 255, 255, 0.05);
        }

        @media (max-width: 768px) {
            .slide {
                padding: 30px;
            }
            h1 {
                font-size: 2.5em;
            }
            h2 {
                font-size: 2em;
            }
            .two-column {
                grid-template-columns: 1fr;
            }
            .code-block {
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="presentation-container">
        <div class="progress-bar" id="progressBar"></div>
        
        <!-- Slide 1: T√≠tulo -->
        <div class="slide active">
            <div class="slide-header">
                <h1>Refactoring</h1>
                <p class="subtitle">De C√≥digo Procedural a Dise√±o Funcional y OO</p>
            </div>
            <div class="content" style="justify-content: center; align-items: center;">
                <div class="card" style="text-align: center; max-width: 800px;">
                    <div class="icon">üîß</div>
                    <h3>T√©cnicas de Transformaci√≥n de C√≥digo</h3>
                    <p style="font-size: 1.2em; color: #a8a8b3; margin-top: 20px;">
                        Extract Method ‚Ä¢ Introduce Class ‚Ä¢ Func&lt;T&gt; y Action&lt;T&gt;
                    </p>
                </div>
            </div>
            <div class="slide-number">1 / 15</div>
        </div>

        <!-- Slide 2: Introducci√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>¬øQu√© es Refactoring?</h2>
            </div>
            <div class="content">
                <div class="card">
                    <h3>üìñ Definici√≥n</h3>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">
                        "Proceso de reestructurar c√≥digo existente, alterando su estructura interna 
                        <strong>sin cambiar su comportamiento externo</strong>."
                    </p>
                    <p style="color: #a8a8b3;">‚Äî Martin Fowler</p>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <div class="icon">üéØ</div>
                        <h3>Objetivos</h3>
                        <ul class="list">
                            <li>Mejorar legibilidad</li>
                            <li>Reducir complejidad</li>
                            <li>Facilitar mantenimiento</li>
                            <li>Eliminar duplicaci√≥n</li>
                            <li>Preparar para nuevas features</li>
                        </ul>
                    </div>
                    <div class="card">
                        <div class="icon">‚ö†Ô∏è</div>
                        <h3>Cu√°ndo Refactorizar</h3>
                        <ul class="list">
                            <li>Al agregar nueva funcionalidad</li>
                            <li>Al corregir un bug</li>
                            <li>Durante code review</li>
                            <li>Cuando el c√≥digo "huele mal"</li>
                            <li>Como parte del desarrollo diario</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">2 / 15</div>
        </div>

        <!-- Slide 3: Code Smells -->
        <div class="slide">
            <div class="slide-header">
                <h2>Code Smells Comunes</h2>
                <p class="subtitle">Se√±ales de que es hora de refactorizar</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üçù C√≥digo Espagueti</h3>
                        <p>M√©todos largos con m√∫ltiples responsabilidades</p>
                        <span class="smell-indicator bad">Malo</span>
                        <pre style="margin-top: 10px; font-size: 0.9em;">
M√©todo con 200+ l√≠neas
Sin estructura clara
Dif√≠cil de seguir</pre>
                    </div>
                    <div class="card">
                        <h3>üîÑ Duplicaci√≥n</h3>
                        <p>Copy-paste programming</p>
                        <span class="smell-indicator bad">Malo</span>
                        <pre style="margin-top: 10px; font-size: 0.9em;">
Misma l√≥gica en varios lugares
Cambios requieren m√∫ltiples ediciones
Alto riesgo de inconsistencias</pre>
                    </div>
                    <div class="card">
                        <h3>üé≠ God Class</h3>
                        <p>Una clase que hace demasiado</p>
                        <span class="smell-indicator bad">Malo</span>
                        <pre style="margin-top: 10px; font-size: 0.9em;">
1000+ l√≠neas de c√≥digo
20+ m√©todos
M√∫ltiples responsabilidades</pre>
                    </div>
                    <div class="card">
                        <h3>üî¢ L√≥gica Condicional Compleja</h3>
                        <p>if-else anidados profundamente</p>
                        <span class="smell-indicator bad">Malo</span>
                        <pre style="margin-top: 10px; font-size: 0.9em;">
if { if { if { ... } } }
Switch gigantes
Dif√≠cil agregar casos nuevos</pre>
                    </div>
                </div>
            </div>
            <div class="slide-number">3 / 15</div>
        </div>

        <!-- Slide 4: T√©cnicas de Refactoring -->
        <div class="slide">
            <div class="slide-header">
                <h2>T√©cnicas de Refactoring</h2>
                <p class="subtitle">Las herramientas en nuestro arsenal</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üì§ Extract Method</h3>
                        <p>Tomar un fragmento de c√≥digo y moverlo a su propio m√©todo</p>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Cu√°ndo usar:</strong> Cuando un m√©todo hace demasiado o tiene comentarios explicando qu√© hace cada secci√≥n</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üèóÔ∏è Introduce Class</h3>
                        <p>Crear una nueva clase para agrupar comportamiento y datos relacionados</p>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Cu√°ndo usar:</strong> Cuando varios m√©todos y datos est√°n m√°s relacionados entre s√≠ que con su clase actual</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üîÑ Replace Conditional with Polymorphism</h3>
                        <p>Reemplazar if-else/switch con herencia o composici√≥n</p>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Cu√°ndo usar:</strong> Cuando el mismo condicional aparece en varios lugares</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>‚ö° Use Func&lt;T&gt; / Action&lt;T&gt;</h3>
                        <p>Reemplazar l√≥gica r√≠gida con delegados configurables</p>
                        <div class="highlight" style="margin-top: 15px;">
                            <p><strong>Cu√°ndo usar:</strong> Para hacer el c√≥digo extensible sin modificaci√≥n</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">4 / 15</div>
        </div>

        <!-- Slide 5: Caso de Estudio - El Problema -->
        <div class="slide">
            <div class="slide-header">
                <h2>Caso de Estudio: Sistema de √ìrdenes</h2>
                <p class="subtitle">El c√≥digo inicial - lleno de "smells"</p>
            </div>
            <div class="content">
                <div class="code-block bad">
                    <span class="code-label bad">ANTES</span>
<span class="keyword">public class</span> <span class="type">Program</span>
{
    <span class="keyword">public static void</span> <span class="method">Main</span>(<span class="type">string</span>[] args)
    {
        <span class="keyword">var</span> orders = <span class="keyword">new</span> <span class="type">List</span>&lt;<span class="type">Order</span>&gt;
        {
            <span class="keyword">new</span> <span class="type">Order</span> { Id = 1, Amount = 100, CustomerType = <span class="string">"Standard"</span> },
            <span class="keyword">new</span> <span class="type">Order</span> { Id = 2, Amount = 250, CustomerType = <span class="string">"Premium"</span> },
            <span class="keyword">new</span> <span class="type">Order</span> { Id = 3, Amount = 50, CustomerType = <span class="string">"Standard"</span> }
        };

        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando √≥rdenes..."</span>);

        <span class="comment">// TODO: Este m√©todo hace demasiadas cosas!</span>
        <span class="keyword">foreach</span> (<span class="keyword">var</span> order <span class="keyword">in</span> orders)
        {
            <span class="comment">// Calcular descuento - l√≥gica r√≠gida</span>
            <span class="type">decimal</span> discount = 0;
            <span class="keyword">if</span> (order.CustomerType == <span class="string">"Premium"</span>)
            {
                discount = order.Amount * 0.15m; <span class="comment">// 15% para Premium</span>
            }
            <span class="keyword">else</span>
            {
                discount = order.Amount * 0.05m; <span class="comment">// 5% para Standard</span>
            }
            order.FinalPrice = order.Amount - discount;

            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Orden {order.Id}: Precio Final ${order.FinalPrice}"</span>);

            <span class="comment">// Notificar al cliente - hardcodeado a email</span>
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Enviando email de confirmaci√≥n para la orden {order.Id}..."</span>);
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Email enviado a cliente de la orden {order.Id}."</span>);
        }

        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesamiento finalizado."</span>);
    }
}
                </div>
                
                <div class="highlight">
                    <h3>üö® Problemas Identificados</h3>
                    <ul style="margin-top: 10px;">
                        <li>‚Ä¢ <strong>M√©todo Main hace demasiado:</strong> Lee datos, calcula, notifica (viola SRP)</li>
                        <li>‚Ä¢ <strong>L√≥gica de descuento r√≠gida:</strong> Agregar "VIP" requiere modificar c√≥digo (viola OCP)</li>
                        <li>‚Ä¢ <strong>Notificaci√≥n hardcodeada:</strong> No podemos cambiar a SMS sin modificar</li>
                        <li>‚Ä¢ <strong>Sin separaci√≥n de concerns:</strong> Todo mezclado en un solo lugar</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">5 / 15</div>
        </div>

        <!-- Slide 6: Paso 1 - Extract Method -->
        <div class="slide">
            <div class="slide-header">
                <h2>Paso 1: Extract Method</h2>
                <p class="subtitle">Mejorando la legibilidad</p>
            </div>
            <div class="content">
                <div class="code-block good">
                    <span class="code-label good">MEJOR</span>
<span class="keyword">public class</span> <span class="type">Program</span>
{
    <span class="keyword">public static void</span> <span class="method">Main</span>(<span class="type">string</span>[] args)
    {
        <span class="keyword">var</span> orders = <span class="keyword">new</span> <span class="type">List</span>&lt;<span class="type">Order</span>&gt; { <span class="comment">/* ... */</span> };
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando √≥rdenes..."</span>);

        <span class="keyword">foreach</span> (<span class="keyword">var</span> order <span class="keyword">in</span> orders)
        {
            <span class="comment">// Ahora el bucle es m√°s legible - describe QU√â hace, no C√ìMO</span>
            <span class="method">CalculateFinalPrice</span>(order);
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Orden {order.Id}: Precio Final ${order.FinalPrice}"</span>);
            
            <span class="method">SendConfirmationEmail</span>(order);
        }

        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesamiento finalizado."</span>);
    }

    <span class="comment">// M√©todo extra√≠do para c√°lculo de precio</span>
    <span class="keyword">private static void</span> <span class="method">CalculateFinalPrice</span>(<span class="type">Order</span> order)
    {
        <span class="type">decimal</span> discount = 0;
        <span class="keyword">if</span> (order.CustomerType == <span class="string">"Premium"</span>)
            discount = order.Amount * 0.15m;
        <span class="keyword">else</span>
            discount = order.Amount * 0.05m;
        
        order.FinalPrice = order.Amount - discount;
    }

    <span class="comment">// M√©todo extra√≠do para notificaci√≥n</span>
    <span class="keyword">private static void</span> <span class="method">SendConfirmationEmail</span>(<span class="type">Order</span> order)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Enviando email de confirmaci√≥n para la orden {order.Id}..."</span>);
        <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Email enviado a cliente de la orden {order.Id}."</span>);
    }
}
                </div>
                
                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>‚úÖ Mejoras</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>M√©todo Main m√°s corto y claro</li>
                            <li>Cada m√©todo tiene un prop√≥sito √∫nico</li>
                            <li>Nombres descriptivos</li>
                            <li>M√°s f√°cil de testear</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>‚ùå A√∫n Pendiente</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Program sigue teniendo m√∫ltiples responsabilidades</li>
                            <li>L√≥gica de negocio en clase de entrada</li>
                            <li>M√©todos est√°ticos dificultan testing</li>
                            <li>Sin flexibilidad en descuentos</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">6 / 15</div>
        </div>

        <!-- Slide 7: Paso 2 - Introduce Class -->
        <div class="slide">
            <div class="slide-header">
                <h2>Paso 2: Introduce Class</h2>
                <p class="subtitle">Separaci√≥n de responsabilidades (SRP)</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>Nueva Clase: OrderProcessor</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">OrderProcessor</span>
{
    <span class="keyword">public void</span> <span class="method">ProcessOrders</span>(<span class="type">IEnumerable</span>&lt;<span class="type">Order</span>&gt; orders)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando √≥rdenes..."</span>);
        
        <span class="keyword">foreach</span> (<span class="keyword">var</span> order <span class="keyword">in</span> orders)
        {
            <span class="method">CalculateFinalPrice</span>(order);
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Orden {order.Id}: ${order.FinalPrice}"</span>);
            <span class="method">SendConfirmationEmail</span>(order);
        }
        
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesamiento finalizado."</span>);
    }

    <span class="keyword">private void</span> <span class="method">CalculateFinalPrice</span>(<span class="type">Order</span> order)
    {
        <span class="comment">// Misma l√≥gica, ahora encapsulada</span>
    }

    <span class="keyword">private void</span> <span class="method">SendConfirmationEmail</span>(<span class="type">Order</span> order)
    {
        <span class="comment">// Misma l√≥gica, ahora encapsulada</span>
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>Program Simplificado</h3>
                        <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">Program</span>
{
    <span class="keyword">public static void</span> <span class="method">Main</span>(<span class="type">string</span>[] args)
    {
        <span class="keyword">var</span> orders = <span class="keyword">new</span> <span class="type">List</span>&lt;<span class="type">Order</span>&gt; 
        { 
            <span class="comment">/* ... √≥rdenes ... */</span> 
        };
        
        <span class="comment">// Program solo orquesta</span>
        <span class="keyword">var</span> processor = <span class="keyword">new</span> <span class="type">OrderProcessor</span>();
        processor.<span class="method">ProcessOrders</span>(orders);
    }
}
                        </div>
                        
                        <div class="highlight" style="margin-top: 20px;">
                            <p><strong>Principio SRP en acci√≥n:</strong></p>
                            <p>‚Ä¢ Program: Punto de entrada</p>
                            <p>‚Ä¢ OrderProcessor: L√≥gica de negocio</p>
                        </div>
                    </div>
                </div>
                
                <div class="arrow">‚¨áÔ∏è</div>
                
                <div class="card">
                    <h3>üéØ Beneficios de la Separaci√≥n</h3>
                    <ul class="list" style="font-size: 0.95em;">
                        <li>Cada clase tiene una √∫nica raz√≥n para cambiar</li>
                        <li>OrderProcessor es reutilizable y testeable</li>
                        <li>F√°cil agregar nuevos procesadores sin tocar Program</li>
                        <li>C√≥digo m√°s organizado y mantenible</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">7 / 15</div>
        </div>

        <!-- Slide 8: Introducci√≥n a Func y Action -->
        <div class="slide">
            <div class="slide-header">
                <h2>Delegados: Func&lt;T&gt; y Action&lt;T&gt;</h2>
                <p class="subtitle">La clave para c√≥digo flexible y extensible</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üì• Action&lt;T&gt;</h3>
                        <p style="margin-bottom: 15px;">Encapsula un m√©todo que <strong>NO retorna valor</strong> (void)</p>
                        <div class="code-block" style="font-size: 0.9em;">
<span class="comment">// Definici√≥n</span>
<span class="type">Action</span>&lt;<span class="type">Order</span>&gt; notifier;

<span class="comment">// Asignaci√≥n con lambda</span>
notifier = (order) => {
    <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Procesando {order.Id}"</span>);
};

<span class="comment">// Uso</span>
notifier(myOrder);
                        </div>
                        <p style="margin-top: 15px; font-size: 0.9em; color: #a8a8b3;">
                            Perfecto para: Notificaciones, logging, efectos secundarios
                        </p>
                    </div>
                    
                    <div class="card">
                        <h3>üì§ Func&lt;T, TResult&gt;</h3>
                        <p style="margin-bottom: 15px;">Encapsula un m√©todo que <strong>RETORNA un valor</strong></p>
                        <div class="code-block" style="font-size: 0.9em;">
<span class="comment">// Definici√≥n</span>
<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">decimal</span>&gt; calculator;

<span class="comment">// Asignaci√≥n con lambda</span>
calculator = (order) => {
    <span class="keyword">return</span> order.Amount * 0.1m;
};

<span class="comment">// Uso</span>
<span class="type">decimal</span> result = calculator(myOrder);
                        </div>
                        <p style="margin-top: 15px; font-size: 0.9em; color: #a8a8b3;">
                            Perfecto para: C√°lculos, transformaciones, reglas de negocio
                        </p>
                    </div>
                </div>
                
                <div class="highlight">
                    <h3>üí° ¬øPor qu√© usar delegados?</h3>
                    <p>Permiten <strong>inyectar comportamiento</strong> sin modificar el c√≥digo. 
                    Es la base del Principio Open/Closed: "Abierto para extensi√≥n, cerrado para modificaci√≥n".</p>
                </div>
            </div>
            <div class="slide-number">8 / 15</div>
        </div>

        <!-- Slide 9: Paso 3A - Func para Descuentos -->
        <div class="slide">
            <div class="slide-header">
                <h2>Paso 3A: Flexibilizando con Func&lt;T&gt;</h2>
                <p class="subtitle">Reemplazando if-else r√≠gido con estrategias din√°micas</p>
            </div>
            <div class="content">
                <div class="code-block good">
                    <span class="code-label good">FLEXIBLE</span>
<span class="keyword">public class</span> <span class="type">OrderProcessor</span>
{
    <span class="comment">// Ahora recibe una estrategia de descuento como par√°metro</span>
    <span class="keyword">public void</span> <span class="method">ProcessOrders</span>(<span class="type">IEnumerable</span>&lt;<span class="type">Order</span>&gt; orders, 
                              <span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">decimal</span>&gt; calculateDiscountStrategy)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando √≥rdenes..."</span>);
        
        <span class="keyword">foreach</span> (<span class="keyword">var</span> order <span class="keyword">in</span> orders)
        {
            <span class="comment">// Ya NO hay if-else. Simplemente invocamos la funci√≥n</span>
            <span class="type">decimal</span> discount = <span class="method">calculateDiscountStrategy</span>(order);
            order.FinalPrice = order.Amount - discount;
            
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Orden {order.Id}: Precio Final ${order.FinalPrice}"</span>);
            <span class="method">SendConfirmationEmail</span>(order);
        }
        
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesamiento finalizado."</span>);
    }
}
                </div>
                
                <div class="two-column" style="margin-top: 20px;">
                    <div class="card">
                        <h3>Uso en Program</h3>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="comment">// Definimos la l√≥gica FUERA del procesador</span>
<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">decimal</span>&gt; discountRule = (order) =>
{
    <span class="keyword">if</span> (order.CustomerType == <span class="string">"Premium"</span>)
        <span class="keyword">return</span> order.Amount * 0.15m;
    <span class="keyword">return</span> order.Amount * 0.05m;
};

<span class="comment">// Pasamos la estrategia al procesador</span>
processor.<span class="method">ProcessOrders</span>(orders, discountRule);
                        </div>
                    </div>
                    <div class="card">
                        <h3>üöÄ Ventajas</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>OrderProcessor no conoce reglas de descuento</li>
                            <li>F√°cil agregar nuevas estrategias</li>
                            <li>Sin modificar c√≥digo existente</li>
                            <li>Testeable con mocks</li>
                            <li>Cumple Open/Closed Principle</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">9 / 15</div>
        </div>

        <!-- Slide 10: Paso 3B - Action para Notificaciones -->
        <div class="slide">
            <div class="slide-header">
                <h2>Paso 3B: Flexibilizando con Action&lt;T&gt;</h2>
                <p class="subtitle">Notificaciones configurables</p>
            </div>
            <div class="content">
                <div class="code-block good">
                    <span class="code-label good">M√ÅXIMA FLEXIBILIDAD</span>
<span class="keyword">public class</span> <span class="type">OrderProcessor</span>
{
    <span class="comment">// Ahora tambi√©n recibe una acci√≥n de notificaci√≥n</span>
    <span class="keyword">public void</span> <span class="method">ProcessOrders</span>(<span class="type">IEnumerable</span>&lt;<span class="type">Order</span>&gt; orders, 
                              <span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">decimal</span>&gt; calculateDiscountStrategy, 
                              <span class="type">Action</span>&lt;<span class="type">Order</span>&gt; notificationAction)
    {
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando √≥rdenes..."</span>);
        
        <span class="keyword">foreach</span> (<span class="keyword">var</span> order <span class="keyword">in</span> orders)
        {
            <span class="type">decimal</span> discount = <span class="method">calculateDiscountStrategy</span>(order);
            order.FinalPrice = order.Amount - discount;
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"Orden {order.Id}: Precio Final ${order.FinalPrice}"</span>);
            
            <span class="comment">// Simplemente invocamos la acci√≥n que nos pasaron</span>
            <span class="method">notificationAction</span>(order);
        }
        
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesamiento finalizado."</span>);
    }
}
                </div>
                
                <h3 style="margin-top: 30px;">M√∫ltiples Estrategias de Notificaci√≥n</h3>
                <div class="grid">
                    <div class="card">
                        <h4>üìß Email</h4>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="type">Action</span>&lt;<span class="type">Order</span>&gt; emailNotifier = (order) => {
    <span class="type">Console</span>.<span class="method">WriteLine</span>(
        $<span class="string">"üìß Email enviado para orden {order.Id}"</span>
    );
};
                        </div>
                    </div>
                    <div class="card">
                        <h4>üì± SMS</h4>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="type">Action</span>&lt;<span class="type">Order</span>&gt; smsNotifier = (order) => {
    <span class="type">Console</span>.<span class="method">WriteLine</span>(
        $<span class="string">"üì± SMS enviado para orden {order.Id}"</span>
    );
};
                        </div>
                    </div>
                    <div class="card">
                        <h4>üîî Push</h4>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="type">Action</span>&lt;<span class="type">Order</span>&gt; pushNotifier = (order) => {
    <span class="type">Console</span>.<span class="method">WriteLine</span>(
        $<span class="string">"üîî Push enviado para orden {order.Id}"</span>
    );
};
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">10 / 15</div>
        </div>

        <!-- Slide 11: C√≥digo Final Completo -->
        <div class="slide">
            <div class="slide-header">
                <h2>Resultado Final</h2>
                <p class="subtitle">Sistema flexible y extensible</p>
            </div>
            <div class="content">
                <div class="code-block good" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">Program</span>
{
    <span class="keyword">public static void</span> <span class="method">Main</span>(<span class="type">string</span>[] args)
    {
        <span class="keyword">var</span> orders = <span class="method">GetOrders</span>();
        <span class="keyword">var</span> processor = <span class="keyword">new</span> <span class="type">OrderProcessor</span>();

        <span class="comment">// 1. Definimos la regla de descuento</span>
        <span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">decimal</span>&gt; discountRule = (order) => 
        {
            <span class="keyword">return order.CustomerType switch</span>
            {
                <span class="string">"Premium"</span> => order.Amount * 0.15m,
                <span class="string">"VIP"</span> => order.Amount * 0.25m,     <span class="comment">// ¬°F√°cil agregar nuevos tipos!</span>
                _ => order.Amount * 0.05m
            };
        };

        <span class="comment">// 2. Procesamos con notificaci√≥n por Email</span>
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"=== PROCESAMIENTO CON EMAIL ==="</span>);
        processor.<span class="method">ProcessOrders</span>(orders, discountRule, 
            order => <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"üìß Email enviado para orden {order.Id}"</span>));

        <span class="comment">// 3. Mismos datos, diferente notificaci√≥n - ¬°Sin cambiar OrderProcessor!</span>
        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"\n=== PROCESAMIENTO CON SMS ==="</span>);
        processor.<span class="method">ProcessOrders</span>(orders, discountRule,
            order => <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"üì± SMS enviado para orden {order.Id}"</span>));

        <span class="comment">// 4. Podemos combinar m√∫ltiples acciones</span>
        <span class="type">Action</span>&lt;<span class="type">Order</span>&gt; multiNotifier = (order) => 
        {
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"üìß Email enviado para orden {order.Id}"</span>);
            <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"üì± SMS enviado para orden {order.Id}"</span>);
            <span class="keyword">if</span> (order.FinalPrice > 100)
                <span class="type">Console</span>.<span class="method">WriteLine</span>($<span class="string">"üéâ ¬°Felicitaciones por tu compra!"</span>);
        };

        <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"\n=== PROCESAMIENTO MULTI-CANAL ==="</span>);
        processor.<span class="method">ProcessOrders</span>(orders, discountRule, multiNotifier);
    }
}
                </div>
                
                <div class="highlight">
                    <p><strong>üéØ Lo que logramos:</strong> Un sistema donde podemos cambiar las reglas de negocio 
                    y los canales de notificaci√≥n sin tocar el c√≥digo del procesador. ¬°Eso es Open/Closed Principle en acci√≥n!</p>
                </div>
            </div>
            <div class="slide-number">11 / 15</div>
        </div>

        <!-- Slide 12: Comparaci√≥n Antes/Despu√©s -->
        <div class="slide">
            <div class="slide-header">
                <h2>Antes vs Despu√©s</h2>
                <p class="subtitle">El impacto del refactoring</p>
            </div>
            <div class="content">
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Aspecto</th>
                            <th>Antes <span class="smell-indicator bad">üö´</span></th>
                            <th>Despu√©s <span class="smell-indicator good">‚úÖ</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Estructura</strong></td>
                            <td>Un m√©todo monol√≠tico hace todo</td>
                            <td>Clases especializadas con responsabilidad √∫nica</td>
                        </tr>
                        <tr>
                            <td><strong>Flexibilidad</strong></td>
                            <td>if-else r√≠gido, modificaci√≥n necesaria</td>
                            <td>Estrategias inyectables con Func/Action</td>
                        </tr>
                        <tr>
                            <td><strong>Testabilidad</strong></td>
                            <td>Dif√≠cil de testear, todo acoplado</td>
                            <td>F√°cil mock de dependencias</td>
                        </tr>
                        <tr>
                            <td><strong>Mantenibilidad</strong></td>
                            <td>Cambios afectan todo el c√≥digo</td>
                            <td>Cambios localizados, sin efectos secundarios</td>
                        </tr>
                        <tr>
                            <td><strong>Extensibilidad</strong></td>
                            <td>Agregar features requiere modificar</td>
                            <td>Agregar features sin tocar c√≥digo existente</td>
                        </tr>
                        <tr>
                            <td><strong>Principios SOLID</strong></td>
                            <td>Viola SRP y OCP</td>
                            <td>Cumple SRP, OCP, DIP</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>üìä M√©tricas de Mejora</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Complejidad ciclom√°tica: 8 ‚Üí 2</li>
                            <li>L√≠neas por m√©todo: 50+ ‚Üí <15</li>
                            <li>Acoplamiento: Alto ‚Üí Bajo</li>
                            <li>Cohesi√≥n: Baja ‚Üí Alta</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üí∞ ROI del Refactoring</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Menos bugs en producci√≥n</li>
                            <li>Nuevas features m√°s r√°pidas</li>
                            <li>Onboarding m√°s sencillo</li>
                            <li>Menos deuda t√©cnica</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">12 / 15</div>
        </div>

        <!-- Slide 13: Patrones Relacionados -->
        <div class="slide">
            <div class="slide-header">
                <h2>Evoluci√≥n: Patrones de Dise√±o</h2>
                <p class="subtitle">Los siguientes pasos en tu journey</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üìã Strategy Pattern</h3>
                        <p>Formaliza el uso de Func/Action en clases dedicadas</p>
                        <div class="code-block" style="font-size: 0.85em; margin-top: 10px;">
<span class="keyword">interface</span> <span class="type">IDiscountStrategy</span>
{
    <span class="type">decimal</span> <span class="method">Calculate</span>(<span class="type">Order</span> order);
}

<span class="keyword">class</span> <span class="type">PremiumDiscount</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="comment">// Implementaci√≥n espec√≠fica</span>
}
                        </div>
                    </div>
                    <div class="card">
                        <h3>üè≠ Factory Pattern</h3>
                        <p>Crea estrategias din√°micamente seg√∫n contexto</p>
                        <div class="code-block" style="font-size: 0.85em; margin-top: 10px;">
<span class="keyword">class</span> <span class="type">StrategyFactory</span>
{
    <span class="keyword">public</span> <span class="type">INotificationStrategy</span> <span class="method">Create</span>(<span class="type">string</span> type)
    {
        <span class="keyword">return type switch</span>
        {
            <span class="string">"email"</span> => <span class="keyword">new</span> <span class="type">EmailStrategy</span>(),
            <span class="string">"sms"</span> => <span class="keyword">new</span> <span class="type">SmsStrategy</span>(),
            _ => <span class="keyword">new</span> <span class="type">DefaultStrategy</span>()
        };
    }
}
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="card">
                        <h3>üîó Chain of Responsibility</h3>
                        <p>Maneja procesamiento complejo en pasos</p>
                        <div class="highlight" style="margin-top: 10px;">
                            <p>√ötil cuando necesitas aplicar m√∫ltiples validaciones o transformaciones en secuencia</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üé≠ Decorator Pattern</h3>
                        <p>Agrega funcionalidad sin modificar c√≥digo base</p>
                        <div class="highlight" style="margin-top: 10px;">
                            <p>Perfecto para agregar logging, caching, o m√©tricas a operaciones existentes</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">13 / 15</div>
        </div>

        <!-- Slide 14: Ejercicios Pr√°cticos -->
        <div class="slide">
            <div class="slide-header">
                <h2>Ejercicios Pr√°cticos</h2>
                <p class="subtitle">Aplica lo aprendido</p>
            </div>
            <div class="content" style="overflow-y: auto;">
                <div class="card">
                    <h3>üèãÔ∏è Ejercicio 1: Identificar Code Smells</h3>
                    <p>Analiza este c√≥digo y lista todos los problemas:</p>
                    <div class="code-block bad" style="font-size: 0.85em; margin-top: 10px;">
<span class="keyword">public void</span> <span class="method">ProcessPayment</span>(<span class="type">Payment</span> payment)
{
    <span class="comment">// Validar monto</span>
    <span class="keyword">if</span> (payment.Amount <= 0) { <span class="comment">/* error */</span> }
    <span class="keyword">if</span> (payment.Amount > 10000) { <span class="comment">/* requiere aprobaci√≥n */</span> }
    
    <span class="comment">// Calcular fee seg√∫n m√©todo</span>
    <span class="keyword">if</span> (payment.Method == <span class="string">"CreditCard"</span>) {
        payment.Fee = payment.Amount * 0.03m;
    } <span class="keyword">else if</span> (payment.Method == <span class="string">"DebitCard"</span>) {
        payment.Fee = payment.Amount * 0.01m;
    } <span class="keyword">else if</span> (payment.Method == <span class="string">"Cash"</span>) {
        payment.Fee = 0;
    }
    
    <span class="comment">// Procesar</span>
    <span class="type">Console</span>.<span class="method">WriteLine</span>(<span class="string">"Procesando..."</span>);
    <span class="comment">// 50 l√≠neas m√°s de c√≥digo...</span>
}
                    </div>
                </div>

                <div class="card">
                    <h3>üî® Ejercicio 2: Aplicar Extract Method</h3>
                    <p>Refactoriza el c√≥digo anterior extrayendo m√©todos con nombres descriptivos.</p>
                    <div class="highlight" style="margin-top: 10px;">
                        <p><strong>Pista:</strong> Identifica cada responsabilidad y crea un m√©todo para ella.</p>
                    </div>
                </div>

                <div class="card">
                    <h3>‚ö° Ejercicio 3: Implementar con Func&lt;T&gt;</h3>
                    <p>Reemplaza la l√≥gica de c√°lculo de fee con un <code>Func&lt;Payment, decimal&gt;</code></p>
                    <div class="highlight" style="margin-top: 10px;">
                        <p><strong>Bonus:</strong> Crea un diccionario de estrategias por m√©todo de pago.</p>
                    </div>
                </div>

                <div class="card">
                    <h3>üöÄ Ejercicio 4: Dise√±o Completo</h3>
                    <p>Dise√±a un sistema de notificaciones que soporte:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>‚Ä¢ Email, SMS, Push, Slack</li>
                        <li>‚Ä¢ Prioridades (inmediato, batch)</li>
                        <li>‚Ä¢ Templates personalizables</li>
                        <li>‚Ä¢ Retry en caso de fallo</li>
                    </ul>
                    <p style="margin-top: 15px;">Usa <code>Action&lt;T&gt;</code> y principios SOLID.</p>
                </div>
            </div>
            <div class="slide-number">14 / 15</div>
        </div>

        <!-- Slide 15: Anexo - Strategy Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>Anexo: Strategy Pattern</h2>
                <p class="subtitle">De Func&lt;T&gt; a un patr√≥n formal</p>
            </div>
            <div class="content">
                <div class="two-column">
                    <div>
                        <h3>üìã Estructura del Patr√≥n</h3>
                        <div class="code-block" style="font-size: 0.85em;">
<span class="comment">// 1. Interfaz de estrategia</span>
<span class="keyword">public interface</span> <span class="type">IDiscountStrategy</span>
{
    <span class="type">decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Order</span> order);
}

<span class="comment">// 2. Implementaciones concretas</span>
<span class="keyword">public class</span> <span class="type">StandardDiscount</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public</span> <span class="type">decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Order</span> order)
    {
        <span class="keyword">return</span> order.Amount * 0.05m;
    }
}

<span class="keyword">public class</span> <span class="type">PremiumDiscount</span> : <span class="type">IDiscountStrategy</span>
{
    <span class="keyword">public</span> <span class="type">decimal</span> <span class="method">CalculateDiscount</span>(<span class="type">Order</span> order)
    {
        <span class="keyword">return</span> order.Amount * 0.15m;
    }
}

<span class="comment">// 3. Contexto que usa la estrategia</span>
<span class="keyword">public class</span> <span class="type">OrderProcessor</span>
{
    <span class="keyword">private</span> <span class="type">IDiscountStrategy</span> _strategy;
    
    <span class="keyword">public</span> <span class="method">OrderProcessor</span>(<span class="type">IDiscountStrategy</span> strategy)
    {
        _strategy = strategy;
    }
    
    <span class="keyword">public void</span> <span class="method">ProcessOrder</span>(<span class="type">Order</span> order)
    {
        <span class="keyword">var</span> discount = _strategy.<span class="method">CalculateDiscount</span>(order);
        <span class="comment">// Procesar...</span>
    }
}
                        </div>
                    </div>
                    <div>
                        <h3>üìä Diagrama UML</h3>
                        <div class="card" style="background: #2a2a3e; padding: 20px; text-align: center;">
                            <pre style="font-size: 0.8em; color: #a8a8b3;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Context      ‚îÇ
‚îÇ (OrderProcessor)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ uses
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ &lt;&lt;interface&gt;&gt;   ‚îÇ
‚îÇ IStrategy       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ +Execute()      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îê
‚îÇStrategy‚îÇ ‚îÇStrategy‚îÇ
‚îÇ   A    ‚îÇ ‚îÇ   B    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            </pre>
                        </div>
                        
                        <h3>üí° Tips de Uso</h3>
                        <div class="card">
                            <ul class="list" style="font-size: 0.9em;">
                                <li><strong>Cu√°ndo usar:</strong> M√∫ltiples algoritmos intercambiables</li>
                                <li><strong>Ventaja:</strong> Elimina condicionales complejos</li>
                                <li><strong>Con DI:</strong> Inyecta estrategias seg√∫n configuraci√≥n</li>
                                <li><strong>Testing:</strong> Mock f√°cil de estrategias</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="highlight" style="margin-top: 20px;">
                    <p><strong>üîÑ Evoluci√≥n:</strong> Func&lt;T&gt; ‚Üí Strategy Pattern ‚Üí Strategy + Factory ‚Üí Strategy + DI Container</p>
                </div>
            </div>
            <div class="slide-number">15 / 20</div>
        </div>

        <!-- Slide 16: Anexo - Factory Pattern -->
        <div class="slide">
            <div class="slide-header">
                <h2>Anexo: Factory Pattern</h2>
                <p class="subtitle">Creaci√≥n din√°mica de estrategias</p>
            </div>
            <div class="content">
                <div class="code-block">
<span class="keyword">public class</span> <span class="type">DiscountStrategyFactory</span>
{
    <span class="keyword">private readonly</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">IDiscountStrategy</span>&gt;&gt; _strategies;
    
    <span class="keyword">public</span> <span class="method">DiscountStrategyFactory</span>()
    {
        _strategies = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">IDiscountStrategy</span>&gt;&gt;
        {
            [<span class="string">"Standard"</span>] = () => <span class="keyword">new</span> <span class="type">StandardDiscount</span>(),
            [<span class="string">"Premium"</span>] = () => <span class="keyword">new</span> <span class="type">PremiumDiscount</span>(),
            [<span class="string">"VIP"</span>] = () => <span class="keyword">new</span> <span class="type">VIPDiscount</span>(),
            [<span class="string">"BlackFriday"</span>] = () => <span class="keyword">new</span> <span class="type">BlackFridayDiscount</span>()
        };
    }
    
    <span class="keyword">public</span> <span class="type">IDiscountStrategy</span> <span class="method">CreateStrategy</span>(<span class="type">string</span> customerType)
    {
        <span class="keyword">if</span> (_strategies.<span class="method">TryGetValue</span>(customerType, <span class="keyword">out var</span> factory))
        {
            <span class="keyword">return</span> factory();
        }
        
        <span class="keyword">return new</span> <span class="type">DefaultDiscount</span>(); <span class="comment">// Fallback</span>
    }
    
    <span class="comment">// Permite registrar nuevas estrategias din√°micamente</span>
    <span class="keyword">public void</span> <span class="method">RegisterStrategy</span>(<span class="type">string</span> type, <span class="type">Func</span>&lt;<span class="type">IDiscountStrategy</span>&gt; factory)
    {
        _strategies[type] = factory;
    }
}

<span class="comment">// Uso con DI en ASP.NET Core</span>
<span class="keyword">public class</span> <span class="type">Startup</span>
{
    <span class="keyword">public void</span> <span class="method">ConfigureServices</span>(<span class="type">IServiceCollection</span> services)
    {
        services.<span class="method">AddSingleton</span>&lt;<span class="type">DiscountStrategyFactory</span>&gt;();
        
        <span class="comment">// Registro condicional basado en configuraci√≥n</span>
        services.<span class="method">AddScoped</span>&lt;<span class="type">IDiscountStrategy</span>&gt;(provider =>
        {
            <span class="keyword">var</span> factory = provider.<span class="method">GetService</span>&lt;<span class="type">DiscountStrategyFactory</span>&gt;();
            <span class="keyword">var</span> context = provider.<span class="method">GetService</span>&lt;<span class="type">IHttpContextAccessor</span>&gt;();
            <span class="keyword">var</span> customerType = context.HttpContext.User.<span class="method">GetCustomerType</span>();
            
            <span class="keyword">return</span> factory.<span class="method">CreateStrategy</span>(customerType);
        });
    }
}
                </div>
                
                <div class="grid" style="margin-top: 20px;">
                    <div class="card">
                        <h3>‚úÖ Ventajas</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li>Centraliza la creaci√≥n de objetos</li>
                            <li>F√°cil agregar nuevos tipos</li>
                            <li>Desacopla creaci√≥n de uso</li>
                            <li>Testeable con mocks</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üí° Tips Avanzados</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li>Usa reflexi√≥n para auto-registro</li>
                            <li>Combina con atributos para metadata</li>
                            <li>Cache de instancias si son stateless</li>
                            <li>Considera Abstract Factory para familias</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="slide-number">16 / 20</div>
        </div>

        <!-- Slide 17: Tips y Best Practices -->
        <div class="slide">
            <div class="slide-header">
                <h2>Tips y Best Practices</h2>
                <p class="subtitle">Gu√≠a pr√°ctica para refactoring exitoso</p>
            </div>
            <div class="content">
                <div class="grid">
                    <div class="card">
                        <h3>üéØ Cu√°ndo Refactorizar</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Regla del Boy Scout:</strong> Deja el c√≥digo mejor de como lo encontraste</li>
                            <li><strong>Regla de tres:</strong> Primera vez copia, segunda vez duda, tercera vez refactoriza</li>
                            <li><strong>Antes de agregar feature:</strong> Prepara el terreno</li>
                            <li><strong>Al encontrar un bug:</strong> Refactoriza para que sea obvio</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>‚ö†Ô∏è Cu√°ndo NO Refactorizar</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Deadline cr√≠tico:</strong> Anota deuda t√©cnica</li>
                            <li><strong>C√≥digo que funciona y no se toca:</strong> Si no est√° roto...</li>
                            <li><strong>Sin tests:</strong> Primero agrega cobertura</li>
                            <li><strong>Reescribir es m√°s barato:</strong> A veces es mejor empezar de cero</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üõ°Ô∏è Refactoring Seguro</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Tests primero:</strong> Garantiza comportamiento</li>
                            <li><strong>Peque√±os pasos:</strong> Commit frecuente</li>
                            <li><strong>Una cosa a la vez:</strong> No mezcles refactorings</li>
                            <li><strong>IDE tools:</strong> Usa refactoring autom√°tico</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üìä M√©tricas de √âxito</h3>
                        <ul class="list" style="font-size: 0.9em;">
                            <li><strong>Complejidad ciclom√°tica:</strong> Target < 10</li>
                            <li><strong>L√≠neas por m√©todo:</strong> Target < 20</li>
                            <li><strong>Cobertura de tests:</strong> Mantener > 80%</li>
                            <li><strong>Velocidad del equipo:</strong> Debe aumentar</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight" style="margin-top: 30px;">
                    <h3>üî• Pro Tips para Sistemas de Alta Concurrencia</h3>
                    <div class="two-column" style="margin-top: 15px;">
                        <div>
                            <p><strong>1. Stateless Strategies:</strong><br>
                            Las estrategias sin estado son thread-safe por dise√±o</p>
                            
                            <p style="margin-top: 15px;"><strong>2. Inmutabilidad:</strong><br>
                            Prefiere objetos inmutables para evitar race conditions</p>
                        </div>
                        <div>
                            <p><strong>3. Async all the way:</strong><br>
                            Usa <code>Func&lt;T, Task&lt;TResult&gt;&gt;</code> para operaciones async</p>
                            
                            <p style="margin-top: 15px;"><strong>4. Circuit Breaker:</strong><br>
                            Envuelve estrategias externas con Polly</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="slide-number">17 / 20</div>
        </div>

        <!-- Slide 18: Preguntas de Revisi√≥n -->
        <div class="slide">
            <div class="slide-header">
                <h2>Preguntas de Revisi√≥n</h2>
                <p class="subtitle">Eval√∫a tu comprensi√≥n</p>
            </div>
            <div class="content" style="overflow-y: auto;">
                <div class="card">
                    <h3>‚ùì Pregunta 1: Code Smells</h3>
                    <p style="margin-bottom: 10px;"><strong>Identifica todos los code smells en este c√≥digo:</strong></p>
                    <div class="code-block bad" style="font-size: 0.85em;">
<span class="keyword">public class</span> <span class="type">UserService</span>
{
    <span class="keyword">public void</span> <span class="method">ProcessUser</span>(<span class="type">string</span> data)
    {
        <span class="comment">// Parse user data</span>
        <span class="keyword">var</span> parts = data.<span class="method">Split</span>(<span class="string">','</span>);
        <span class="keyword">var</span> name = parts[0];
        <span class="keyword">var</span> email = parts[1];
        <span class="keyword">var</span> type = parts[2];
        
        <span class="comment">// Validate</span>
        <span class="keyword">if</span> (<span class="type">string</span>.<span class="method">IsNullOrEmpty</span>(name) || <span class="type">string</span>.<span class="method">IsNullOrEmpty</span>(email))
            <span class="keyword">throw new</span> <span class="type">Exception</span>(<span class="string">"Invalid data"</span>);
        
        <span class="comment">// Calculate discount</span>
        <span class="type">decimal</span> discount = 0;
        <span class="keyword">if</span> (type == <span class="string">"Gold"</span>) discount = 0.2m;
        <span class="keyword">else if</span> (type == <span class="string">"Silver"</span>) discount = 0.1m;
        <span class="keyword">else</span> discount = 0.05m;
        
        <span class="comment">// Save to database</span>
        <span class="keyword">using</span> (<span class="keyword">var</span> conn = <span class="keyword">new</span> <span class="type">SqlConnection</span>(<span class="string">"..."</span>))
        {
            <span class="comment">// SQL code...</span>
        }
        
        <span class="comment">// Send email</span>
        <span class="keyword">var</span> smtp = <span class="keyword">new</span> <span class="type">SmtpClient</span>();
        <span class="comment">// Email code...</span>
    }
}
                    </div>
                    
                    <details style="margin-top: 10px;">
                        <summary style="cursor: pointer; color: #667eea;">Ver Respuesta</summary>
                        <div class="highlight" style="margin-top: 10px;">
                            <p><strong>Code Smells identificados:</strong></p>
                            <ul style="margin-left: 20px;">
                                <li>‚Ä¢ <strong>God Method:</strong> Hace demasiadas cosas</li>
                                <li>‚Ä¢ <strong>Primitive Obsession:</strong> Usa string array en vez de objeto</li>
                                <li>‚Ä¢ <strong>Magic Numbers:</strong> √çndices hardcodeados [0], [1], [2]</li>
                                <li>‚Ä¢ <strong>Violaci√≥n SRP:</strong> Parse, validate, calculate, save, notify</li>
                                <li>‚Ä¢ <strong>Hardcoded Dependencies:</strong> SqlConnection, SmtpClient</li>
                                <li>‚Ä¢ <strong>Poor Error Handling:</strong> Exception gen√©rica</li>
                                <li>‚Ä¢ <strong>Conditional Complexity:</strong> if-else para descuentos</li>
                            </ul>
                        </div>
                    </details>
                </div>

                <div class="card">
                    <h3>‚ùì Pregunta 2: Aplicar Extract Method</h3>
                    <p style="margin-bottom: 10px;"><strong>¬øQu√© m√©todos extraer√≠as del c√≥digo anterior y qu√© nombres les dar√≠as?</strong></p>
                    
                    <details style="margin-top: 10px;">
                        <summary style="cursor: pointer; color: #667eea;">Ver Respuesta</summary>
                        <div class="highlight" style="margin-top: 10px;">
                            <pre style="font-size: 0.9em;">
1. ParseUserData(string data) ‚Üí User
2. ValidateUser(User user) ‚Üí void/bool
3. CalculateDiscount(string userType) ‚Üí decimal
4. SaveUser(User user) ‚Üí void
5. SendWelcomeEmail(User user) ‚Üí void

Bonus: CreateUser como m√©todo coordinador</pre>
                        </div>
                    </details>
                </div>

                <div class="card">
                    <h3>‚ùì Pregunta 3: Dise√±o con Func&lt;T&gt;</h3>
                    <p style="margin-bottom: 10px;"><strong>Reescribe el c√°lculo de descuento usando Func&lt;string, decimal&gt;. 
                    ¬øC√≥mo lo har√≠as extensible para agregar nuevos tipos de usuario sin modificar c√≥digo?</strong></p>
                    
                    <details style="margin-top: 10px;">
                        <summary style="cursor: pointer; color: #667eea;">Ver Respuesta</summary>
                        <div class="highlight" style="margin-top: 10px;">
                            <div class="code-block" style="font-size: 0.85em;">
<span class="comment">// Diccionario de estrategias</span>
<span class="keyword">var</span> discountStrategies = <span class="keyword">new</span> <span class="type">Dictionary</span>&lt;<span class="type">string</span>, <span class="type">Func</span>&lt;<span class="type">string</span>, <span class="type">decimal</span>&gt;&gt;
{
    [<span class="string">"Gold"</span>] = _ => 0.2m,
    [<span class="string">"Silver"</span>] = _ => 0.1m,
    [<span class="string">"Bronze"</span>] = _ => 0.05m,
    [<span class="string">"Platinum"</span>] = _ => 0.3m  <span class="comment">// F√°cil agregar</span>
};

<span class="comment">// Uso con fallback</span>
<span class="keyword">var</span> discount = discountStrategies.<span class="method">GetValueOrDefault</span>(userType, _ => 0.05m)(userType);
                            </div>
                        </div>
                    </details>
                </div>

                <div class="card">
                    <h3>‚ùì Pregunta 4: Principios SOLID</h3>
                    <p style="margin-bottom: 10px;"><strong>Explica c√≥mo el uso de Action&lt;T&gt; para notificaciones ayuda a cumplir con DIP 
                    (Dependency Inversion Principle).</strong></p>
                    
                    <details style="margin-top: 10px;">
                        <summary style="cursor: pointer; color: #667eea;">Ver Respuesta</summary>
                        <div class="highlight" style="margin-top: 10px;">
                            <p><strong>DIP establece:</strong> "Depende de abstracciones, no de concreciones"</p>
                            <p style="margin-top: 10px;">Al usar Action&lt;Order&gt;:</p>
                            <ul style="margin-left: 20px;">
                                <li>‚Ä¢ OrderProcessor no conoce SmtpClient (concreci√≥n)</li>
                                <li>‚Ä¢ Depende de una abstracci√≥n (la acci√≥n a ejecutar)</li>
                                <li>‚Ä¢ El c√≥digo de alto nivel no depende de detalles de implementaci√≥n</li>
                                <li>‚Ä¢ F√°cil cambiar entre email, SMS, push sin modificar OrderProcessor</li>
                            </ul>
                        </div>
                    </details>
                </div>

                <div class="card">
                    <h3>üéØ Ejercicio de Dise√±o</h3>
                    <p><strong>Dise√±a un sistema de validaci√≥n flexible usando Func&lt;T, bool&gt;</strong></p>
                    <p style="margin-top: 10px;">Requisitos:</p>
                    <ul style="margin-left: 20px; font-size: 0.9em;">
                        <li>‚Ä¢ Validar √≥rdenes con m√∫ltiples reglas</li>
                        <li>‚Ä¢ Reglas componibles (AND, OR)</li>
                        <li>‚Ä¢ Mensajes de error descriptivos</li>
                        <li>‚Ä¢ F√°cil agregar nuevas validaciones</li>
                    </ul>
                    <p style="margin-top: 15px;"><em>Discutir soluciones en grupo (10 min)</em></p>
                </div>
            </div>
            <div class="slide-number">18 / 20</div>
        </div>

        <!-- Slide 19: Caso de Estudio Avanzado -->
        <div class="slide">
            <div class="slide-header">
                <h2>Caso Avanzado: Pipeline de Procesamiento</h2>
                <p class="subtitle">Combinando todas las t√©cnicas</p>
            </div>
            <div class="content">
                <div class="code-block good">
<span class="comment">// Pipeline flexible usando delegados y m√©todo builder</span>
<span class="keyword">public class</span> <span class="type">OrderPipeline</span>
{
    <span class="keyword">private readonly</span> <span class="type">List</span>&lt;<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">Task</span>&lt;<span class="type">Order</span>&gt;&gt;&gt; _steps = <span class="keyword">new</span>();
    <span class="keyword">private readonly</span> <span class="type">List</span>&lt;<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">bool</span>&gt;&gt; _validations = <span class="keyword">new</span>();
    <span class="keyword">private</span> <span class="type">Action</span>&lt;<span class="type">Order</span>, <span class="type">Exception</span>&gt; _errorHandler;

    <span class="comment">// Fluent API para configurar el pipeline</span>
    <span class="keyword">public</span> <span class="type">OrderPipeline</span> <span class="method">AddValidation</span>(<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">bool</span>&gt; validation)
    {
        _validations.<span class="method">Add</span>(validation);
        <span class="keyword">return this</span>;
    }

    <span class="keyword">public</span> <span class="type">OrderPipeline</span> <span class="method">AddStep</span>(<span class="type">Func</span>&lt;<span class="type">Order</span>, <span class="type">Task</span>&lt;<span class="type">Order</span>&gt;&gt; step)
    {
        _steps.<span class="method">Add</span>(step);
        <span class="keyword">return this</span>;
    }

    <span class="keyword">public</span> <span class="type">OrderPipeline</span> <span class="method">OnError</span>(<span class="type">Action</span>&lt;<span class="type">Order</span>, <span class="type">Exception</span>&gt; handler)
    {
        _errorHandler = handler;
        <span class="keyword">return this</span>;
    }

    <span class="keyword">public async</span> <span class="type">Task</span>&lt;<span class="type">Order</span>&gt; <span class="method">ExecuteAsync</span>(<span class="type">Order</span> order)
    {
        <span class="keyword">try</span>
        {
            <span class="comment">// Ejecutar validaciones</span>
            <span class="keyword">if</span> (!_validations.<span class="method">All</span>(v => v(order)))
                <span class="keyword">throw new</span> <span class="type">ValidationException</span>(<span class="string">"Order validation failed"</span>);

            <span class="comment">// Ejecutar pipeline</span>
            <span class="keyword">var</span> result = order;
            <span class="keyword">foreach</span> (<span class="keyword">var</span> step <span class="keyword">in</span> _steps)
            {
                result = <span class="keyword">await</span> <span class="method">step</span>(result);
            }
            
            <span class="keyword">return</span> result;
        }
        <span class="keyword">catch</span> (<span class="type">Exception</span> ex)
        {
            _errorHandler?.Invoke(order, ex);
            <span class="keyword">throw</span>;
        }
    }
}

<span class="comment">// Uso del pipeline</span>
<span class="keyword">var</span> pipeline = <span class="keyword">new</span> <span class="type">OrderPipeline</span>()
    .<span class="method">AddValidation</span>(order => order.Amount > 0)
    .<span class="method">AddValidation</span>(order => !<span class="type">string</span>.<span class="method">IsNullOrEmpty</span>(order.CustomerType))
    .<span class="method">AddStep</span>(<span class="keyword">async</span> order => {
        <span class="comment">// Calcular precio con descuento</span>
        order.FinalPrice = order.Amount - <span class="method">CalculateDiscount</span>(order);
        <span class="keyword">return</span> order;
    })
    .<span class="method">AddStep</span>(<span class="keyword">async</span> order => {
        <span class="comment">// Guardar en base de datos</span>
        <span class="keyword">await</span> _repository.<span class="method">SaveAsync</span>(order);
        <span class="keyword">return</span> order;
    })
    .<span class="method">AddStep</span>(<span class="keyword">async</span> order => {
        <span class="comment">// Enviar notificaci√≥n</span>
        <span class="keyword">await</span> _notificationService.<span class="method">NotifyAsync</span>(order);
        <span class="keyword">return</span> order;
    })
    .<span class="method">OnError</span>((order, ex) => _logger.<span class="method">LogError</span>(ex, <span class="string">"Error processing order {OrderId}"</span>, order.Id));

<span class="comment">// Procesar orden</span>
<span class="keyword">var</span> processedOrder = <span class="keyword">await</span> pipeline.<span class="method">ExecuteAsync</span>(newOrder);
                </div>
                
                <div class="highlight" style="margin-top: 20px;">
                    <p><strong>üöÄ Beneficios del Pipeline Pattern:</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>‚Ä¢ Composici√≥n flexible de operaciones</li>
                        <li>‚Ä¢ F√°cil agregar/quitar/reordenar pasos</li>
                        <li>‚Ä¢ Manejo centralizado de errores</li>
                        <li>‚Ä¢ Testeable paso por paso</li>
                        <li>‚Ä¢ Reutilizable para diferentes flujos</li>
                    </ul>
                </div>
            </div>
            <div class="slide-number">19 / 20</div>
        </div>

        <!-- Slide 20: Conclusiones Finales -->
        <div class="slide">
            <div class="slide-header">
                <h2>Conclusiones y Pr√≥ximos Pasos</h2>
            </div>
            <div class="content">
                <div class="card" style="text-align: center; max-width: 800px; margin: 0 auto;">
                    <h3>üéØ Conceptos Clave Aprendidos</h3>
                    <div style="text-align: left; margin-top: 30px;">
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Extract Method:</strong> Primera l√≠nea de defensa contra c√≥digo complejo</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Introduce Class:</strong> Separaci√≥n de responsabilidades (SRP)</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Func&lt;T&gt; y Action&lt;T&gt;:</strong> Flexibilidad sin modificaci√≥n (OCP)</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Patrones de Dise√±o:</strong> Evoluci√≥n natural del refactoring</p>
                        <p style="margin-bottom: 20px;">‚úÖ <strong>Clean Code:</strong> C√≥digo que expresa intenci√≥n, no implementaci√≥n</p>
                    </div>
                </div>
                
                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <h3>üìö Recursos Recomendados</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>"Refactoring" - Martin Fowler</li>
                            <li>"Clean Code" - Robert Martin</li>
                            <li>"Design Patterns" - Gang of Four</li>
                            <li>refactoring.guru</li>
                            <li>"Working Effectively with Legacy Code" - M. Feathers</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>üéØ Plan de Acci√≥n</h3>
                        <ul class="list" style="font-size: 0.95em;">
                            <li>Identifica un m√©todo > 50 l√≠neas</li>
                            <li>Aplica Extract Method</li>
                            <li>Busca if-else repetitivos</li>
                            <li>Experimenta con delegados</li>
                            <li>Implementa un patr√≥n</li>
                            <li>Mide el impacto</li>
                        </ul>
                    </div>
                </div>
                
                <div class="highlight" style="margin-top: 40px;">
                    <p style="text-align: center; font-size: 1.2em;">
                        <strong>"El c√≥digo limpio no se escribe siguiendo un conjunto de reglas. 
                        Se escribe poniendo atenci√≥n a los detalles."</strong>
                    </p>
                    <p style="text-align: center; margin-top: 10px; color: #a8a8b3;">‚Äî Robert C. Martin</p>
                </div>
            </div>
            <div class="slide-number">20 / 20</div>
        </div>

        <!-- Instructor Info -->
        <div class="instructor-info">
            <div class="instructor-name">Alejandro Sfrede</div>
            <div class="instructor-area">√Årea de Arquitectura</div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-btn" onclick="previousSlide()" id="prevBtn">‚Üê Anterior</button>
            <button class="nav-btn" onclick="nextSlide()" id="nextBtn">Siguiente ‚Üí</button>
            <button class="nav-btn" onclick="goHome()" style="background: rgba(102, 126, 234, 0.3);">üè† Portal</button>
        </div>

        <div class="slide-counter">
            <span id="currentSlide">1</span> / <span id="totalSlides">20</span>
        </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;

        function showSlide(n) {
            slides.forEach(slide => slide.classList.remove('active'));
            currentSlide = (n + totalSlides) % totalSlides;
            slides[currentSlide].classList.add('active');
            
            document.getElementById('currentSlide').textContent = currentSlide + 1;
            document.getElementById('prevBtn').disabled = currentSlide === 0;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides - 1;
            
            // Update progress bar
            const progress = ((currentSlide + 1) / totalSlides) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                showSlide(currentSlide);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                showSlide(currentSlide);
            }
        }

        function goHome() {
            window.location.href = '../index.html';
        }

        // Enhanced keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousSlide();
            } else if (e.key === 'Home') {
                e.preventDefault();
                goHome();
            }
        });

        // Touch/swipe support
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) changeSlide(1);
            if (touchEndX > touchStartX + 50) changeSlide(-1);
        }

        // Initialize
        document.getElementById('totalSlides').textContent = totalSlides;
        showSlide(0);
    </script>
</body>
</html>